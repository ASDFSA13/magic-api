var ji=Object.defineProperty,Gi=Object.defineProperties;var Vi=Object.getOwnPropertyDescriptors;var Hn=Object.getOwnPropertySymbols;var Hi=Object.prototype.hasOwnProperty,Yi=Object.prototype.propertyIsEnumerable;var nn=(e,t,n)=>t in e?ji(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ce=(e,t)=>{for(var n in t||(t={}))Hi.call(t,n)&&nn(e,n,t[n]);if(Hn)for(var n of Hn(t))Yi.call(t,n)&&nn(e,n,t[n]);return e},Ve=(e,t)=>Gi(e,Vi(t));var dt=(e,t,n)=>(nn(e,typeof t!="symbol"?t+"":t,n),n);import{r as v,o as E,c as U,u as P,a as L,F as ee,b as ue,n as de,w as ge,d as te,e as x,t as j,f as De,g as k,h as C,i as p,j as an,k as Ki,p as tt,l as ht,m as Wi,q as nt,s as Ie,v as Ye,x as ft,y as ie,z as J,A as Ke,B as We,C as _e,D as se,T as Yn,E as mt,G as Pe,H as qi,I as sn,J as Xi,K as on,L as Kn,M as rt,N as zi,O as At,P as Ue,Q as Ji}from"./vue.447d38aa.js";import{l as Wn,e as qe,a as W,R as it,W as Qi,b as Zi,C as qn,K as lt,c as gt,d as ea,f as rn,T as ta,t as na}from"./vendor.32b48efa.js";import{a as ia}from"./axios.23e7b955.js";const aa={setup(e){let t={};try{parent&&parent.MAGIC_EDITOR_CONFIG&&(t=ce({},parent.MAGIC_EDITOR_CONFIG))}catch{}return window.MAGIC_EDITOR_CONFIG&&(t=ce(ce({},t),window.MAGIC_EDITOR_CONFIG)),t.baseURL="./",t.serverURL="./",t.inJar=!0,(n,i)=>{const a=v("magic-editor");return E(),U(a,{config:P(t)},null,8,["config"])}}};const sa="modulepreload",Xn={},oa="./",M=function(t,n){return!n||n.length===0?t():Promise.all(n.map(i=>{if(i=`${oa}${i}`,i in Xn)return;Xn[i]=!0;const a=i.endsWith(".css"),s=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const o=document.createElement("link");if(o.rel=a?"stylesheet":sa,a||(o.as="script",o.crossOrigin=""),o.href=i,document.head.appendChild(o),a)return new Promise((r,l)=>{o.addEventListener("load",r),o.addEventListener("error",l)})})).then(()=>t())};var V=(e,t)=>{const n=e.__vccOpts||e;for(const[i,a]of t)n[i]=a;return n};const ra={props:{menus:Array,onDestory:Function,position:Object},data(){return{style:{left:this.position.x+"px",top:this.position.y+"px"}}},mounted(){document.addEventListener("click",this.onMouseup);const e=this.position.x+this.$root.$el.offsetWidth,t=document.querySelector(".magic-editor").getBoundingClientRect();t.x+t.width<e&&(this.style.left=`${t.x+t.width-this.$root.$el.offsetWidth}px`)},unmounted(){document.removeEventListener("click",this.onMouseup)},methods:{onMouseup(){this.onDestory&&this.onDestory()}},computed:{hasIcon(){return this.menus.some(e=>e.icon)}}},la=["onClick"],ua={key:0,class:"magic-context-menu-icon"};function ca(e,t,n,i,a,s){const o=v("magic-icon");return E(),L("ul",{class:"magic-context-menu none-select",style:De(a.style)},[(E(!0),L(ee,null,ue(n.menus,(r,l)=>(E(),L("li",{key:l,class:de({divided:r.divided}),onClick:ge(()=>{s.onMouseup(),r.onClick&&r.onClick()},["stop"])},[s.hasIcon?(E(),L("span",ua,[r.icon?(E(),U(o,{key:0,icon:r.icon,size:"12px"},null,8,["icon"])):te("",!0)])):te("",!0),x("label",null,j(r.label),1)],10,la))),128))],4)}var zn=V(ra,[["render",ca],["__scopeId","data-v-8dc00ad0"]]),_a=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:zn});const pa={style:{"white-space":"normal"}},Jn={props:{title:{type:String,default:"\u63D0\u793A"},ok:{type:String,default:"\u786E\u5B9A"},message:{type:String,required:!0},onClose:{type:Function,default:()=>{}}},setup(e){const t=k(!0);return(n,i)=>{const a=v("magic-button"),s=v("magic-button-group"),o=v("magic-dialog");return E(),U(o,{value:t.value,"onUpdate:value":i[1]||(i[1]=r=>t.value=r),title:e.title,ref:"dialog",onClose:i[2]||(i[2]=r=>e.onClose())},{default:C(()=>[x("pre",pa,j(e.message),1),p(s,{align:"center",style:{padding:"5px 0"}},{default:C(()=>[p(a,{value:e.ok,type:"active",onOnClick:i[0]||(i[0]=r=>n.$refs.dialog.close())},null,8,["value"])]),_:1})]),_:1},8,["value","title"])}}};var da=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Jn});const ha=["innerHTML"],fa={props:{title:{type:String,default:"\u63D0\u793A"},ok:{type:String,default:"\u786E\u5B9A"},cancel:{type:String,default:"\u53D6\u6D88"},message:{type:String,required:!0},success:{type:Function,default:()=>{}},onClose:{type:Function,default:()=>{}}},setup(e){const t=k(!0);return(n,i)=>{const a=v("magic-button"),s=v("magic-button-group"),o=v("magic-dialog");return E(),U(o,{value:t.value,"onUpdate:value":i[2]||(i[2]=r=>t.value=r),title:e.title,ref:"dialog",onClose:i[3]||(i[3]=r=>e.onClose())},{default:C(()=>[x("pre",{innerHTML:e.message},null,8,ha),p(s,{align:"right",style:{padding:"5px 0"}},{default:C(()=>[p(a,{value:e.ok,type:"active",onOnClick:i[0]||(i[0]=()=>{e.success(),n.$refs.dialog.close()})},null,8,["value"]),p(a,{value:e.cancel,onOnClick:i[1]||(i[1]=r=>n.$refs.dialog.close())},null,8,["value"])]),_:1})]),_:1},8,["value","title"])}}};var Qn=V(fa,[["__scopeId","data-v-bf9f8d80"]]),ma=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Qn});let Zn=null;const ei=(e,t)=>{const n=document.createElement("div");document.querySelector(".magic-editor .magic-mounts").appendChild(n);const i=an(e,Ve(ce({},t),{onClose:()=>n.remove()}));Zn(i),i.mount(n)},me={alert:(e,t,n)=>ei(Jn,{message:e,title:t,ok:n}),confirm:(e,t,n)=>ei(Qn,{title:e,message:t,success:n})},ti=(e,t)=>{Zn=t,Object.keys(me).forEach(n=>e.config.globalProperties[`$${n}`]=me[n])};var ga=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",install:ti,default:me});const va="magic-editor",Ea="2.0.0",Ta={dev:"vite",build:"vite build"},ba={axios:"^0.24.0","monaco-editor":"0.29.1",qs:"^6.10.1",vue:"^3.2.21"},Sa={"@vitejs/plugin-vue":"^1.9.4",vite:"^2.6.13","@vue/compiler-sfc":"^3.2.21"};var ya={name:va,version:Ea,scripts:Ta,dependencies:ba,devDependencies:Sa};let ni=ya.version,Oa="V"+ni.replace(/\./g,"_");const w={BASE_URL:"",WEBSOCKET_SERVER:"",SERVER_URL:"",AUTO_SAVE:!0,user:null,DECORATION_TIMEOUT:1e4,CHECK_UPDATE:!0,BLOCK_CLOSE:!0,MAGIC_API_VERSION_TEXT:ni,MAGIC_API_VERSION:Oa,API_DEFAULT_METHOD:"GET",CLIENT_ID:"none",HEADER_REQUEST_CLIENT_ID:"Magic-Request-Client-Id",HEADER_REQUEST_SCRIPT_ID:"Magic-Request-Script-Id",HEADER_REQUEST_BREAKPOINTS:"Magic-Request-Breakpoints",HEADER_RESPONSE_MAGIC_CONTENT_TYPE:"ma-content-type",HEADER_APPLICATION_STREAM:"application/octet-stream",HEADER_CONTENT_DISPOSITION:"ma-content-disposition",HEADER_MAGIC_TOKEN:"magic-token",HEADER_MAGIC_TOKEN_VALUE:"unauthorization",IGNORE_VERSION:"ignore-version",RECENT_OPENED_TAB:"recent_opened_tab",RECENT_OPENED:"recent_opened",RESPONSE_CODE_DEBUG:1e3,RESPONSE_CODE_SCRIPT_ERROR:-1e3,RESPONSE_NO_PERMISSION:-10,DEFAULT_EXPAND:!0,LOGINED:!1,LOG_MAX_ROWS:1/0,LOCKED:"1",UNLOCK:"0",STORE:{theme:"theme",token:"token"},GLOBAL:{parameters:[],headers:[]},THEME:"default",JDBC_DRIVERS:["com.mysql.jdbc.Driver","com.mysql.cj.jdbc.Driver","oracle.jdbc.driver.OracleDriver","org.postgresql.Driver","com.microsoft.sqlserver.jdbc.SQLServerDriver","com.ibm.db2.jcc.DB2Driver"],DATASOURCE_TYPES:["com.zaxxer.hikari.HikariDataSource","com.alibaba.druid.pool.DruidDataSource","org.apache.tomcat.jdbc.pool.DataSource","org.apache.commons.dbcp2.BasicDataSource"],OPTIONS:[],EDITOR_FONT_FAMILY:'JetBrainsMono, Consolas, "Courier New",monospace, \u5FAE\u8F6F\u96C5\u9ED1',EDITOR_FONT_SIZE:14,VALIDATE_TYPES:[{value:"pass",text:"\u4E0D\u9A8C\u8BC1"},{value:"expression",text:"\u8868\u8FBE\u5F0F\u9A8C\u8BC1"},{value:"pattern",text:"\u6B63\u5219\u9A8C\u8BC1"}],DEFAULT_VALIDATE_TYPE:"pass",REQUEST_PARAMETER_TYPES:[{value:"String",text:"String"},{value:"Boolean",text:"Boolean"},{value:"Integer",text:"Integer"},{value:"Date",text:"Date"},{value:"Double",text:"Double"},{value:"Long",text:"Long"},{value:"Short",text:"Short"},{value:"Float",text:"Float"},{value:"Byte",text:"Byte"},{value:"MultipartFile",text:"MultipartFile"},{value:"MultipartFiles",text:"MultipartFiles"}],GLOBAL_PARAMETER_TYPES:[{value:"String",text:"String"},{value:"Boolean",text:"Boolean"},{value:"Integer",text:"Integer"},{value:"Date",text:"Date"},{value:"Double",text:"Double"},{value:"Long",text:"Long"},{value:"Short",text:"Short"},{value:"Float",text:"Float"},{value:"Byte",text:"Byte"}],DEFAULT_REQUEST_PARAMETER_TYPE:"String",REQUEST_SIMPLE_TYPES:[{value:"String",text:"String"},{value:"Boolean",text:"Boolean"},{value:"Integer",text:"Integer"},{value:"Date",text:"Date"},{value:"Double",text:"Double"},{value:"Long",text:"Long"},{value:"Short",text:"Short"},{value:"Float",text:"Float"},{value:"Byte",text:"Byte"}],DEFAULT_REQUEST_SIMPLE_TYPE:"String",REQUEST_METHODS:[{value:"GET",text:"GET"},{value:"POST",text:"POST"},{value:"PUT",text:"PUT"},{value:"DELETE",text:"DELETE"},{value:"HEAD",text:"HEAD"},{value:"PATCH",text:"PATCH"}],DEFAULT_REQUEST_METHOD:"GET",FUNCTION_RETURN_TYPES:[{value:"java.lang.Number",text:"\u6570\u503C"},{value:"java.lang.String",text:"\u5B57\u7B26\u4E32"},{value:"java.util.Collection",text:"\u96C6\u5408"},{value:"java.util.Map",text:"Map"},{value:"java.lang.Object",text:"Object"}],BODY_DATA_TYPES:[{value:"String",text:"String"},{value:"Integer",text:"Integer"},{value:"Double",text:"Double"},{value:"Long",text:"Long"},{value:"Short",text:"Short"},{value:"Float",text:"Float"},{value:"Byte",text:"Byte"},{value:"Boolean",text:"Boolean"},{value:"Object",text:"Object"},{value:"Array",text:"Array"}],DEFAULT_FUNCTION_RETURN_TYPE:"java.lang.Object",config:{}},ii={};Object.entries({"./components/magic-editor.vue":()=>M(()=>Promise.resolve().then(function(){return ao}),void 0),"./components/common/magic-context-menu.vue":()=>M(()=>Promise.resolve().then(function(){return _a}),void 0),"./components/common/magic-empty.vue":()=>M(()=>Promise.resolve().then(function(){return lo}),void 0),"./components/common/magic-loading.vue":()=>M(()=>Promise.resolve().then(function(){return po}),void 0),"./components/common/magic-monaco-diff-editor.vue":()=>M(()=>Promise.resolve().then(function(){return vo}),void 0),"./components/common/magic-monaco-editor.vue":()=>M(()=>Promise.resolve().then(function(){return yo}),void 0),"./components/common/magic-resizer.vue":()=>M(()=>Promise.resolve().then(function(){return Io}),void 0),"./components/panel/magic-cron-info.vue":()=>M(()=>Promise.resolve().then(function(){return Co}),void 0),"./components/panel/magic-function-info.vue":()=>M(()=>Promise.resolve().then(function(){return $o}),void 0),"./components/panel/magic-websocket-info.vue":()=>M(()=>Promise.resolve().then(function(){return Uo}),void 0),"./components/common/data/magic-navbar-item.vue":()=>M(()=>Promise.resolve().then(function(){return Go}),void 0),"./components/common/data/magic-navbar.css":()=>M(()=>Promise.resolve().then(function(){return Ho}),void 0),"./components/common/data/magic-navbar.js":()=>M(()=>Promise.resolve().then(function(){return qo}),void 0),"./components/common/data/magic-tab.css":()=>M(()=>Promise.resolve().then(function(){return zo}),void 0),"./components/common/data/magic-tab.js":()=>M(()=>Promise.resolve().then(function(){return Qo}),void 0),"./components/common/data/magic-table-column.vue":()=>M(()=>Promise.resolve().then(function(){return er}),void 0),"./components/common/data/magic-table.css":()=>M(()=>Promise.resolve().then(function(){return nr}),void 0),"./components/common/data/magic-table.js":()=>M(()=>Promise.resolve().then(function(){return ar}),void 0),"./components/common/data/magic-tree.css":()=>M(()=>Promise.resolve().then(function(){return or}),void 0),"./components/common/data/magic-tree.js":()=>M(()=>Promise.resolve().then(function(){return lr}),void 0),"./components/common/dialog/magic-alert.vue":()=>M(()=>Promise.resolve().then(function(){return da}),void 0),"./components/common/dialog/magic-confirm.vue":()=>M(()=>Promise.resolve().then(function(){return ma}),void 0),"./components/common/dialog/magic-dialog.vue":()=>M(()=>Promise.resolve().then(function(){return pr}),void 0),"./components/common/dialog/magic-modal.js":()=>M(()=>Promise.resolve().then(function(){return ga}),void 0),"./components/common/dialog/magic-notify.vue":()=>M(()=>Promise.resolve().then(function(){return Er}),void 0),"./components/common/form/magic-button-group.vue":()=>M(()=>Promise.resolve().then(function(){return Sr}),void 0),"./components/common/form/magic-button.vue":()=>M(()=>Promise.resolve().then(function(){return Ar}),void 0),"./components/common/form/magic-checkbox.vue":()=>M(()=>Promise.resolve().then(function(){return Cr}),void 0),"./components/common/form/magic-file.vue":()=>M(()=>Promise.resolve().then(function(){return wr}),void 0),"./components/common/form/magic-input.vue":()=>M(()=>Promise.resolve().then(function(){return Ur}),void 0),"./components/common/form/magic-select.vue":()=>M(()=>Promise.resolve().then(function(){return Hr}),void 0),"./components/common/form/magic-textarea.vue":()=>M(()=>Promise.resolve().then(function(){return qr}),void 0),"./components/common/icon/magic-avatar-group.vue":()=>M(()=>Promise.resolve().then(function(){return Jr}),void 0),"./components/common/icon/magic-avatar.vue":()=>M(()=>Promise.resolve().then(function(){return tl}),void 0),"./components/common/icon/magic-icon.vue":()=>M(()=>Promise.resolve().then(function(){return Ko}),void 0),"./components/common/icon/magic-text-icon.vue":()=>M(()=>Promise.resolve().then(function(){return sl}),void 0),"./components/panel/api/magic-api-body.vue":()=>M(()=>Promise.resolve().then(function(){return ll}),void 0),"./components/panel/api/magic-api-description.vue":()=>M(()=>Promise.resolve().then(function(){return cl}),void 0),"./components/panel/api/magic-api-group.vue":()=>M(()=>Promise.resolve().then(function(){return ml}),void 0),"./components/panel/api/magic-api-header.vue":()=>M(()=>Promise.resolve().then(function(){return El}),void 0),"./components/panel/api/magic-api-info.vue":()=>M(()=>Promise.resolve().then(function(){return Rl}),void 0),"./components/panel/api/magic-api-option.vue":()=>M(()=>Promise.resolve().then(function(){return Cl}),void 0),"./components/panel/api/magic-api-parameter.vue":()=>M(()=>Promise.resolve().then(function(){return kl}),void 0),"./components/panel/api/magic-api-path.vue":()=>M(()=>Promise.resolve().then(function(){return Dl}),void 0),"./components/panel/api/magic-api-request-body.vue":()=>M(()=>Promise.resolve().then(function(){return Ml}),void 0),"./components/panel/api/magic-api-request-structure.vue":()=>M(()=>Promise.resolve().then(function(){return Vl}),void 0),"./components/panel/api/magic-api-response-body.vue":()=>M(()=>Promise.resolve().then(function(){return Wl}),void 0),"./components/panel/api/magic-api-response-header.vue":()=>M(()=>Promise.resolve().then(function(){return zl}),void 0),"./components/panel/api/magic-api-response-structure.vue":()=>M(()=>Promise.resolve().then(function(){return nu}),void 0),"./components/panel/api/magic-api-response.vue":()=>M(()=>Promise.resolve().then(function(){return ou}),void 0),"./components/panel/api/magic-global-header.vue":()=>M(()=>Promise.resolve().then(function(){return uu}),void 0),"./components/panel/api/magic-global-parameter.vue":()=>M(()=>Promise.resolve().then(function(){return pu}),void 0),"./components/panel/api/magic-global.vue":()=>M(()=>Promise.resolve().then(function(){return mu}),void 0),"./components/panel/common/magic-panel-common-toolbar.vue":()=>M(()=>Promise.resolve().then(function(){return vu}),void 0),"./components/panel/common/magic-panel-toolbar.vue":()=>M(()=>Promise.resolve().then(function(){return yu}),void 0),"./components/panel/common/magic-resource-choose.vue":()=>M(()=>Promise.resolve().then(function(){return Cu}),void 0),"./components/panel/datasource/magic-datasource-datasource.vue":()=>M(()=>Promise.resolve().then(function(){return Xu}),void 0),"./components/panel/footer/magic-backup.vue":()=>M(()=>Promise.resolve().then(function(){return ic}),void 0),"./components/panel/footer/magic-debug.vue":()=>M(()=>Promise.resolve().then(function(){return Cc}),void 0),"./components/panel/footer/magic-event.vue":()=>M(()=>Promise.resolve().then(function(){return wc}),void 0),"./components/panel/footer/magic-log.vue":()=>M(()=>Promise.resolve().then(function(){return Uc}),void 0),"./components/panel/footer/magic-online.vue":()=>M(()=>Promise.resolve().then(function(){return Gc}),void 0),"./components/panel/footer/magic-status-bar.vue":()=>M(()=>Promise.resolve().then(function(){return qc}),void 0),"./components/panel/footer/magic-todo.vue":()=>M(()=>Promise.resolve().then(function(){return e_}),void 0),"./components/panel/footer/magic-toolbar.vue":()=>M(()=>Promise.resolve().then(function(){return o_}),void 0),"./components/panel/function/magic-function-parameter.vue":()=>M(()=>Promise.resolve().then(function(){return u_}),void 0),"./components/panel/header/magic-export.vue":()=>M(()=>Promise.resolve().then(function(){return p_}),void 0),"./components/panel/header/magic-header.vue":()=>M(()=>Promise.resolve().then(function(){return y_}),void 0),"./components/panel/header/magic-push.vue":()=>M(()=>Promise.resolve().then(function(){return C_}),void 0),"./components/panel/header/magic-search.vue":()=>M(()=>Promise.resolve().then(function(){return U_}),void 0),"./components/panel/header/magic-upload.vue":()=>M(()=>Promise.resolve().then(function(){return F_}),void 0),"./components/panel/main/magic-data-resource.vue":()=>M(()=>Promise.resolve().then(function(){return q_}),void 0),"./components/panel/main/magic-login.vue":()=>M(()=>Promise.resolve().then(function(){return np}),void 0),"./components/panel/main/magic-main.vue":()=>M(()=>Promise.resolve().then(function(){return vp}),void 0),"./components/panel/main/magic-recent-opened.vue":()=>M(()=>Promise.resolve().then(function(){return Ap}),void 0),"./components/panel/main/magic-resource.vue":()=>M(()=>Promise.resolve().then(function(){return $p}),void 0),"./components/panel/main/magic-script-editor.vue":()=>M(()=>Promise.resolve().then(function(){return Hp}),void 0),"./components/panel/task/magic-task-info.vue":()=>M(()=>Promise.resolve().then(function(){return Zp}),void 0)}).forEach(([e,t])=>ii[e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("."))]=Ki(t));const ln=e=>{let t;Object.entries(ii).forEach(([n,i])=>{e.component(n,i)}),e.config.globalProperties.$contextmenu=n=>{t!=null&&t.unmount(),t=an(zn,{menus:n.menus,position:{x:n.event.clientX,y:n.event.clientY},onDestory:()=>{t&&t.unmount(),t=null}}),ln(t),t.mount(".magic-editor .magic-mounts")},Object.keys(w).forEach(n=>e.config.globalProperties[`$${n}`]=w[n]),ti(e,ln)},ai=an(aa);ai.use(ln);ai.mount("#app");const Rt={baseURL:"",method:"post",timeout:0,withCredentials:!0,responseType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(e){return e instanceof FormData?e:Wn.stringify(e,{arrayFormat:"repeat",allowDots:!0})}],paramsSerializer(e){return Wn.stringify(e,{arrayFormat:"repeat",allowDots:!0})}};class Aa{constructor(){dt(this,"successHandle",null);dt(this,"errorHandle",null);dt(this,"endHandle",null);dt(this,"exceptionHandle",(t,n)=>{me.alert(n,`\u8BF7\u6C42\u51FA\u9519\uFF0C\u5F02\u5E38\u4EE3\u7801(${t})`)})}success(t){return this.successHandle=t,this}exception(t){return this.exceptionHandle=t,this}error(t){return this.errorHandle=t,this}end(t){this.endHandle=t}}class Ra{constructor(){dt(this,"_axios",null);this._axios=ia.create(Rt)}getAxios(){return this._axios}setBaseURL(t){Rt.baseURL=t}execute(t){let n=ce({baseURL:Rt.baseURL},t);return n.headers=n.headers||{},n.headers[w.HEADER_MAGIC_TOKEN]=w.HEADER_MAGIC_TOKEN_VALUE,this._axios.request(n)}processError(t){t.response?me.alert(JSON.stringify(t.response.data||"")||`\u8BF7\u6C42\u51FA\u9519HttpStatus:(${t.response.status})`,`\u8BF7\u6C42\u51FA\u9519HttpStatus:(${t.response.status})`):me.alert(t.message,"\u8BF7\u6C42\u51FA\u9519"),console.error(t)}sendJson(t,n,i){return this.send(t,JSON.stringify(n),i||{method:"post",headers:{"Content-Type":"application/json"},transformRequest:[]})}sendGet(t,n,i){return i=i||{},i.method="get",this.send(t,n,i)}sendPost(t,n,i){return i=i||{},i.method="post",this.send(t,n,i)}send(t,n,i){let a=i||Rt||{};a.url=t,(a.method||"").toLowerCase()==="post"?a.data=n:a.params=n,a.baseURL=Rt.baseURL;let s=new Aa,o=!1,r=(l,u)=>{l instanceof Blob?(o=!0,s.successHandle&&s.successHandle(l,u)):l.code===1?(o=!0,s.successHandle&&s.successHandle(l.data,u)):(l.code===401&&console.log("\u672A\u767B\u5F55"),s.exceptionHandle&&s.exceptionHandle(l.code,l.message,u))};return this.execute(a).then(l=>{let u=l.data,c=l.headers["content-type"]&&l.headers["content-type"].startsWith("application/json");if(u instanceof Blob&&c){let f=new FileReader;f.readAsText(u),f.onload=function(){try{u=JSON.parse(this.result),r(u,l)}catch(m){console.error(m),r(u,l)}};return}r(u,l)}).catch(l=>{typeof s.errorHandle=="function"?s.errorHandle(l.response.data,l.response,l):this.processError(l)}).finally(()=>{typeof s.endHandle=="function"&&s.endHandle(o)}),s}}var Y=new Ra;const oe={Alt:512,Ctrl:1024,Shift:2048};new Array(26).fill(0).forEach((e,t)=>oe[String.fromCharCode(65+t)]=65+t);new Array(12).fill(0).forEach((e,t)=>oe[`F${t+1}`]=112+t);const Vt=[],si=e=>{if(e.keyCode){let t=e.keyCode;t|=e.ctrlKey&&oe.Ctrl||0,t|=e.shiftKey&&oe.Shift||0,t|=e.altKey&&oe.Alt||0,t|=e.metaKey&&oe.Ctrl||0;for(let n=0,i=Vt.length;n<i;n++){let a=Vt[n];t==a.code&&(e.preventDefault(),(a.target.contains(e.target)||e.target===a.target)&&a.callback())}}};let un=!1;oe.init=()=>document.addEventListener("keydown",si);oe.bind=(e,t,n)=>{un||(un=!0,oe.init()),typeof n=="function"&&Vt.push({target:e,code:t,callback:n})};oe.unbind=()=>{Vt.length=0,document.removeEventListener("keydown",si),un=!1};var Ia={editor:{base:"vs",rules:[{background:"#ffffff"},{token:"keywords",foreground:"000080",fontStyle:"bold"},{token:"number",foreground:"0000FF"},{token:"keyword",foreground:"000080",fontStyle:"bold"},{token:"string.sql",foreground:"008000"},{token:"tag.sql",foreground:"0033B3"},{token:"attribute.name.sql",foreground:"174AD4"},{token:"attribute.value.sql",foreground:"067D17"},{token:"predefined",foreground:"000000",fontStyle:"italic"},{token:"operator.sql",foreground:"000080",fontStyle:"bold"},{token:"key",foreground:"660E7A"},{token:"string.key.json",foreground:"660E7A"},{token:"string.value.json",foreground:"008000"},{token:"keyword.json",foreground:"0000FF"},{token:"string",foreground:"008000",fontStyle:"bold"},{token:"string.invalid",foreground:"008000",background:"FFCCCC"},{token:"string.escape.invalid",foreground:"008000",background:"FFCCCC"},{token:"string.escape",foreground:"000080",fontStyle:"bold"},{token:"comment",foreground:"808080",fontStyle:"italic"},{token:"comment.doc",foreground:"808080",fontStyle:"italic"},{token:"comment.todo",foreground:"008DDE",fontStyle:"italic"},{token:"string.escape",foreground:"000080"}],colors:{"editor.foreground":"#000000","editor.background":"#ffffff","editorLineNumber.foreground":"#999999","editorGutter.background":"#f0f0f0","editor.lineHighlightBackground":"#FFFAE3","dropdown.background":"#F2F2F2","dropdown.foreground":"#000000","list.activeSelectionBackground":"#1A7DC4","list.activeSelectionForeground":"#ffffff"}}},xa={editor:{base:"vs-dark",rules:[{foreground:"A9B7C6"},{token:"keywords",foreground:"CC7832",fontStyle:"bold"},{token:"keyword",foreground:"CC7832",fontStyle:"bold"},{token:"number",foreground:"6897BB"},{token:"string",foreground:"6A8759",fontStyle:"bold"},{token:"string.sql",foreground:"6A8759"},{token:"tag.sql",foreground:"E8BF6A"},{token:"attribute.name.sql",foreground:"BABABA"},{token:"attribute.value.sql",foreground:"6A8759"},{token:"predefined.sql",foreground:"A9B7C6",fontStyle:"italic"},{token:"predefined.magicscript",foreground:"A9B7C6",fontStyle:"italic"},{token:"key",foreground:"9876AA"},{token:"string.key.json",foreground:"9876AA"},{token:"string.value.json",foreground:"6A8759"},{token:"keyword.json",foreground:"6897BB"},{token:"operator.sql",foreground:"CC7832",fontStyle:"bold"},{token:"string.invalid",foreground:"008000",background:"FFCCCC"},{token:"string.escape.invalid",foreground:"008000",background:"FFCCCC"},{token:"string.escape",foreground:"000080",fontStyle:"bold"},{token:"comment",foreground:"808080",fontStyle:"italic"},{token:"comment.doc",foreground:"629755",fontStyle:"italic"},{token:"comment.todo",foreground:"A8C023",fontStyle:"italic"},{token:"string.escape",foreground:"CC7832"}],colors:{"editor.background":"#2B2B2B","editorLineNumber.foreground":"#999999","editorGutter.background":"#313335","editor.lineHighlightBackground":"#323232","dropdown.background":"#3C3F41","dropdown.foreground":"#BBBBBB","list.activeSelectionBackground":"#4B6EAF","list.activeSelectionForeground":"#FFFFFF","editorSuggestWidget.selectedBackground":"#113A5C"}},styles:{"main-background-color":"#3C3F41","main-border-color":"#323232","main-color":"#bbb","main-selected-background-color":"#323232","main-hover-background-color":"#353739","main-hover-icon-background-color":"#4C5052","main-selected-color":"#fff","main-icon-color":"#AFB1B3","header-title-color":"#bbb","header-version-color":"#999","header-default-color":"#AFB1B3","empty-background-color":"#282828","empty-key-color":"#489DF6","empty-color":"#A0A0A0","button-hover-background-color":"#365880","button-hover-border-color":"#43688C","button-background-color":"#4C5052","button-border-color":"#5E6060","button-disabled-color":"#5a5a5a","navbar-body-background-color":"#3C3F41","navbar-body-border-color":"#555555","resource-label-color":"#bbb","resource-span-color":"#787878","tree-hover-background-color":"#0d293e","tree-icon-color":"#aeb9c0","table-border-color":"#646464","input-border-color":"#646464","input-foucs-color":"#3D6185","input-background-color":"#45494A","select-background-color":"#3C3F41","select-hover-background-color":"#3C3F41","select-option-background-color":"#3C3F41","select-option-hover-background-color":"#4B6EAF","select-option-border-color":"#808080","data-type-default-color":"#a9b7c6","data-type-string-color":"#6a8759","data-type-integer-color":"#6897bb","data-type-byte-color":"#6897bb","data-type-long-color":"#6897bb","data-type-float-color":"#6897bb","data-type-double-color":"#6897bb","data-type-short-color":"#6897bb","data-type-number-color":"#6897bb","data-type-boolean-color":"#cc7832","data-type-class-color":"#9876aa","data-type-key-color":"#FF8E8E","run-log-background-color":"#2b2b2b","log-level-info":"#ABC023","log-level-error":"#CC666E","log-level-debug":"#299999","log-level-warn":"unset","log-level-trace":"#5394EC","log-color-cyan":"#009191","log-color-link":"#287BDE","todo-color":"#A8C023","debug-line-background-color":"#2D6099","breakpoints-background-color":"#C75450","breakpoint-line-background-color":"#3a2323","select-inputable-background-color":"#45494a","select-inputable-border":"transparent","tab-selected-background-color":"#4E5254","message-em-color":"#68dd9a","checkbox-background-color":"#43494A","checkbox-border-color":"#6B6B6B","checkbox-text-color":"#bbb","checkbox-selected-background-color":"#43494A","checkbox-selected-border-color":"#6B6B6B","toolbox-list-label-color":"#bbb","toolbox-list-span-color":"#787878","toolbox-border-color":"#323232","toolbox-list-hover-background":"#0D293E","toolbox-border-right-color":"#555555","footer-border-color":"#323232","tab-bar-border-color":"#323232","dialog-border-color":"#282828","dialog-shadow-color":"#151515","table-col-border-color":"#333638","table-row-border-color":"#333638","table-hover-background":"#4B6EAF","debug-line-background":"#2D6099","breakpoints-background":"#C75450","breakpoint-line-background":"#3a2323","table-even-background":"#414547","button-disabled-background":"#5A5A5A","toolbox-list-header-icon-color":"#AFB1B3","log-error-color":"#CC666E","text-string-color":"#6A8759","text-number-color":"#6897BB","text-boolean-color":"#CC7832","text-property-color":"#9876aa","text-key-color":"#9876aa","suggest-hover-background":"#113A5C","suggest-hover-color":"#fff","statusbar-em-color":"#68dd9a"}};const Ht={},cn=(e,t)=>{t=t||{};let n=t.editor||{};n.base=n.base||"vs",n.inherit=n.inherit===void 0?!0:n.inherit,n.rules=n.rules||[],n.colors=n.colors||[],qe.defineTheme(e,n),Ht[e]=t.styles||{}};function It(e,t,n,i){if(e&&e.length>0&&n){let a=function(r,l){return r[n].localeCompare(l[n],"zh-CN")},s=[],o=[];e.forEach(r=>{r.folder===!0?(i&&(r[i]=It(r[i],t,n,i)),s.push(r)):o.push(r)}),s.sort(a),o.sort(a),t===!1&&(s.reverse(),o.reverse()),e.splice(0,e.length,...s.concat(o))}return e}function Ca(e){return Array(e).fill(0).map(()=>(Math.random()*16|0).toString(16)).join("")}function vt(e,t){return t=t||2,(Array(t).join(0)+e).slice(-t)}function xt(e){if(typeof e=="number"&&(e.toString().length===13?e=new Date(e):e=new Date(e*1e3)),e instanceof Date){var t=e.getMonth()+1,n=e.getDate(),i=e.getHours(),a=e.getMinutes(),s=e.getSeconds();return e.getFullYear()+"-"+vt(t)+"-"+vt(n)+" "+vt(i)+":"+vt(a)+":"+vt(s)}return""}function ut(e){return e.replace(/:?\/+/g,t=>t.indexOf(":")>-1?t:"/")}function La(e){const t=a=>{if(Array.isArray(a)){let s=a.length,o=100;if(s>o){let r=[];for(let l=0;l<s;l+=o)r.push({name:`[${l}...${Math.min(l+o,s)-1}]`,folder:!0,opened:!1,dataType:"array",type:"Array",children:a.slice(l,Math.min(l+o,s)).map((u,c)=>i(""+(l+c),void 0,JSON.stringify(u),u))});return r}return a.map((r,l)=>i(""+l,void 0,JSON.stringify(r),r))}else return Object.keys(a).map(s=>{const o=a[s];return i(s,void 0,JSON.stringify(o),o)})},n=a=>{try{return JSON.parse(a)}catch{return a}},i=(a,s,o,r)=>{var O;let l=(s||"").startsWith("java.lang"),u,c,f;l?(u=((O=s==null?void 0:s.substring(10))==null?void 0:O.toLowerCase())||typeof r,["integer","double","float","byte","short","long"].indexOf(u)>-1&&(u="number"),u==="class"&&(o=o.substring(1,o.length-1))):(r=r||o&&n(o),!Array.isArray(r)&&typeof r!="object"?(l=!0,u=typeof r):(Array.isArray(r)?(f=`size = ${r.length}`,u="array"):(f=`members = ${r&&Object.keys(r).length}`,u="object"),s=s||(Array.isArray(r)?"Array":typeof r),c=r&&t(r)||[]));let m=r==null&&!l;return m&&(s="null",l=!0,o="null"),{name:a,value:o,data:r,dataType:u,type:s,size:f,isNull:m,folder:!l,opened:!1,children:c}};return e&&e.map(a=>i(a.name,a.type,a.value))||[]}function Na(e){const t=["B","KB","MB"];let n=0;for(;n<t.length&&e>=1024;)e=e/1024,n++;return e=e.toFixed(2),`${e} ${t[n]}`}function Xe(e,t){const n=i=>i.filter(a=>a.folder).forEach(a=>{n(a.children||[]),t(a)});n(e||[])}function _n(e,t){let n=document.createElement("a"),i=window.URL.createObjectURL(e);n.href=i,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(i)}function oi(e){try{var t=document.createElement("textarea");return t.style="position:absolute;left:-99999999px",document.body.appendChild(t),t.innerHTML=e,t.readOnly=!1,t.select(),document.execCommand("copy"),!0}catch{return!1}}function ka(e){let t=0;for(let n=0,i=0,a=e.length;n<a;n++)t=31*t+e.charCodeAt(i++);return t}class Pa{constructor(){this.listeners={},this.statusLog=k([]);try{let t=document.createElement("script");t.src="https://s4.cnzz.com/z_stat.php?id=1280031557&web_id=1280031557",t.setAttribute("async",!0);let n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);const i=this;t.onload=t.onreadystatechange=function(){(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")&&i.report(w.MAGIC_API_VERSION)}}catch{}}$on(t,n){this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(n)}$event(t,n){this.$on(`ws_${t}`,n)}$emit(t){const n=this.listeners[t];if(n){const s=[];for(var i=1,a=arguments.length;i<a;i++)s.push(arguments[i]);n.forEach(o=>o.apply(this,s))}}report(t){try{window._czc.push(["_trackEvent",t,t])}catch{}}send(t,n){this.$emit("message",t,n)}status(t,n){const i=new Date;n===!1&&(t=`<font color="red">${t}</font>`),this.statusLog.value.push({content:t,timestamp:xt(i)+"."+vt(i.getMilliseconds(),3)}),this.$emit("status",t)}clearStatusLog(){this.statusLog.value=[]}getStatusLog(){return this.statusLog}}var g=new Pa;const pn={escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,builtinFunctions:[],digits:/[0-9_]+/,binarydigits:/[0-1_]+/,hexdigits:/[[0-9a-fA-F_]+/,regexpctl:/[(){}\[\]\$\^|\-*+?\.]/,regexpesc:/\\(?:[bBdDfnrstvwWn0\\\/]|@regexpctl|c[A-Z]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4})/,tokenizer:{root:[[/\s+/,"white"],[/```$/,{token:"string",next:"@codeblock"}],[/[a-zA-Z_$][\w$]*[\s]?/,{cases:{"@builtinFunctions":"predefined","~(new|var|if|else|for|in|return|import|break|continue|as|null|true|false|try|catch|finally|async|while|exit|asc|desc|ASC|DESC|assert|let|const|throw)[\\s]?":{token:"keywords"},"~(select|from|left|join|on|and|or|order|by|where|group|having|limit|offset|SELECT|FROM|LEFT|JOIN|ON|AND|OR|ORDER|BY|WHERE|GROUP|HAVING|LIMIT|OFFSET)[\\s]{1}":{token:"keywords"},"@default":"identifier"}}],[/::[a-zA-Z]+/,"keywords"],[/[{}()[\]]/,"@brackets"],[/(@digits)\.(@digits)/,"number.float"],[/0[xX](@hexdigits)n?/,"number.hex"],[/0[bB](@binarydigits)n?/,"number.binary"],[/(@digits)[lLbBsSdDfFmM]?/,"number"],[/\/\*\**/,"comment","@comment"],[/\/\//,"comment","@commentTodo"],[/\/(?=([^\\\/]|\\.)+\/([gimsuy]*)(\s*)(\.|;|,|\)|\]|\}|$))/,{token:"regexp",bracket:"@open",next:"@regexp"}],[/[;,.]/,"delimiter"],[/"""/,{token:"string",next:"@string_multi_embedded",nextEmbedded:"mybatis"}],[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string_double"],[/'/,"string","@string_single"],[/`/,"string","@string_backtick"]],comment:[[/\*\//,"comment","@popall"],[/\S((TODO)|(todo)|(fixme)|(FIXME))\s+/,"comment"],[/((TODO)|(todo)|(fixme)|(FIXME))\s+[^(*/)]+/,"comment.todo"],[/\S/,"comment"]],commentTodo:[[/^/,"","@popall"],[/\S((TODO)|(todo)|(fixme)|(FIXME))\s+/,"comment"],[/((TODO)|(todo)|(fixme)|(FIXME))[ \t]+[^\n]+/,"comment.todo","@popall"],[/\S/,"comment"]],regexp:[[/(\{)(\d+(?:,\d*)?)(\})/,["regexp.escape.control","regexp.escape.control","regexp.escape.control"]],[/(\[)(\^?)(?=(?:[^\]\\\/]|\\.)+)/,["regexp.escape.control",{token:"regexp.escape.control",next:"@regexrange"}]],[/(\()(\?:|\?=|\?!)/,["regexp.escape.control","regexp.escape.control"]],[/[()]/,"regexp.escape.control"],[/@regexpctl/,"regexp.escape.control"],[/[^\\\/]/,"regexp"],[/@regexpesc/,"regexp.escape"],[/\\\./,"regexp.invalid"],[/(\/)([gimsuy]*)/,[{token:"regexp",bracket:"@close",next:"@pop"},"keyword.other"]]],codeblock:[[/^```$/,{token:"string",next:"@pop"}],[/.*$/,"variable.source"]],regexrange:[[/-/,"regexp.escape.control"],[/\^/,"regexp.invalid"],[/@regexpesc/,"regexp.escape"],[/[^\]]/,"regexp"],[/\]/,{token:"regexp.escape.control",next:"@pop",bracket:"@close"}]],string_multi_embedded:[[/[^"]+/,""],['"""',{token:"string",next:"@pop",nextEmbedded:"@pop"}]],string_double:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],string_single:[[/[^\\']+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/'/,"string","@pop"]],string_backtick:[[/\$\{/,{token:"delimiter.bracket",next:"@bracketCounting"}],[/[^\\`$]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/`/,"string","@pop"]],bracketCounting:[[/\{/,"delimiter.bracket","@bracketCounting"],[/\}/,"delimiter.bracket","@pop"],{include:"root"}]}};let ze={},dn={},Ct=[],hn=[],Yt,fn;const wa=e=>e==="int"||e==="java.lang.Integer"?"java.lang.Integer":e==="string"||e==="java.lang.String"?"java.lang.String":e==="double"||e==="java.lang.Double"?"java.lang.Double":e==="float"||e==="java.lang.Float"?"java.lang.Float":e==="byte"||e==="java.lang.Byte"?"java.lang.Byte":e==="short"||e==="java.lang.Short"?"java.lang.Short":e==="long"||e==="java.lang.Long"?"java.lang.Long":e.indexOf("[]")>-1?"[Ljava.lang.Object;":e||"java.lang.Object",mn=e=>{let t=e.lastIndexOf(".");return t>-1?e.substring(t+1):e},Da=(e,t,n)=>e.length>0&&e[e.length-1].varArgs?n?e.length-1<=t.length:e.length<=t.length:n?e.length-1===t.length:e.length===t.length,$a=function(){return new Promise((e,t)=>{Y.sendPost("/classes").success(n=>{ze=n.classes||{},dn=n.extensions||{},hn=n.functions||[],pn.builtinFunctions=hn.map(i=>i.name),W.setMonarchTokensProvider("magicscript",pn),e()}).exception(n=>{t()}).error(n=>{t()})})},Ma=()=>new Promise((e,t)=>{Y.execute({url:"classes.txt",responseType:"text",method:"get"}).then(n=>{const i=[];n.data.split(`
`).forEach(a=>{const s=a.split(":");s.length===1?i.push(s[0].trim()):i.push(...s[1].split(",").map(o=>s[0]+"."+o.trim()))}),Ct=i,e()}).catch(n=>{t()})}),ri=(e,t)=>Array(t>(e+"").length?t-(""+e).length-1:0).join(0)+e,li=e=>{let t=[];return e&&(t=e.enums||[],e.superClass&&(t=t.concat(li(e.superClass)))),t},ui=(e,t,n)=>{if(e.insertText=e.name,e.parameters.length>t){let i=[],a=[];for(let s=t;s<e.parameters.length;s++)i.push("${"+(s+1-t)+":"+e.parameters[s].name+"}"),e.parameters[s].varArgs?a.push(mn(e.parameters[s].type).replace("[]","")+" ... "+e.parameters[s].name):a.push(mn(e.parameters[s].type)+" "+e.parameters[s].name);e.sortText=ri(n,10)+e.name,e.fullName=e.name+"("+a.join(", ")+")",e.insertText+="("+i.join(",")+")",e.signature=e.name+a.join(",")}else e.sortText=ri(n,10)+e.name,e.insertText+="()",e.fullName=e.name+"()",e.signature=e.name;return e};let Lt={};const Ua=(e,t)=>{Lt[e]=t},gn=e=>{let t=[];if(e){if(t=e.attributes||[],e.superClass&&(t=t.concat(gn(e.superClass))),e.interfaces&&e.interfaces.length>0)for(let n=0,i=e.interfaces.length;n<i;n++)t=t.concat(gn(e.interfaces[n]));Lt[e.className]&&(typeof Lt[e.className]=="function"?t=t.concat(Lt[e.className]()):t=t.concat(Lt[e.className]))}return t},vn=(e,t)=>{t=t||0;let n=[],i=(a,s,o)=>{if(a&&a.methods)for(let r=0,l=a.methods.length;r<l;r++){let u=a.methods[r];u=ui(u,s,o),u.extension=s===1,n.push(u)}};if(typeof e=="string"&&(e=ze[e]),e){if(i(e,0,t),e.superClass&&(n=n.concat(vn(e.superClass,t+1))),e.interfaces&&e.interfaces.length>0)for(let a=0,s=e.interfaces.length;a<s;a++)n=n.concat(vn(e.interfaces[a],t+100));e=dn[e.className],e&&i(e,1,t+1e4)}return n},Ba=e=>dn[e],Fa=e=>{if(!e)throw new Error("className is required");let t=ze[e];if(!t){let n=Ct.findIndex(i=>i===e);t=Ct[n]}return t};async function ja(e){let t=ze[e];if(t)t=ze[t.className]||t;else try{(await Y.execute({url:"/class",data:{className:e}})).data.data.forEach(a=>{ze[a.className]=a}),t=ze[e]}catch{}return t}const Ga=()=>hn.map(e=>ui(e,0,1)),ci=()=>{if(!Yt&&w.config){let e=w.config;e.autoImportModuleList&&(Yt={},e.autoImportModuleList.forEach(n=>{Yt[n]=n}));let t=["java.util.","java.lang."].concat((e.autoImportPackage||"").replace(/\\s/g,"").replace(/\*/g,"").split(","));fn={},Ct.forEach(n=>{t.forEach(i=>{n.indexOf(i)===0&&n.indexOf(".",i.length)===-1&&(fn[n.substring(n.lastIndexOf(".")+1)]=n)})})}},Va=()=>(ci(),Yt||{}),Ha=()=>(ci(),fn||{}),Ya=()=>Ct;let En;const Ka=e=>{En=e},Wa=e=>En&&En(e),qa=()=>Object.keys(ze).filter(e=>ze[e].module);let _i;const Xa=e=>{_i=e};let pi;const za=e=>{pi=e},Ja=()=>_i,Qa=()=>pi,Q={findEnums:li,findAttributes:gn,findMethods:vn,findFunction:Ga,loadClass:ja,findClass:Fa,initClasses:$a,initImportClass:Ma,getWrapperClass:wa,matchTypes:Da,getAutoImportModule:Va,getAutoImportClass:Ha,getExtension:Ba,getImportClass:Ya,getOnlineFunction:Wa,setupOnlineFunction:Ka,setExtensionAttribute:Ua,getSimpleClass:mn,getDefineModules:qa,setApiFinder:Xa,setFunctionFinder:za,getApiFinder:Ja,getFunctionFinder:Qa};class he extends Error{constructor(t,n){super(t);this.name="ParseException",this.span=n}}class Za{constructor(t,n,i,a,s,o,r){this.source=t,this.start=n,this.end=i,this.lineNumber=a,this.endLineNumber=s,this.startCol=o,this.endCol=r}}class X{constructor(t,n,i){t instanceof X&&n instanceof X?(this.source=t.source,this.start=t.start,this.end=n.end,this.cachedText=this.source.substring(this.start,this.end)):(this.source=t,this.start=n||0,this.end=i||t.length,this.cachedText=t.substring(this.start,this.end))}getText(){return this.cachedText}getSource(){return this.source}getStart(){return this.start}getEnd(){return this.end}toString(){return"Span [text="+this.getText()+", start="+this.start+", end="+this.end+"]"}inPosition(t){return this.start<=t&&this.end>=t}getLine(){if(this.line!=null)return this.line;let t=this.start;for(;t<this.end&&!(t<0);){if(this.source.charAt(t)===`
`){t=t+1;break}t--}t<0&&(t=0);let n=this.end;for(;!(n>this.source.length-1||this.source.charAt(n)===`
`);)n++;let i=0,a=t;for(;a>0&&a<this.end;)this.source.charAt(a)===`
`&&i++,a--;i++,a=t+1;let s=i;for(;a<n;)this.source.charAt(a)===`
`&&s++,a++;let o=this.start-t+1,r=o+this.end-this.start-1;return this.line=new Za(this.source,t,n,i,s,o,r),this.line}}const _={Spread:{literal:"...",error:"..."},Period:{literal:".",error:"."},QuestionPeriod:{literal:"?.",error:"?."},Comma:{literal:",",error:","},Semicolon:{literal:";",error:";"},Colon:{literal:":",error:":"},Plus:{literal:"+",error:"+"},Minus:{literal:"-",error:"-"},Asterisk:{literal:"*",error:"*"},ForwardSlash:{literal:"/",error:"/"},PostSlash:{literal:"\\",error:"\\"},Percentage:{literal:"%",error:"%"},LeftParantheses:{literal:"(",error:"("},RightParantheses:{literal:")",error:")"},LeftBracket:{literal:"[",error:"["},RightBracket:{literal:"]",error:"]"},LeftCurly:{literal:"{",error:"{"},RightCurly:{error:"}"},Less:{literal:"<",error:"<"},Greater:{literal:">",error:">"},LessEqual:{literal:"<=",error:"<="},GreaterEqual:{literal:">=",error:">="},Equal:{literal:"==",error:"=="},NotEqual:{literal:"!=",error:"!="},Assignment:{literal:"=",error:"="},PlusPlus:{literal:"++",error:"++"},MinusMinus:{literal:"--",error:"--"},PlusEqual:{literal:"+=",error:"+="},MinusEqual:{literal:"-=",error:"-="},AsteriskEqual:{literal:"*=",error:"*="},ForwardSlashEqual:{literal:"/=",error:"/="},PercentEqual:{literal:"%=",error:"%="},ColonColon:{literal:"::",error:"::"},EqualEqualEqual:{literal:"===",error:"==="},NotEqualEqual:{literal:"!==",error:"!=="},And:{literal:"&&",error:"&&"},Or:{literal:"||",error:"||"},Xor:{literal:"^",error:"^"},Not:{literal:"!",error:"!"},BitAnd:{literal:"&",error:"&"},BitOr:{literal:"|",error:"|"},BitNot:{literal:"~",error:"~"},LShift:{literal:"<<",error:"<<"},RShift:{literal:">>",error:">>"},RShift2:{literal:">>>",error:">>>"},XorEqual:{literal:"^=",error:"^=",modifiable:!0},BitAndEqual:{literal:"&=",error:"&=",modifiable:!0},BitOrEqual:{literal:"|=",error:"|=",modifiable:!0},LShiftEqual:{literal:"<<=",error:"<<=",modifiable:!0},RShiftEqual:{literal:">>=",error:">>=",modifiable:!0},RShift2Equal:{literal:">>>=",error:">>>=",modifiable:!0},SqlAnd:{literal:"and",error:"and"},SqlOr:{literal:"or",error:"or"},SqlNotEqual:{literal:"<>",error:"<>",inLinq:!0},Questionmark:{literal:"?",error:"?"},DoubleQuote:{literal:'"',error:'"'},TripleQuote:{literal:'"""',error:'"""'},SingleQuote:{literal:"'",error:"'"},Lambda:{error:"=> \u6216 ->"},BooleanLiteral:{error:"true \u6216 false"},DoubleLiteral:{error:"\u4E00\u4E2A double \u7C7B\u578B\u6570\u503C"},DecimalLiteral:{error:"\u4E00\u4E2A BigDecimal \u7C7B\u578B\u6570\u503C"},FloatLiteral:{error:"\u4E00\u4E2A float \u7C7B\u578B\u6570\u503C"},LongLiteral:{error:"\u4E00\u4E2A long \u7C7B\u578B\u6570\u503C"},IntegerLiteral:{error:"\u4E00\u4E2A int \u7C7B\u578B\u6570\u503C"},ShortLiteral:{error:"\u4E00\u4E2A short \u7C7B\u578B\u6570\u503C"},ByteLiteral:{error:"\u4E00\u4E2A byte \u7C7B\u578B\u6570\u636E"},CharacterLiteral:{error:"\u4E00\u4E2A char \u7C7B\u578B\u6570\u636E"},RegexpLiteral:{error:"\u4E00\u4E2A \u6B63\u5219\u8868\u8FBE\u5F0F"},StringLiteral:{error:"\u4E00\u4E2A \u5B57\u7B26\u4E32"},NullLiteral:{error:"null"},Language:{error:"language"},Identifier:{error:"\u6807\u8BC6\u7B26"},Unknown:{error:"unknown"}};let es=Object.getOwnPropertyNames(_).map(e=>_[e]);_.getSortedValues=function(){return this.values?this.values:(this.values=es.sort(function(e,t){return!e.literal&&!t.literal?0:!e.literal&&!!t.literal?1:!!e.literal&&!t.literal?-1:t.literal.length-e.literal.length}),this.values)};class $e{constructor(t,n,i){this.type=t,this.span=n,i instanceof Et?this.tokenStream=i:i&&(this.value=i)}getTokenType(){return this.type}getTokenStream(){return this.tokenStream}getSpan(){return this.span}getText(){return this.span.getText()}}class Ne extends $e{constructor(t,n,i){super(t,n,i)}getJavaType(){return this.type===_.StringLiteral?"java.lang.String":this.type===_.DoubleLiteral?"java.lang.Double":this.type===_.ByteLiteral?"java.lang.Byte":this.type===_.FloatLiteral?"java.lang.Float":this.type===_.DecimalLiteral?"java.math.BigDecimal":this.type===_.IntegerLiteral?"java.lang.Integer":this.type===_.LongLiteral?"java.lang.Long":this.type===_.BooleanLiteral?"java.lang.Boolean":this.type===_.RegexpLiteral?"java.util.regex.Pattern":"java.lang.Object"}}class ts{constructor(t,n,i){this.index=n===void 0?0:n,this.end=i===void 0?t.length:i,this.source=t,this.spanStart=0}hasMore(){return this.index<this.end}consume(){return this.source.charAt(this.index++)}match(t,n){typeof t!="string"&&(t=t.literal);let i=t.length;if(i+this.index>this.end)return!1;for(let a=0,s=this.index;a<i;a++,s++)if(this.index>=this.end||t.charAt(a)!==this.source.charAt(s))return!1;return n&&(this.index+=i),!0}matchAny(t,n){for(let i=0,a=t.length;i<a;i++)if(this.match(t[i],n))return!0;return!1}matchDigit(t){return this.matchAny("0123456789",t)}matchIdentifierStart(t){if(this.index>=this.end)return!1;let n=this.source.charAt(this.index);return n.match(/[a-zA-Z0-9_\u4e00-\u9fa5]/)||n==="$"||n==="_"||n==="@"?(t&&this.index++,!0):!1}matchIdentifierPart(t){if(this.index>=this.end)return!1;let n=this.source.charAt(this.index);return n.match(/[a-zA-Z0-9_\u4e00-\u9fa5]/)||n==="@"?(t&&this.index++,!0):!1}skipWhiteSpace(){for(;this.index<this.end;){let t=this.source.charAt(this.index);if(t===" "||t===`
`||t==="\r"||t==="	")this.index++;else break}}getSpan(t,n){return new X(this.source,t,n)}skipLine(){for(;this.index<this.end&&this.source.charAt(this.index++)!==`
`;);}skipUntil(t){for(;this.index<this.end;){let n=!0;for(let i=0,a=t.length;i<a&&this.index+i<this.end;i++)if(t.charAt(i)!==this.source.charAt(this.index+i)){n=!1;break}if(this.index+=n?t.length:1,n)return!0}return!1}startSpan(){this.spanStart=this.index}endSpan(t,n){return n!==void 0?new X(this.source,t,n):new X(this.source,this.spanStart,this.index+(t||0))}getPosition(){return this.index}reset(t){this.index=t}}class Et{constructor(t){this.tokens=t,this.index=0,this.end=t.length}getEnd(){return this.end>0&&this.tokens[this.end-1]}hasMore(){return this.index<this.end}hasNext(){return this.index+1<this.end}makeIndex(){return this.index}resetIndex(t){this.index=t}getToken(t){let n=this.tokens[this.index];return t&&this.index++,n}consume(){if(!this.hasMore())throw new Error("Reached the end of the source.");return this.tokens[this.index++]}next(){if(!this.hasMore())throw new Error("Reached the end of the source.");return this.tokens[++this.index]}prev(){if(this.index===0)throw new Error("Reached the end of the source.");return this.tokens[--this.index]}getPrev(){if(this.index===0)throw new Error("Reached the end of the source.");return this.tokens[this.index-1]}match(t,n,i){if(this.index>=this.end)return!1;let a=!1;if(Array.isArray(t)){for(let s=0,o=t.length;s<o;s++)if(this.match(t[s],n,i))return!0}else typeof t=="string"?(this.tokens[this.index].getText()===t||i===!0&&this.tokens[this.index].getText().toLowerCase()===t.toLowerCase())&&(a=!0):this.tokens[this.index].type===t&&(a=!0);return a&&n&&this.index++,a}textToString(t){if(typeof t=="string")return t;if(t instanceof $e)return t.getText();if(Array.isArray(t)){let n=[];return t.forEach(i=>n.push(this.textToString(i))),n.join(",")}else return t.error}expect(t,n){if(this.match(t,!0,n))return this.tokens[this.index-1];if(this.hasMore()){let i=this.tokens[this.index];throw t instanceof $e&&(t=t.type.error),new he("Expected '"+this.textToString(t)+"', but got '"+i.getText()+"'",i.getSpan())}else{let i=this.tokens[this.index-1].getSpan();return new $e(_.Unknown,i)}}hasPrev(){return this.index>0}getSource(){return this.tokens.length===0?null:this.tokens[0].getSpan().getSource()}}const ns=(e,t)=>{if(t.length>0){let n=t[t.length-1];if(n instanceof Ne)return!1;switch(n.getTokenType()){case _.Comma:case _.Semicolon:case _.Colon:case _.RightCurly:case _.LeftBracket:case _.LeftParantheses:case _.Assignment:case _.NotEqual:case _.EqualEqualEqual:case _.NotEqualEqual:case _.Equal:case _.And:case _.Or:case _.SqlAnd:case _.SqlOr:case _.SqlNotEqual:case _.Questionmark:case _.Lambda:break;default:return!1}}if(e.match("/",!1)){let n=e.getPosition();e.consume(),e.startSpan();let i=!1,a=0,s=0,o=0;for(;e.hasMore();){if(e.match("\\",!0)){e.consume();continue}if(e.match("[",!1))a++,s=e.getPosition();else if(a>0&&e.match("]",!1))a--;else if(e.match(_.ForwardSlash.literal,!0))if(a===0){e.match("g",!0),e.match("i",!0),e.match("m",!0),e.match("s",!0),e.match("u",!0),e.match("y",!0),i=!0;break}else o=e.getPosition();let l=e.consume();if(l==="\r"||l===`
`)return e.reset(n),!1}if(a!==0)throw new he("Missing ']'",e.getSpan(s,o-1));if(!i)return e.reset(n),!1;let r=e.endSpan();return r=e.getSpan(r.getStart()-1,r.getEnd()),t.push(new Ne(_.RegexpLiteral,r)),!0}return!1},Tn=(e,t,n)=>{if(e.match(t,!0)){e.startSpan();let i=!1;for(;e.hasMore();){if(e.match("\\",!0)){e.consume();continue}if(e.match(t.literal,!0)){i=!0;break}let s=e.consume();if(t!==_.TripleQuote&&(s==="\r"||s===`
`))throw new he(t.error+t.error+"\u5B9A\u4E49\u7684\u5B57\u7B26\u4E32\u4E0D\u80FD\u6362\u884C",e.endSpan())}if(!i)throw new he("\u5B57\u7B26\u4E32\u6CA1\u6709\u7ED3\u675F\u7B26"+t.error,e.endSpan());let a=e.endSpan();return a=e.getSpan(a.getStart(),a.getEnd()-t.literal.length),n.push(new Ne(_.StringLiteral,a)),!0}return!1},di=(e,t)=>{let n=Number.parseInt(e.getText().substring(2).replace(/\_/g,""),t);return n>2147483647||n<-2147483648?new Ne(_.LongLiteral,e,n):n>127||n<-128?new Ne(_.LongLiteral,e,n):new Ne(_.ByteLiteral,e,n)},is=(e,t)=>{if(e.match("0",!1)){let n=e.getPosition();if(e.startSpan(),e.consume(),e.matchAny(["x","X"],!0)){for(;e.matchDigit(!0)||e.matchAny(["A","B","C","D","E","F","a","b","c","d","e","f","_"],!0););if(e.matchAny(["L","l"],!0)){let i=e.endSpan(),a=i.getText();return t.push(new Ne(_.LongLiteral,i,parseInt(a.substring(2,a.length-1).replace(/\_/g,""),16))),!0}return t.push(di(e.endSpan(),16)),!0}else if(e.matchAny(["b","B"],!0)){for(;e.matchAny(["0","1","_"],!0););if(e.matchAny(["L","l"],!0)){let i=e.endSpan(),a=i.getText();return t.push(new Ne(_.LongLiteral,i,parseInt(a.substring(2,a.length-1).replace(/\_/g,""),2))),!0}return t.push(di(e.endSpan(),2)),!0}e.reset(n)}if(e.matchDigit(!1)){let n=_.IntegerLiteral;for(e.startSpan();e.matchDigit(!0)||e.match("_",!0););if(e.match(_.Period.literal,!0))if(e.hasMore())for(n=_.DoubleLiteral;e.matchDigit(!0)||e.match("_",!0););else e.reset(e.getPosition()-1);if(e.matchAny(["b","B"],!0)){if(n===_.DoubleLiteral)throw new he("Byte literal can not have a decimal point.",e.endSpan());n=_.ByteLiteral}else if(e.matchAny(["s","S"],!0)){if(n===_.DoubleLiteral)throw new he("Short literal can not have a decimal point.",e.endSpan());n=_.ShortLiteral}else if(e.matchAny(["l","L"],!0)){if(n===_.DoubleLiteral)throw new he("Long literal can not have a decimal point.",e.endSpan());n=_.LongLiteral}else e.matchAny(["f","F"],!0)?n=_.FloatLiteral:e.matchAny(["d","D"],!0)?n=_.DoubleLiteral:e.matchAny(["m","M"],!0)&&(n=_.DecimalLiteral);return t.push(new Ne(n,e.endSpan())),!0}return!1},as=(e,t)=>{if(e.match("```",!0))if(e.startSpan(),e.matchIdentifierStart(!0)){for(;e.matchIdentifierPart(!0););let n=e.endSpan();if(t.push(new $e(_.Language,n)),e.startSpan(),!e.skipUntil("```"))throw new he("```\u9700\u8981\u4EE5```\u7ED3\u5C3E",e.endSpan());return t.push(new $e(_.Language,e.endSpan(-3))),!0}else throw new he("```\u540E\u9700\u8981\u6807\u8BC6\u8BED\u8A00\u7C7B\u578B",e.endSpan());return!1},ss=(e,t)=>{if(e.matchIdentifierStart(!0)){for(e.startSpan();e.matchIdentifierPart(!0););let n=e.endSpan();return n=e.getSpan(n.getStart()-1,n.getEnd()),n.getText()==="true"||n.getText()==="false"?t.push(new Ne(_.BooleanLiteral,n)):n.getText()==="null"?t.push(new Ne(_.NullLiteral,n)):_.SqlAnd.literal===n.getText()?t.push(new $e(_.SqlAnd,n)):_.SqlOr.literal===n.getText()?t.push(new $e(_.SqlOr,n)):t.push(new $e(_.Identifier,n)),!0}return!1},os=(e,t)=>{if(e.match("`",!0)){let n=e.getPosition(),i=n,a=[];for(;e.hasMore();){if(e.match("\\",!0)){e.consume();continue}if(e.match("`",!0))break;if(e.match("${",!0)){let r=e.getPosition();i<r-2&&a.push(new Ne(_.StringLiteral,e.endSpan(i,r-2))),a.push(...hi(e,[],"}")),i=e.getPosition();continue}e.consume()}let s=e.endSpan(n,e.getPosition()),o=e.getPosition()-1;return o-i>0&&a.push(new Ne(_.StringLiteral,e.endSpan(i,o))),s=e.getSpan(s.getStart()-1,s.getEnd()),t.push(new Ne(_.StringLiteral,s,new Et(a))),!0}return!1},hi=(e,t,n)=>{let i=0,a=0;for(;e.hasMore();){if(e.skipWhiteSpace(),n&&e.match(n,!0))return t;if(e.match("//",!0)){e.skipLine();continue}if(e.match("/*",!0)){e.skipUntil("*/");continue}if(is(e,t)||Tn(e,_.SingleQuote,t)||Tn(e,_.TripleQuote,t)||Tn(e,_.DoubleQuote,t)||ns(e,t)||as(e,t)||os(e,t)||ss(e,t))continue;if(e.matchAny(["=>","->"],!0)){t.push(new $e(_.Lambda,e.getSpan(e.getPosition()-2,e.getPosition())));continue}let s=!1,o=_.getSortedValues();for(let r=0,l=o.length;r<l;r++){let u=o[r];if(u.literal!=null&&e.match(u.literal,!0)){u===_.LeftCurly&&i++,t.push(new $e(u,e.getSpan(e.getPosition()-u.literal.length,e.getPosition()))),s=!0;break}}if(!s){if(i!==a&&e.match("}",!0)){a++,t.push(new $e(_.RightCurly,e.getSpan(e.getPosition()-1,e.getPosition())));continue}if(e.hasMore())throw new he("Unknown token",e.getSpan(e.getPosition(),e.getPosition()+1))}}return t};var Kt=e=>hi(new ts(e,0,e.length),[]);class re{constructor(t){this.span=t}getSpan(){return this.span}async getJavaType(t){return await this.getExpressionsJavaType(t),"java.lang.Object"}async getExpressionsJavaType(t){for(const n of this.expressions().filter(i=>i))await n.getJavaType(t)}expressions(){return[]}toString(){return this.span.getText()}}class Tt extends re{constructor(t){super(t)}}class Oe extends Tt{constructor(t,n,i){super(t);this.javaType=n,this.expressionList=i||[]}expressions(){return this.expressionList}async getJavaType(){return this.javaType}getValue(){return this.getSpan().getText().replace(/\\\\/g,"\\").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\"/g,'"').replace(/\\'/g,"'")}}class Wt extends re{constructor(t,n,i){super(t);this.target=n,this.args=i}expressions(){return[this.target,...this.args]}getMethod(){return this.target}getArguments(){return this.args}async getJavaType(t){let n=this.target.member.getText(),i=await this.target.getJavaType(t),a=Q.findMethods(i);if(a)for(let s=0,o=a.length;s<o;s++){let r=a[s];if(r.name===n&&Q.matchTypes(r.parameters,this.args,r.extension))return r.origin?i:Q.getWrapperClass(r.returnType)}return"java.lang.Object"}}class bn extends re{constructor(t,n,i){super(t);this.target=n,this.args=i}expressions(){return[this.target,...this.args]}getFunction(){return this.target}getArguments(){return this.args}async getJavaType(t){if(this.target instanceof He){const n=Q.findFunction().find(i=>i.name===this.target.variable);if(n)return n.returnType}return await this.target.getJavaType(t)}}class ct extends re{constructor(t,n,i,a,s){super(t);this.target=n,this.optional=i,this.member=a,this.whole=s}isWhole(){return this.whole===!0}expressions(){return[this.target]}getTarget(){return this.target}async getJavaType(t){let n=await this.target.getJavaType(t),i=await Q.loadClass(n),a=i==null?void 0:i.attributes;const s=this.member.getText();if(a){const l=a.find(u=>u.name===s);if(l)return Q.getWrapperClass(l.type)}let o=i==null?void 0:i.enums;if(o){const l=o.find(u=>u.name===s);if(l)return Q.getWrapperClass(l.type)}let r=i==null?void 0:i.methods;if(r)for(let l=0,u=r.length;l<u;l++){let c=r[l];if(i.superClass==="java.util.HashMap"&&c.name==="get"&&c.parameters.length===1)return Q.getWrapperClass(c.returnType)}return n||"java.lang.Object"}}class He extends re{constructor(t,n){super(t);this.variable=n}getVariable(){return this.variable}async getJavaType(t){let n=t&&t[this.variable];if(!n){let i=t["@import"];for(let a=i.length-1;a>=0&&!n;a--)n=Q.findClass(i[a]+this.variable)}return n||"java.lang.Object"}}class qt extends re{constructor(t,n,i){super(t);this.target=n,this.keyOrIndex=i}async getJavaType(t){return await this.target.getJavaType(t)==="db"?"db":super.getJavaType(t)}}class fi extends re{constructor(t,n,i,a,s){super(t);this.condition=n,this.trueBlock=i||[],this.elseIfs=a||[],this.falseBlock=s||[]}expressions(){return[this.condition,...this.trueBlock,...this.elseIfs,...this.falseBlock]}}class mi extends Oe{constructor(t){super(t)}}class Sn extends re{constructor(t,n,i){super(t);this.parameters=n,this.childNodes=i}expressions(){return[...this.childNodes]}async getJavaType(t){if(Array.isArray(this.childNodes)&&this.childNodes.length>0){for(let n=0,i=this.childNodes.length;n<i;n++){let a=this.childNodes[n];if(a instanceof Nt)return await a.getJavaType(t)}return await this.childNodes[this.childNodes.length-1].getJavaType(t)}return await super.getJavaType(t)}}class Nt extends re{constructor(t,n){super(t);this.returnValue=n}expressions(){return[this.returnValue]}async getJavaType(t){return this.returnValue==null?"":await this.returnValue.getJavaType(t)}}class rs extends re{constructor(t){super(t)}}class ls extends re{constructor(t){super(t)}}class us extends re{constructor(t,n){super(t);this.values=n}expressions(){return this.values}}class cs extends re{constructor(t,n){super(t);this.value=n}expressions(){return[this.value]}}class _s extends re{constructor(t,n,i){super(t);this.condition=n,this.values=i}expressions(){return[this.condition,...this.values]}}class kt extends re{constructor(t,n,i){super(t);this.identifier=n,this.parameters=i}expressions(){return[...this.parameters]}async getJavaType(t){let n=t[this.identifier];if(!n){let i=t["@import"];for(let a=i.length-1;a>=0&&!n;a--)n=Q.findClass(i[a]+this.identifier)}return n||"java.lang.Object"}}class ps extends re{constructor(t,n){super(t);this.expression=n}expressions(){return[this.expression]}async getJavaType(t){return"java.util.concurrent.Future"}}class yn extends re{constructor(t,n,i){super(new X(t.getSpan(),n.getSpan()));this.operand=n,this.operator=t,this.atAfter=i}async getJavaType(t){return await this.operand.getJavaType(t)}}class ds extends re{constructor(t,n,i,a,s){super(t);this.exceptionVarNode=n,this.tryBlock=i,this.catchBlock=a,this.finallyBlock=s}expressions(){return[...this.tryBlock,...this.catchBlock,...this.finallyBlock]}}class hs extends re{constructor(t,n,i,a,s){super(t);this.indexOrKey=n,this.value=i,this.mapOrArray=a,this.body=s}expressions(){return[this.mapOrArray,...this.body]}}class fs extends re{constructor(t,n,i){super(t);this.condition=n,this.trueBlock=i}expressions(){return[this.condition,...this.trueBlock]}}class ms extends re{constructor(t,n,i,a){super(t);this.packageName=n,this.varName=i,this.module=a}async getJavaType(t){if(this.packageName.endsWith(".*"))t["@import"].push(this.packageName.substring(0,this.packageName.length-1));else if(this.module)t[this.packageName]=this.packageName;else if(this.varName)t[this.varName]=this.packageName;else{let n=this.packageName.lastIndexOf(".");n>-1&&(t[this.packageName.substring(n+1)]=this.packageName)}}}class On extends re{constructor(t,n,i,a){super(t);this.varName=n,this.expression=i,this.defineType=a!=="var"&&a!=="const"&&a!=="let"&&a}getVarName(){return this.varName}expressions(){return this.expression==null?[]:[this.expression]}async getJavaType(t){let n="java.lang.Object";return this.defineType?n=t[this.defineType]||n:this.expression&&(n=await this.expression.getJavaType(t)),t[this.varName]=n,n}}class gi extends re{constructor(t,n,i){super(new X(t.getSpan(),i.getSpan()));this.condition=t,this.trueExpression=n,this.falseExpression=i}expressions(){return[this.condition,this.trueExpression,this.falseExpression]}}class gs extends re{constructor(t,n){super(t);this.target=n}expressions(){return[this.target]}}class bt extends Oe{constructor(t,n,i){super(t,"java.util.LinkedHashMap");this.keys=n,this.values=i}expressions(){return this.values}}class St extends Oe{constructor(t,n){super(t,"java.util.ArrayList");this.values=n}expressions(){return this.values}}class vs extends re{constructor(t){super(t)}async getJavaType(){return"java.util.function.Function"}expressions(){return[]}}class vi extends re{constructor(t,n,i,a){super(new X(t.getSpan(),i.getSpan()));this.left=t,this.right=i,this.operator=n,this.linqLevel=a}getOperator(){return this.operator}setRightOperand(t){this.right=t}getRightOperand(){return this.right}expressions(){return[this.left,this.right]}async getJavaType(t){let n=await this.left.getJavaType(t),i=await this.right.getJavaType(t);return n=n.toLowerCase().substring(n.lastIndexOf(".")+1),i=i.toLowerCase().substring(i.lastIndexOf(".")+1),(this.operator.type===_.Plus||this.operator.type===_.PlusEqual)&&(n==="string"||i==="string")?"java.lang.String":this.operator.type===_.Equal||this.operator.type===_.Assignment&&this.linqLevel>0?"java.lang.Boolean":n==="bigdecimal"||i==="bigdecimal"?"java.math.BigDecimal":n==="double"||i==="double"?"java.lang.Double":n==="float"||i==="float"?"java.lang.Float":n==="long"||i==="long"?"java.lang.Long":n==="integer"||i==="integer"?"java.lang.Integer":n==="short"||i==="short"?"java.lang.Short":n==="byte"||i==="byte"?"java.lang.Byte":"java.lang.Object"}}class Pt extends Tt{constructor(t,n,i){super(t);this.expression=n,this.alias=i}expressions(){return[this.expression]}}class Es extends Tt{constructor(t,n,i,a){super(t);this.leftJoin=n,this.target=i,this.condition=a}expressions(){return[this.target,this.condition]}}class Ts extends Tt{constructor(t,n,i,a){super(t);this.expression=n,this.alias=i,this.order=a}expressions(){return[this.expression]}}class Ei extends Tt{constructor(t,n,i,a){super(t);this.convert=n,this.target=i,this.args=a}expressions(){return[this.target,...this.args]}async getJavaType(){return this.convert=="double"?"java.lang.Double":this.convert=="float"?"java.lang.Float":this.convert=="long"?"java.lang.Long":this.convert=="int"?"java.lang.Integer":this.convert=="short"?"java.lang.Short":this.convert=="byte"?"java.lang.Byte":this.convert=="date"?"java.util.Date":"java.lang.Object"}}class Ti extends Tt{constructor(t,n,i,a,s,o,r,l,u,c){super(t);this.fields=n,this.from=i,this.joins=a,this.where=s,this.groups=o,this.having=r,this.orders=l,this.limit=u,this.offset=c}expressions(){let t=[];return this.where&&t.push(this.where),this.having&&t.push(this.having),[...this.fields,this.from,...this.joins,...this.groups,...t,...this.orders,this.limit,this.offset]}async getJavaType(){return"java.util.List"}}const Xt={environmentFunction:()=>{},setEnvironment:e=>Xt.environmentFunction=e},bs=["import","as","var","let","const","return","break","continue","if","for","in","new","true","false","null","else","try","catch","finally","async","while","exit","and","or","throw"],bi=["from","join","left","group","by","as","having","and","or","in","where","on","limit","offset"],Ss=[[_.Assignment],[_.RShift2Equal,_.RShiftEqual,_.LShiftEqual,_.XorEqual,_.BitOrEqual,_.BitAndEqual,_.PercentEqual,_.ForwardSlashEqual,_.AsteriskEqual,_.MinusEqual,_.PlusEqual],[_.Or,_.SqlOr],[_.And,_.SqlAnd],[_.BitOr],[_.Xor],[_.BitAnd],[_.EqualEqualEqual,_.Equal,_.NotEqualEqual,_.NotEqual,_.SqlNotEqual],[_.Less,_.LessEqual,_.Greater,_.GreaterEqual],[_.Plus,_.Minus],[_.LShift,_.RShift,_.RShift2],[_.Asterisk,_.ForwardSlash,_.Percentage]],ys=[[_.RShift2Equal,_.RShiftEqual,_.LShiftEqual,_.XorEqual,_.BitOrEqual,_.BitAndEqual,_.PercentEqual,_.ForwardSlashEqual,_.AsteriskEqual,_.MinusEqual,_.PlusEqual],[_.Or,_.SqlOr],[_.And,_.SqlAnd],[_.BitOr],[_.Xor],[_.BitAnd],[_.Assignment,_.EqualEqualEqual,_.Equal,_.NotEqualEqual,_.Equal,_.NotEqual,_.SqlNotEqual],[_.Less,_.LessEqual,_.Greater,_.GreaterEqual],[_.Plus,_.Minus],[_.LShift,_.RShift,_.RShift2],[_.Asterisk,_.ForwardSlash,_.Percentage]],Os=[_.MinusMinus,_.PlusPlus,_.BitNot,_.Minus,_.Plus,_.Not];class zt{constructor(t){this.stream=t,this.linqLevel=0}parse(t){let n=[];try{for(;this.stream.hasMore();){let i=this.parseStatement();i!=null&&(this.validateNode(i),n.push(i))}}catch(i){if(t!==!0)throw i}return n}async parseBest(t){let n=this.parse(),i=await this.processEnv(n);return{best:this.findBestMatch(n[n.length-1],t),env:i}}async processEnv(t){let n=t.length,i=Ve(ce(ce(ce({},Xt.environmentFunction()),Q.getAutoImportClass()),Q.getAutoImportModule()),{"@import":[]});for(let a=0;a<n;a++)await t[a].getJavaType(i);return i}validateNode(t){if(t instanceof Oe)throw new he("literal cannot be used alone",t.getSpan())}parseStatement(t){let n=null;if(this.stream.match("import",!1))n=this.parseImport();else if(this.stream.match(["var","let","const"],!1))n=this.parseVarDefine();else if(this.stream.match("if",!1))n=this.parseIfStatement();else if(this.stream.match("return",!1))n=this.parseReturn();else if(this.stream.match("for",!1))n=this.parseForStatement();else if(this.stream.match("while",!1))n=this.parseWhileStatement();else if(this.stream.match("continue",!1))n=new rs(this.stream.consume().getSpan());else if(this.stream.match("async",!1))n=this.parseAsync();else if(this.stream.match("try",!1))n=this.parseTryStatement();else if(this.stream.match("break",!1))n=new ls(this.stream.consume().getSpan());else if(this.stream.match("exit",!1))n=this.parseExit();else if(this.stream.match("throw",!1))n=this.parseThrow();else if(this.stream.match("assert",!1))n=this.parseAssert();else{let i=this.stream.makeIndex();this.stream.match(_.Identifier,!0)&&this.stream.match(_.Identifier,!1)&&(this.stream.resetIndex(i),n=this.parseVarDefine()),n==null&&(this.stream.resetIndex(i),n=this.parseExpression(t))}for(;this.stream.match(";",!0););return n}checkKeyword(t){if(bs.indexOf(t.getText())>-1)throw new he("\u53D8\u91CF\u540D\u4E0D\u80FD\u5B9A\u4E49\u4E3A\u5173\u952E\u5B57",t)}parseThrow(){let t=this.stream.consume().getSpan(),n=this.parseExpression();return new cs(new X(t,this.stream.getPrev().getSpan()),n)}parseExit(){let t=this.stream.expect("exit").getSpan(),n=[];do n.push(this.parseExpression());while(this.stream.match(_.Comma,!0));return new us(new X(t,this.stream.getPrev().getSpan()),n)}parseAssert(){let t=this.stream.makeIndex();try{let n=this.stream.expect("assert").getSpan(),i=this.parseExpression();this.stream.expect(_.Colon);let a=[];do a.push(this.parseExpression());while(this.stream.match(_.Comma,!0));return new _s(new X(n,this.stream.getPrev().getSpan()),i,a)}catch{return this.stream.resetIndex(t),this.parseExpression()}}parseImport(){let t=this.stream.expect("import").getSpan();if(this.stream.hasMore()){let n=this.stream.consume(),i=null,a=n.getTokenType()===_.StringLiteral;if(a)i=this.createStringLiteral(n).getValue();else if(n.type===_.Identifier){let o=n.getSpan(),r=null;for(i=o.getText();this.stream.match(_.Period,!0);){if(a=!0,this.stream.match(_.Asterisk,!1)){n=this.stream.consume();break}n=this.stream.expect(_.Identifier)}a&&(r=n.getSpan(),i=new X(o,r).getText())}else throw new he("Expected identifier or string, but got stream is "+n.getTokenType().error,this.stream.getPrev().getSpan());let s=i;if(a)if(this.stream.match("as",!0))n=this.stream.expect(_.Identifier),this.checkKeyword(n.getSpan()),s=n.getSpan().getText();else{let o=i;if(o.startsWith("@"))throw new he("Expected as",this.stream.getPrev().getSpan());{let r=o.lastIndexOf(".");r!=-1&&(o=o.substring(r+1))}s=o}return new ms(new X(t,n.getSpan()),i,s,!a)}throw new he("Expected identifier or string, but got stream is EOF",this.stream.getPrev().getSpan())}parseReturn(){let t=this.stream.expect("return").getSpan();if(this.stream.match(";",!1))return new Nt(t,null);let n=this.parseExpression();return new Nt(new X(t,n.getSpan()),n)}parseAsync(){let t=this.stream.expect("async").getSpan(),n=this.parseExpression();return new ps(new X(t,this.stream.getPrev().getSpan()),n)}parseIfStatement(){let t=this.stream.expect("if").getSpan(),n=this.parseExpression(),i=this.parseFunctionBody(),a=[],s=[];for(;this.stream.hasMore()&&this.stream.match("else",!0);)if(this.stream.hasMore()&&this.stream.match("if",!1)){let r=this.stream.expect("if").getSpan(),l=this.parseExpression(),u=this.parseFunctionBody(),c=new X(r,u.length>0?u[u.length-1].getSpan():r);a.push(new fi(c,l,u,[]))}else{s=s.concat(this.parseFunctionBody());break}let o=this.stream.getPrev().getSpan();return new fi(new X(t,o),n,i,a,s)}parseNewExpression(t){let n=this.parseAccessOrCall(_.Identifier,!0),i=new X(t.getSource(),t.getStart(),this.stream.getPrev().getSpan().getEnd());return n instanceof Wt?this.parseAccessOrCall(new kt(i,n.getMethod(),n.getArguments())):n instanceof bn?this.parseAccessOrCall(new kt(i,n.getFunction(),n.getArguments())):this.parseAccessOrCall(new kt(i,n,[]))}parseArguments(){this.stream.expect(_.LeftParantheses);let t=[];for(;this.stream.hasMore()&&!this.stream.match(_.RightParantheses,!1);)t.push(this.parseExpression()),this.stream.match(_.RightParantheses,!1)||this.stream.expect(_.Comma);return t}parseForStatement(){let t=this.stream.expect("for").getSpan();this.stream.expect("(");let n=null,i=this.stream.expect(_.Identifier).getSpan();this.checkKeyword(i),this.stream.match(_.Comma,!0)&&(n=i,i=this.stream.expect(_.Identifier).getSpan(),this.checkKeyword(i)),this.stream.expect("in");let a=this.parseExpression();this.stream.expect(")");let s=this.parseFunctionBody();return new hs(new X(t,this.stream.getPrev().getSpan()),n&&n.getText(),i&&i.getText(),a,s)}parseVarDefine(){let t=this.stream.consume().getSpan(),n=this.stream.expect(_.Identifier);this.checkKeyword(n.getSpan());let i;return this.stream.match(_.Assignment,!0)?i=new On(new X(t,this.stream.getPrev().getSpan()),n.getText(),this.parseExpression(),t.getText()):i=new On(new X(t,this.stream.getPrev().getSpan()),n.getText(),null,t.getText()),i}parseTryStatement(){let t=this.stream.expect("try"),n=this.parseFunctionBody(),i=[],a=[],s=null;return this.stream.match("catch",!0)&&(this.stream.match("(",!0)&&(s=this.stream.expect(_.Identifier).getText(),this.stream.expect(")")),i=i.concat(this.parseFunctionBody())),this.stream.match("finally",!0)&&(a=a.concat(this.parseFunctionBody())),new ds(new X(t.getSpan(),this.stream.getPrev().getSpan()),s,n,i,a)}parseWhileStatement(){let t=this.stream.expect("while").getSpan(),n=this.parseExpression(),i=this.parseFunctionBody(),a=this.stream.getPrev().getSpan();return new fs(new X(t,a),n,i)}parseFunctionBody(){this.stream.expect("{");let t=[];for(;this.stream.hasMore()&&!this.stream.match("}",!1);){let n=this.parseStatement(!0);n!=null&&(this.validateNode(n),t.push(n))}return this.expectCloseing(),t}expectCloseing(){return!this.stream.hasMore(),this.stream.expect("}").getSpan()}parseExpression(t){return this.parseTernaryOperator(t)}parseTernaryOperator(t){let n=this.parseBinaryOperator(0,t);if(this.stream.match(_.Questionmark,!0)){let i=this.parseTernaryOperator(t);this.stream.expect(_.Colon);let a=this.parseTernaryOperator(t);return n instanceof vi&&n.getOperator()===_.Assignment?(n.setRightOperand(new gi(n.getRightOperand(),i,a)),n):new gi(n,i,a)}else return n}parseBinaryOperator(t,n){let i=t+1,a=this.linqLevel>0?ys:Ss,s=i===a.length?this.parseUnaryOperator(n):this.parseBinaryOperator(i,n),o=a[t];for(;this.stream.hasMore()&&this.stream.match(o,!1);){let r=this.stream.consume();if(r.type.inLinq&&this.linqLevel===0)throw new he(r.getText()+" \u53EA\u80FD\u5728Linq\u4E2D\u4F7F\u7528",this.stream.hasMore()?this.stream.consume().getSpan():this.stream.getPrev().getSpan());let l=i===a.length?this.parseUnaryOperator(n):this.parseBinaryOperator(i,n);s=new vi(s,r,l,this.linqLevel)}return s}parseUnaryOperator(t){if(this.stream.match(Os,!1))return new yn(this.stream.consume(),this.parseUnaryOperator(t));if(this.stream.match(_.LeftParantheses,!1)){let n=this.stream.expect(_.LeftParantheses).getSpan(),i=this.stream.makeIndex(),a=[];for(;this.stream.match(_.Identifier,!1);){let o=this.stream.expect(_.Identifier);if(a.push(o.getSpan().getText()),!this.stream.match(_.Comma,!0)&&this.stream.match(_.RightParantheses,!0)){if(this.stream.match(_.Lambda,!0))return this.parseLambdaBody(n,a);break}}if(this.stream.match(_.RightParantheses,!0)&&this.stream.match(_.Lambda,!0))return this.parseLambdaBody(n,a);this.stream.resetIndex(i);let s=this.parseExpression();return this.stream.expect(_.RightParantheses),this.parseAccessOrCall(s)}else{let n=this.parseAccessOrCallOrLiteral(t);return(n instanceof ct||n instanceof He||n instanceof qt)&&this.stream.match([_.PlusPlus,_.MinusMinus],!1)?new yn(this.stream.consume(),n):n}}parseLambdaBody(t,n){let i=this.stream.makeIndex(),a=[];try{let s=this.parseExpression();return a.push(new Nt(new X("return",0,6),s)),new Sn(new X(t,s.getSpan()),n,a)}catch{if(this.stream.resetIndex(i),this.stream.match(_.LeftCurly,!0)){for(;this.stream.hasMore()&&!this.stream.match("}",!1);){let r=this.parseStatement(!0);this.validateNode(r),a.push(r)}let o=this.expectCloseing();return new Sn(new X(t,o),n,a)}else{let o=this.parseStatement();return a.push(new Nt(new X("return",0,6),o)),new Sn(new X(t,o.getSpan()),n,a)}}}parseSpreadAccess(t){t||(t=this.stream.expect(_.Spread));let n=this.parseExpression();return new gs(new X(t.getSpan(),n.getSpan()),n)}parseAccessOrCall(t,n){if(t===_.StringLiteral||t===_.Identifier){let i=this.stream.expect(t),a=i.getSpan();if(t===_.Identifier&&a.getText()==="new")return this.parseNewExpression(a);if(t===_.Identifier&&this.stream.match(_.Lambda,!0))return this.parseLambdaBody(a,[a.getText()]);let s=t===_.StringLiteral?this.createStringLiteral(i):new He(a,a.getText());return this.parseAccessOrCall(s,n)}else{for(;this.stream.hasMore()&&this.stream.match([_.LeftParantheses,_.LeftBracket,_.Period,_.QuestionPeriod,_.ColonColon],!1);)if(this.stream.match(_.ColonColon,!1)){let i=this.stream.consume().getSpan(),a=[],s=this.stream.expect(_.Identifier),o=s.getSpan();this.stream.match(_.LeftParantheses,!1)&&(a=this.parseArguments(),o=this.stream.expect(_.RightParantheses).getSpan()),t=new Ei(new X(i,o),s.getText(),t,a)}else if(this.stream.match(_.LeftParantheses,!1)){let i=this.parseArguments(),a=this.stream.expect(_.RightParantheses).getSpan();if(t instanceof He||t instanceof qt)t=new bn(new X(t.getSpan(),a),t,i,this.linqLevel>0);else if(t instanceof ct)t=new Wt(new X(t.getSpan(),a),t,i,this.linqLevel>0);else throw new he("Expected a variable, field or method.",this.stream.hasMore()?this.stream.consume().getSpan():this.stream.getPrev().getSpan());if(n)break}else if(this.stream.match(_.LeftBracket,!0)){let i=this.parseExpression(),a=this.stream.expect(_.RightBracket).getSpan();t=new qt(new X(t.getSpan(),a),t,i)}else if(this.stream.match([_.Period,_.QuestionPeriod],!1)){let i=this.stream.consume().getTokenType()===_.QuestionPeriod;if(this.linqLevel>0&&this.stream.match(_.Asterisk,!1))t=new ct(t.getSpan(),i,this.stream.expect(_.Asterisk).getSpan(),!0);else{let a=this.stream.expect([_.Identifier,_.SqlAnd,_.SqlOr]).getSpan();t=new ct(new X(t.getSpan(),a),t,i,a,!1)}}return t}}parseMapLiteral(){let t=this.stream.expect(_.LeftCurly).getSpan(),n=[],i=[];for(;this.stream.hasMore()&&!this.stream.match("}",!1);){let s;if(this.stream.hasPrev()){let o=this.stream.getPrev();if(this.stream.match(_.Spread,!1)&&(o.getTokenType()===_.LeftCurly||o.getTokenType()===_.Comma)){let r=this.stream.expect(_.Spread);n.push(r),i.push(this.parseSpreadAccess(r)),this.stream.match([_.Comma,_.RightCurly],!1)&&this.stream.match(_.Comma,!0);continue}}this.stream.match(_.StringLiteral,!1)?s=this.stream.expect(_.StringLiteral):this.stream.match(_.LeftBracket,!0)?(s=this.parseExpression(),this.stream.expect(_.RightBracket)):s=this.stream.expect(_.Identifier),n.push(s),this.stream.match([_.Comma,_.RightCurly],!1)?(this.stream.match(_.Comma,!0),s instanceof He?i.push(s):s.getTokenType()===_.Identifier?i.push(new He(s.getSpan(),s.getText())):i.push(new Oe(s.getSpan(),"java.lang.String"))):(this.stream.expect(":"),i.push(this.parseExpression()),this.stream.match("}",!1)||this.stream.expect(_.Comma))}let a=this.stream.expect("}").getSpan();return new bt(new X(t,a),n,i)}parseListLiteral(){let t=this.stream.expect(_.LeftBracket).getSpan(),n=[];for(;this.stream.hasMore()&&!this.stream.match(_.RightBracket,!1);)n.push(this.parseExpression()),this.stream.match(_.RightBracket,!1)||this.stream.expect(_.Comma);let i=this.stream.expect(_.RightBracket).getSpan();return new St(new X(t,i),n)}parseSelect(){let t=this.stream.expect("select",!0).getSpan();this.linqLevel++;let n=this.parseLinqFields();this.stream.expect("from",!0);let i=this.parseLinqField(),a=this.parseLinqJoins(),s;this.stream.match("where",!0,!0)&&(s=this.parseExpression());let o=this.parseGroup(),r;this.stream.match("having",!0,!0)&&(r=this.parseExpression());let l=this.parseLinqOrders();this.linqLevel--;let u,c;this.stream.match("limit",!0,!0)&&(u=this.parseExpression(),this.stream.match("offset",!0,!0)&&(c=this.parseExpression()));let f=this.stream.getPrev().getSpan();return new Ti(new X(t,f),n,i,a,s,o,r,l,u,c)}parseGroup(){let t=[];if(this.stream.match("group",!0,!0)){this.stream.expect("by",!0);do{let n=this.parseExpression();t.push(new Pt(n.getSpan(),n,null))}while(this.stream.match(_.Comma,!0))}return t}parseLinqOrders(){let t=[];if(this.stream.match("order",!0,!0)){this.stream.expect("by",!0);do{let n=this.parseExpression(),i=1;this.stream.match(["desc","asc"],!1,!0)&&this.stream.consume().getText()==="desc"&&(i=-1),t.push(new Ts(new X(n.getSpan(),this.stream.getPrev().getSpan()),n,null,i))}while(this.stream.match(_.Comma,!0))}return t}parseLinqField(){let t=this.parseExpression();if(this.stream.match(_.Identifier,!1)&&!this.stream.match(bi,!1,!0)){let n=this.stream.expect(_.Identifier).getSpan();return new Pt(new X(t.getSpan(),n),t,n.getText())}return new Pt(t.getSpan(),t,null)}parseLinqFields(){let t=[];do{let n=this.parseExpression();if(this.stream.match(_.Identifier,!1)&&!this.stream.match(bi,!1,!0)){if(n instanceof mi)throw new he("* \u540E\u8FB9\u4E0D\u80FD\u8DDF\u522B\u540D",this.stream.hasMore()?this.stream.consume().getSpan():this.stream.getPrev().getSpan());if(n instanceof ct&&n.isWhole())throw new he(n.getSpan().getText()+" \u540E\u8FB9\u4E0D\u80FD\u8DDF\u522B\u540D",this.stream.hasMore()?this.stream.consume().getSpan():this.stream.getPrev().getSpan());let i=this.stream.consume().getSpan();t.push(new Pt(new X(n.getSpan(),i),n,i.getText()))}else t.push(new Pt(n.getSpan(),n,null))}while(this.stream.match(_.Comma,!0));if(t.length===0)throw new he("\u81F3\u5C11\u8981\u67E5\u8BE2\u4E00\u4E2A\u5B57\u6BB5",this.stream.hasMore()?this.stream.consume().getSpan():this.stream.getPrev().getSpan());return t}parseLinqJoins(){let t=[];do{let n=this.stream.match("left",!1),i=n?this.stream.consume().getSpan():null;if(this.stream.match("join",!0)){i=n?i:this.stream.getPrev().getSpan();let a=this.parseLinqField();this.stream.expect("on");let s=this.parseExpression();t.push(new Es(new X(i,this.stream.getPrev().getSpan()),n,a,s))}}while(this.stream.match(["left","join"],!1));return t}parseAccessOrCallOrLiteral(t){let n;if(t&&this.stream.match("}",!1))return null;if(this.stream.match(_.Spread,!1))n=this.parseSpreadAccess();else if(this.stream.match(_.Identifier,!1))this.stream.match("async",!1)?n=this.parseAsync():this.stream.match("select",!1,!0)?n=this.parseSelect():n=this.parseAccessOrCall(_.Identifier);else if(this.stream.match(_.LeftCurly,!1))n=this.parseMapLiteral();else if(this.stream.match(_.LeftBracket,!1))n=this.parseListLiteral();else if(this.stream.match(_.StringLiteral,!1))n=this.createStringLiteral(this.stream.expect(_.StringLiteral));else if(this.stream.match(_.BooleanLiteral,!1))n=new Oe(this.stream.expect(_.BooleanLiteral).getSpan(),"java.lang.Boolean");else if(this.stream.match(_.DoubleLiteral,!1))n=new Oe(this.stream.expect(_.DoubleLiteral).getSpan(),"java.lang.Double");else if(this.stream.match(_.FloatLiteral,!1))n=new Oe(this.stream.expect(_.FloatLiteral).getSpan(),"java.lang.Float");else if(this.stream.match(_.ByteLiteral,!1))n=new Oe(this.stream.expect(_.ByteLiteral).getSpan(),"java.lang.Byte");else if(this.stream.match(_.ShortLiteral,!1))n=new Oe(this.stream.expect(_.ShortLiteral).getSpan(),"java.lang.Short");else if(this.stream.match(_.IntegerLiteral,!1))n=new Oe(this.stream.expect(_.IntegerLiteral).getSpan(),"java.lang.Integer");else if(this.stream.match(_.LongLiteral,!1))n=new Oe(this.stream.expect(_.LongLiteral).getSpan(),"java.lang.Long");else if(this.stream.match(_.DecimalLiteral,!1))n=new Oe(this.stream.expect(_.DecimalLiteral).getSpan(),"java.math.BigDecimal");else if(this.stream.match(_.RegexpLiteral,!1)){let i=this.stream.expect(_.RegexpLiteral);n=new Oe(i.getSpan(),"java.util.regex.Pattern")}else this.stream.match(_.NullLiteral,!1)?n=new Oe(this.stream.expect(_.NullLiteral).getSpan(),"null"):this.linqLevel>0&&this.stream.match(_.Asterisk,!1)?n=new mi(this.stream.expect(_.Asterisk).getSpan()):this.stream.match(_.Language,!1)&&(n=new vs(this.stream.consume().getSpan(),this.stream.consume().getSpan()));if(n==null)throw new he("Expected a variable, field, map, array, function or method call, or literal.",this.stream.hasMore()?this.stream.consume().getSpan():this.stream.getPrev().getSpan());return this.parseAccessOrCall(n)}createStringLiteral(t){if(t.getTokenStream()==null)return new Oe(t.getSpan(),"java.lang.String");let n=this.stream;this.stream=t.getTokenStream();let i=[];for(;this.stream.hasMore();)i.push(this.parseExpression());return this.stream=n,new Oe(t.getSpan(),"java.lang.String",i)}findBestMatch(t,n){let i=t.expressions().filter(a=>a);for(let a in i){let s=this.findBestMatch(i[a],n);if(s)return s}return t.getSpan().inPosition(n)?t:null}}const Si=e=>{var n;const t={};return(n=e==null?void 0:e.children)==null||n.forEach(i=>t[i.name]=i),t};function An(e,t){let n=[],i={name:"",value:"",dataType:"",required:!1,validateType:"",expression:"",error:"",description:"",children:[]};if(e instanceof bt)e.keys.forEach((a,s)=>{var u,c,f,m,O;const o=a.span.getText().replace(/['"]/g,"");let r=e.values[s],l=Ve(ce({},i),{description:((u=t[o])==null?void 0:u.description)||"",required:((c=t[o])==null?void 0:c.required)===!0,validateType:((f=t[o])==null?void 0:f.validateType)||"",expression:((m=t[o])==null?void 0:m.expression)||"",error:((O=t[o])==null?void 0:O.error)||"",name:o,value:yi(r)?r.span.getText().trim():"",dataType:Rn(r)});(r instanceof bt||r instanceof St)&&(l.children=An(r,Si(t[o]))),n.push(l)});else if(e instanceof St&&e.values[0]){let a=e.values[0],s=Ve(ce({},i),{value:yi(a)?a.span.getText().trim():"",dataType:Rn(a)});(a instanceof bt||a instanceof St)&&(s.children=An(a,{})),n.push(s)}return n}function yi(e){return!(e instanceof bt||e instanceof St)}function Rn(e){if(e instanceof bt)return"Object";if(e instanceof St)return"Array";e instanceof yn&&(e=e.operand);let t=e.javaType.substring(e.javaType.lastIndexOf(".")+1);return t==="Integer"&&Number(e.span.getText())>2147483647||Number(e.span.getText())<-2147483648?"Long":t==="null"?"Object":t}function Oi(e,t){t=t||{};try{JSON.parse(e);let i=new zt(new Et(Kt(e))).parseExpression();return{name:"",value:"",dataType:Rn(i),required:t.required,validateType:t.validateType||"",expression:t.expression||"",error:t.error||"",description:t.description||"",children:An(i,Si(t))}}catch{}}const Ai=(e,t,n,i)=>{let a=-1,s=Q.getImportClass();if(n!==0&&t&&(a=s.length)>0){t=t.toLowerCase(),Q.getDefineModules().filter(r=>r.toLowerCase().indexOf(t)>-1).forEach(r=>e.push({label:r,filterText:r,kind:W.CompletionItemKind.Module,detail:r,insertText:r,insertTextRules:W.CompletionItemInsertTextRule.InsertAsSnippet}));let o=new Set;for(let r=0;r<a&&e.length<100;r++){let l=s[r],u=l.toLowerCase().indexOf(t);if(u>-1){let c=l.substring(l.lastIndexOf(".")+1);if(u===0){let f=l.substring(t.length),m=f;if(f.startsWith("."))m=t+".",f=t.substring(t.lastIndexOf(".")+1)+".";else{if(f.indexOf(".")===-1){e.push({sortText:`2${c}`,label:c,kind:W.CompletionItemKind.Class,filterText:l,detail:l,insertText:c,insertTextRules:W.CompletionItemInsertTextRule.InsertAsSnippet});continue}let O=f.substring(0,f.indexOf(".")+1);m=t+O,f=t.substring(t.lastIndexOf(".")+1)+O}if(o.has(f))continue;o.add(f),e.push({sortText:`1${f}`,label:f,kind:W.CompletionItemKind.Folder,filterText:l,detail:m.replace(/\.$/,""),insertText:f,insertTextRules:W.CompletionItemInsertTextRule.InsertAsSnippet,command:{id:"editor.action.triggerSuggest"}})}else c.toLowerCase().indexOf(t)>-1&&e.push({sortText:`2${c}`,label:c,kind:W.CompletionItemKind.Class,filterText:c,detail:l,insertText:l,range:new it(i.lineNumber,n+1,i.lineNumber,i.column)})}}}else Q.getDefineModules().forEach(o=>e.push({label:o,filterText:o,kind:W.CompletionItemKind.Module,detail:o,insertText:o,insertTextRules:W.CompletionItemInsertTextRule.InsertAsSnippet}))},As=(e,t,n,i)=>{let a=n.indexOf('"')+1;if(a===0&&(a=n.indexOf("'")+1),a===0){n=n.trim().replace("import","").trim(),Ai(e,n,i+1,t);return}let s=n.substring(i).trim().replace(/['|"]/g,"");if(s.startsWith("@")){if(s.indexOf(" ")>-1)return;let o=Q.getApiFinder();(o&&o()||[]).forEach(r=>{let l="@"+r.method+":"+r.path;e.push({sortText:l,label:l,kind:W.CompletionItemKind.Reference,filterText:l,detail:r.name,insertText:l,range:new it(t.lineNumber,a+1,t.lineNumber,t.column)})}),o=Q.getFunctionFinder(),(o&&o()||[]).forEach(r=>{let l="@"+r.path;e.push({sortText:l,label:l,kind:W.CompletionItemKind.Reference,filterText:l,detail:r.name,insertText:l,range:new it(t.lineNumber,a+1,t.lineNumber,t.column)})});return}Ai(e,s,a,t)},wt=async(e,t,n,i,a)=>{if(n=n||{},i&&i instanceof He&&await i.getJavaType(n)==="java.lang.Object"){let u=Q.getImportClass();const c=i.variable;u.forEach(f=>{let m=f.substring(f.lastIndexOf(".")+1);m.indexOf(c)>-1&&e.push({sortText:`${m}`,label:m,kind:W.CompletionItemKind.Class,filterText:m,detail:f,insertTextRules:W.CompletionItemInsertTextRule.InsertAsSnippet,command:{id:"editor.action.scrollUp1Line"},insertText:m+(a?"()":""),additionalTextEdits:[{forceMoveMarkers:!0,text:`import ${f}\r
`,range:new it(1,0,1,0)}]})})}Q.findFunction().forEach(u=>{e.push({sortText:u.sortText||u.fullName,label:u.fullName,filterText:u.name,kind:W.CompletionItemKind.Method,detail:u.comment,insertText:u.insertText,insertTextRules:W.CompletionItemInsertTextRule.InsertAsSnippet})});let s=e.map(u=>u.detail),o=t.match(/[a-zA-Z_$]+/ig)||[],r=o.length,l=Object.keys(n);l.forEach(u=>{e.push({label:u,filterText:u,kind:W.CompletionItemKind.Variable,detail:n[u],insertText:u,insertTextRules:W.CompletionItemInsertTextRule.InsertAsSnippet})}),r>2&&Array.from(new Set(o)).filter((u,c)=>c+2<r&&s.indexOf(u)===-1&&l.indexOf(u)===-1).map(u=>{e.push({label:u,filterText:u,kind:W.CompletionItemKind.Text,detail:u,insertText:u,insertTextRules:W.CompletionItemInsertTextRule.InsertAsSnippet})})},Ri=async(e,t)=>{let n=await Q.loadClass(e),i=e.lastIndexOf("."),a=i>0?e.substring(i+1):e,s=Q.findEnums(n);if(s)for(let l=0;l<s.length;l++){let u=s[l];t.push({label:u,kind:W.CompletionItemKind.Enum,detail:u+":"+u,insertText:u,sortText:" ~~~"+u})}let o=Q.findAttributes(n);if(o)for(let l=0;l<o.length;l++){let u=o[l];t.push({label:u.name,kind:W.CompletionItemKind.Field,detail:u.comment||u.type+":"+u.name,insertText:u.name,sortText:" ~~"+u.name})}let r=Q.findMethods(n);if(r){let l={};for(let u=0;u<r.length;u++){let c=r[u];if(l[c.signature])continue;l[c.signature]=!0;let f=[];c.comment&&f.push(c.comment);for(let m=c.extension?1:0;m<c.parameters.length;m++){let O=c.parameters[m];f.push(`\`${O.name}\`\uFF1A${O.comment||O.type}`)}f.push(`\u8FD4\u56DE\u7C7B\u578B\uFF1A\`${c.returnType}\``),t.push({sortText:c.sortText||c.fullName,label:c.fullName,kind:W.CompletionItemKind.Method,detail:`${a}.${c.fullName}: ${c.returnType}`,documentation:{value:f.join(`\r
\r
\r
`)},insertText:c.insertText,insertTextRules:W.CompletionItemInsertTextRule.InsertAsSnippet})}}};async function Rs(e,t){try{let n=Kt(t);if(n.length===0){await wt(e,t);return}let a=new zt(new Et(n));const{best:s,env:o}=await a.parseBest(t.length-1);return t.endsWith(".")?await Ri(await s.getJavaType(o),e):s?s instanceof ct||s instanceof Wt?await Ri(await s.target.getJavaType(o),e):s instanceof kt&&s.identifier instanceof He?await wt(e,t,o,s.identifier,!0):await wt(e,t,o,s):await wt(e,t,o),e}catch(n){console.error(n)}}const Is=[["bre","break;","\u8DF3\u51FA\u5FAA\u73AF"],["con","continue;","\u7EE7\u7EED\u5FAA\u73AF"],["imp","import $1","\u5BFC\u5165"],["if",`if (\${1:condition}){\r
	$2\r
}`,"\u5224\u65AD"],["ife",`if (\${1:condition}) {\r
	$2\r
} else { \r
	$3\r
}`,"\u5224\u65AD"],["for",`for (item in \${1:collection}) {\r
	$2\r
}`,"\u5FAA\u73AF\u96C6\u5408"],["exit","exit ${1:code}, ${2:message};","\u9000\u51FA"],["logi","log.info($1);","info\u65E5\u5FD7"],["logd","log.debug($1);","debug\u65E5\u5FD7"],["loge","log.error($1);","error\u65E5\u5FD7"],["ass","assert ${1:condition} : ${2:code}, ${3:message}","\u6821\u9A8C\u53C2\u6570"]],xs={provideCompletionItems:async function(e,t){let n=e.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:t.lineNumber,endColumn:t.column}),i=e.getValueInRange({startLineNumber:t.lineNumber,startColumn:1,endLineNumber:t.lineNumber,endColumn:t.column}),a=e.getWordUntilPosition(t),s={startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:a.startColumn,endColumn:a.endColumn},o=!1,r=Is.map(l=>({label:l[0],kind:W.CompletionItemKind.Struct,detail:l[2]||l[1],insertText:l[1],filterText:l[0],insertTextRules:W.CompletionItemInsertTextRule.InsertAsSnippet,range:s}));return i.length>1&&i.trim().indexOf("import")===0?(As(r,t,i,i.indexOf("import")+6),o=!0):i.endsWith("::")?r=["int","long","date","string","short","byte","float","double","json","stringify","sql"].map(l=>({label:l,detail:`\u8F6C\u6362\u4E3A${l==="stringify"?"json\u5B57\u7B26\u4E32":l==="sql"?"sql\u53C2\u6570\u7C7B\u578B":l}`,insertText:l,kind:W.CompletionItemKind.TypeParameter,insertTextRules:W.CompletionItemInsertTextRule.InsertAsSnippet})):n.length>1?await Rs(r,n):await wt(r,n,ce(ce(ce({},Xt.environmentFunction()),Q.getAutoImportClass()),Q.getAutoImportModule())),{suggestions:r,incomplete:o}},triggerCharacters:[".",":"]};let Ii=function(e,t){for(var n=0,i=0,a=e.length;i<a;){var s=e.charCodeAt(i);if(s===32)n++;else if(s===9)n=n-n%t+t;else break;i++}return i===a?-1:n};class Cs{constructor(t){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=t}insertFirst(t,n,i){if(!(t>16777215||n>16777215)){var a=this._length;this._startIndexes[a]=t,this._endIndexes[a]=n,this._length++,i<1e3&&(this._indentOccurrences[i]=(this._indentOccurrences[i]||0)+1)}}toIndentRanges(t){var n=[];if(this._length<=this._foldingRangesLimit){new Uint32Array(this._length),new Uint32Array(this._length);for(var i=this._length-1,a=0;i>=0;i--,a++)n.push({start:this._startIndexes[i],end:this._endIndexes[i]})}else{for(var s=0,o=this._indentOccurrences.length,i=0;i<this._indentOccurrences.length;i++){var r=this._indentOccurrences[i];if(r){if(r+s>this._foldingRangesLimit){o=i;break}s+=r}}var l=t.getOptions().tabSize;new Uint32Array(this._foldingRangesLimit),new Uint32Array(this._foldingRangesLimit);for(var i=this._length-1,a=0;i>=0;i--){var u=this._startIndexes[i],c=t.getLineContent(u),f=Ii(c,l);(f<o||f===o&&s++<this._foldingRangesLimit)&&(n.push({start:u,end:this._endIndexes[i]}),a++)}}return n}}const Ls={provideFoldingRanges:(e,t)=>{let n=e.getOptions().tabSize,i=new Cs(5e3),a=[],s=e.getLineCount()+1,o=-1,r=-1,l=[];a.push({indent:-1,endAbove:s,line:s});for(let c=e.getLineCount();c>0;c--){let f=e.getLineContent(c);f.startsWith("import")||f.trim().startsWith("import")?o==-1?o=c:r=c:(r>-1&&o>-1&&l.push({start:r,end:o,kind:W.FoldingRangeKind.Imports}),r=-1,o=-1);let m=Ii(f,n),O=a[a.length-1];if(m!==-1){if(O.indent>m){do a.pop(),O=a[a.length-1];while(O.indent>m);var u=O.endAbove-1;u-c>=1&&i.insertFirst(c,u,m)}O.indent===m?O.endAbove=c:a.push({indent:m,endAbove:c,line:c})}}return r>-1&&o>-1&&l.push({start:r,end:o,kind:W.FoldingRangeKind.Imports}),l.concat(i.toIndentRanges(e))}},Ns={signatureHelpRetriggerCharacters:["(",","],signatureHelpTriggerCharacters:["(",","],provideSignatureHelp:async(e,t,n,i)=>{if(i.activeSignatureHelp){let s=i.activeSignatureHelp;return s.activeSignature+=1,s.activeSignature===s.signatures.length&&(s.activeSignature=0),{dispose:function(){},value:s}}let a=e.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:t.lineNumber,endColumn:t.column});try{let s=Kt(a),o=new zt(new Et(s));const{best:r,env:l}=await o.parseBest(a.length-1);if(r&&r instanceof Wt){let u=r.target,c=await u.getTarget().getJavaType(l),f=u.member.getText(),m=Q.findMethods(await Q.loadClass(c)),O=[];if(m.filter(b=>b.name===f).forEach(b=>{let A=[];for(let h=b.extension?1:0;h<b.parameters.length;h++){let d=b.parameters[h];A.push("- "+d.name+"\uFF1A"+(d.comment||d.type))}O.push({label:b.fullName,documentation:{value:b.comment},parameters:[{label:"param1",documentation:{value:A.join(`\r
`)}}]})}),O.length>0)return{dispose:function(){},value:{activeParameter:0,activeSignature:0,signatures:O}}}}catch{}}},In=(e,t,n)=>{n.push({value:`${e}${t.fullName}`}),t.comment&&n.push({value:`${t.comment}`}),t.parameters.forEach((i,a)=>{(a>0||!t.extension)&&n.push({value:`${i.name}\uFF1A${i.comment||i.type}`})}),n.push({value:`\u8FD4\u56DE\u7C7B\u578B\uFF1A\`${t.returnType}\``})},xn=(e,t,n,i)=>{let a=Q.findFunction().filter(s=>s.name===e);if(a.length>0)In("",a[0],n);else{let s=t[e];if(s&&s.indexOf("@")===0){let o=s.substring(1),r=Q.getOnlineFunction(o);if(r){let l=Array.isArray(r.parameter)?r.parameter:JSON.parse(r.parameter||"[]");l.forEach(u=>u.comment=u.description),In("",{fullName:e+" "+r.name,comment:r.description||"",parameters:l,returnType:r.returnType},n)}}else n.push({value:`${i?"\u521B\u5EFA\u5BF9\u8C61":"\u8BBF\u95EE\u53D8\u91CF"}\uFF1A${e}`}),n.push({value:`\u7C7B\u578B\uFF1A${s||"unknow"}`})}},ks={provideHover:async(e,t)=>{var u,c,f;let n=e.getValue(),i=Kt(n),a=new Et(i),s=new zt(a),o=s.parse(!0),l=e.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:t.lineNumber,endColumn:t.column}).length;for(let m=0,O=o.length;m<O;m++){let b=s.findBestMatch(o[m],l);if(b){let A=await s.processEnv(o),h=[],d=b.getSpan().getLine();if(b instanceof On){let S=A[b.getVarName()];h.push({value:`\u5B9A\u4E49\u53D8\u91CF\uFF1A${b.getVarName()}`}),h.push({value:`\u53D8\u91CF\u7C7B\u578B\uFF1A${S}`})}else if(b instanceof Ei)if(b.convert==="json")h.push({value:"\u5F3A\u5236\u8F6C\u6362\u4E3A`JSON`\u7C7B\u578B"});else if(b.convert==="stringify")h.push({value:"\u8F6C\u6362\u4E3A`JSON`\u5B57\u7B26\u4E32"});else if(b.convert==="sql"){let S=b.args||[];h.push({value:`\u7B49\u540C\u4E8E\`new SqlParameterValue(java.sql.Types.${(f=(c=(u=S[0])==null?void 0:u.span)==null?void 0:c.getText())==null?void 0:f.toUpperCase()},${b.target.getSpan().getText()})\``})}else h.push({value:`\u8F6C\u6362\u4E3A\`${b.convert}\``});else if(b instanceof He){let S=A[b.getVariable()];S?(h.push({value:`\u8BBF\u95EE\u53D8\u91CF\uFF1A${b.getVariable()}`}),h.push({value:`\u53D8\u91CF\u7C7B\u578B\uFF1A${S||"unknow"}`})):xn(b.getVariable(),A,h)}else if(b instanceof ct){let S=await b.getTarget().getJavaType(A),I=await Q.loadClass(S),y=b.member.getText();Q.findMethods(I).filter(R=>R.name===y).forEach(R=>In(`${Q.getSimpleClass(S)}.`,R,h)),Q.findEnums(I).filter(R=>R===y).forEach(R=>{h.push({value:`\u8BBF\u95EE\u679A\u4E3E\uFF1A\`${S}.${y}\``})}),Q.findAttributes(I).filter(R=>R.name===y).forEach(R=>{h.push({value:`\u8BBF\u95EE\u5C5E\u6027\uFF1A\`${S}.${y}\``}),R.comment&&h.push({value:`${R.comment}`}),h.push({value:`\u5C5E\u6027\u7C7B\u578B\uFF1A\`${R.type}\``})}),d=b.member.getLine()}else if(b instanceof bn){let S=b.target;xn(S.variable,A,h)}else if(b instanceof kt){let S=b.identifier;S instanceof He&&xn(S,A,h,!0)}else if(b instanceof qt)h.push({value:"\u8BBF\u95EEMap\u6216\u6570\u7EC4"});else if(b instanceof Ti)h.push({value:"linq\u67E5\u8BE2"});else return;return{range:new it(d.lineNumber,d.startCol,d.endLineNumber,d.endCol+1),contents:h}}}}},Ps=()=>{const e="mybatis";W.register({id:e}),W.setLanguageConfiguration(e,{comments:{lineComment:"--",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]}),W.setMonarchTokensProvider(e,{defaultToken:"",tokenPostfix:".sql",ignoreCase:!0,brackets:[{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"}],keywords:["ABORT_AFTER_WAIT","ABSENT","ABSOLUTE","ACCENT_SENSITIVITY","ACTION","ACTIVATION","ACTIVE","ADD","ADDRESS","ADMIN","AES","AES_128","AES_192","AES_256","AFFINITY","AFTER","AGGREGATE","ALGORITHM","ALL_CONSTRAINTS","ALL_ERRORMSGS","ALL_INDEXES","ALL_LEVELS","ALL_SPARSE_COLUMNS","ALLOW_CONNECTIONS","ALLOW_MULTIPLE_EVENT_LOSS","ALLOW_PAGE_LOCKS","ALLOW_ROW_LOCKS","ALLOW_SINGLE_EVENT_LOSS","ALLOW_SNAPSHOT_ISOLATION","ALLOWED","ALTER","ANONYMOUS","ANSI_DEFAULTS","ANSI_NULL_DEFAULT","ANSI_NULL_DFLT_OFF","ANSI_NULL_DFLT_ON","ANSI_NULLS","ANSI_PADDING","ANSI_WARNINGS","APPEND","APPLICATION","APPLICATION_LOG","ARITHABORT","ARITHIGNORE","AS","ASC","ASSEMBLY","ASYMMETRIC","ASYNCHRONOUS_COMMIT","AT","ATOMIC","ATTACH","ATTACH_REBUILD_LOG","AUDIT","AUDIT_GUID","AUTHENTICATION","AUTHORIZATION","AUTO","AUTO_CLEANUP","AUTO_CLOSE","AUTO_CREATE_STATISTICS","AUTO_SHRINK","AUTO_UPDATE_STATISTICS","AUTO_UPDATE_STATISTICS_ASYNC","AUTOMATED_BACKUP_PREFERENCE","AUTOMATIC","AVAILABILITY","AVAILABILITY_MODE","BACKUP","BACKUP_PRIORITY","BASE64","BATCHSIZE","BEGIN","BEGIN_DIALOG","BIGINT","BINARY","BINDING","BIT","BLOCKERS","BLOCKSIZE","BOUNDING_BOX","BREAK","BROKER","BROKER_INSTANCE","BROWSE","BUCKET_COUNT","BUFFER","BUFFERCOUNT","BULK","BULK_LOGGED","BY","CACHE","CALL","CALLED","CALLER","CAP_CPU_PERCENT","CASCADE","CASE","CATALOG","CATCH","CELLS_PER_OBJECT","CERTIFICATE","CHANGE_RETENTION","CHANGE_TRACKING","CHANGES","CHAR","CHARACTER","CHECK","CHECK_CONSTRAINTS","CHECK_EXPIRATION","CHECK_POLICY","CHECKALLOC","CHECKCATALOG","CHECKCONSTRAINTS","CHECKDB","CHECKFILEGROUP","CHECKIDENT","CHECKPOINT","CHECKTABLE","CLASSIFIER_FUNCTION","CLEANTABLE","CLEANUP","CLEAR","CLOSE","CLUSTER","CLUSTERED","CODEPAGE","COLLATE","COLLECTION","COLUMN","COLUMN_SET","COLUMNS","COLUMNSTORE","COLUMNSTORE_ARCHIVE","COMMIT","COMMITTED","COMPATIBILITY_LEVEL","COMPRESSION","COMPUTE","CONCAT","CONCAT_NULL_YIELDS_NULL","CONFIGURATION","CONNECT","CONSTRAINT","CONTAINMENT","CONTENT","CONTEXT","CONTINUE","CONTINUE_AFTER_ERROR","CONTRACT","CONTRACT_NAME","CONTROL","CONVERSATION","COOKIE","COPY_ONLY","COUNTER","CPU","CREATE","CREATE_NEW","CREATION_DISPOSITION","CREDENTIAL","CRYPTOGRAPHIC","CUBE","CURRENT","CURRENT_DATE","CURSOR","CURSOR_CLOSE_ON_COMMIT","CURSOR_DEFAULT","CYCLE","DATA","DATA_COMPRESSION","DATA_PURITY","DATABASE","DATABASE_DEFAULT","DATABASE_MIRRORING","DATABASE_SNAPSHOT","DATAFILETYPE","DATE","DATE_CORRELATION_OPTIMIZATION","DATEFIRST","DATEFORMAT","DATETIME","DATETIME2","DATETIMEOFFSET","DAY","DAYOFYEAR","DAYS","DB_CHAINING","DBCC","DBREINDEX","DDL_DATABASE_LEVEL_EVENTS","DEADLOCK_PRIORITY","DEALLOCATE","DEC","DECIMAL","DECLARE","DECRYPTION","DEFAULT","DEFAULT_DATABASE","DEFAULT_FULLTEXT_LANGUAGE","DEFAULT_LANGUAGE","DEFAULT_SCHEMA","DEFINITION","DELAY","DELAYED_DURABILITY","DELETE","DELETED","DENSITY_VECTOR","DENY","DEPENDENTS","DES","DESC","DESCRIPTION","DESX","DHCP","DIAGNOSTICS","DIALOG","DIFFERENTIAL","DIRECTORY_NAME","DISABLE","DISABLE_BROKER","DISABLED","DISK","DISTINCT","DISTRIBUTED","DOCUMENT","DOUBLE","DROP","DROP_EXISTING","DROPCLEANBUFFERS","DUMP","DURABILITY","DYNAMIC","EDITION","ELEMENTS","ELSE","EMERGENCY","EMPTY","EMPTYFILE","ENABLE","ENABLE_BROKER","ENABLED","ENCRYPTION","END","ENDPOINT","ENDPOINT_URL","ERRLVL","ERROR","ERROR_BROKER_CONVERSATIONS","ERRORFILE","ESCAPE","ESTIMATEONLY","EVENT","EVENT_RETENTION_MODE","EXEC","EXECUTABLE","EXECUTE","EXIT","EXPAND","EXPIREDATE","EXPIRY_DATE","EXPLICIT","EXTENDED_LOGICAL_CHECKS","EXTENSION","EXTERNAL","EXTERNAL_ACCESS","FAIL_OPERATION","FAILOVER","FAILOVER_MODE","FAILURE_CONDITION_LEVEL","FALSE","FAN_IN","FAST","FAST_FORWARD","FETCH","FIELDTERMINATOR","FILE","FILEGROUP","FILEGROWTH","FILELISTONLY","FILENAME","FILEPATH","FILESTREAM","FILESTREAM_ON","FILETABLE_COLLATE_FILENAME","FILETABLE_DIRECTORY","FILETABLE_FULLPATH_UNIQUE_CONSTRAINT_NAME","FILETABLE_NAMESPACE","FILETABLE_PRIMARY_KEY_CONSTRAINT_NAME","FILETABLE_STREAMID_UNIQUE_CONSTRAINT_NAME","FILLFACTOR","FILTERING","FIRE_TRIGGERS","FIRST","FIRSTROW","FLOAT","FMTONLY","FOLLOWING","FOR","FORCE","FORCE_FAILOVER_ALLOW_DATA_LOSS","FORCE_SERVICE_ALLOW_DATA_LOSS","FORCED","FORCEPLAN","FORCESCAN","FORCESEEK","FOREIGN","FORMATFILE","FORMSOF","FORWARD_ONLY","FREE","FREEPROCCACHE","FREESESSIONCACHE","FREESYSTEMCACHE","FROM","FULL","FULLSCAN","FULLTEXT","FUNCTION","GB","GEOGRAPHY_AUTO_GRID","GEOGRAPHY_GRID","GEOMETRY_AUTO_GRID","GEOMETRY_GRID","GET","GLOBAL","GO","GOTO","GOVERNOR","GRANT","GRIDS","GROUP","GROUP_MAX_REQUESTS","HADR","HASH","HASHED","HAVING","HEADERONLY","HEALTH_CHECK_TIMEOUT","HELP","HIERARCHYID","HIGH","HINT","HISTOGRAM","HOLDLOCK","HONOR_BROKER_PRIORITY","HOUR","HOURS","IDENTITY","IDENTITY_INSERT","IDENTITY_VALUE","IDENTITYCOL","IF","IGNORE_CONSTRAINTS","IGNORE_DUP_KEY","IGNORE_NONCLUSTERED_COLUMNSTORE_INDEX","IGNORE_TRIGGERS","IMAGE","IMMEDIATE","IMPERSONATE","IMPLICIT_TRANSACTIONS","IMPORTANCE","INCLUDE","INCREMENT","INCREMENTAL","INDEX","INDEXDEFRAG","INFINITE","INFLECTIONAL","INIT","INITIATOR","INPUT","INPUTBUFFER","INSENSITIVE","INSERT","INSERTED","INSTEAD","INT","INTEGER","INTO","IO","IP","ISABOUT","ISOLATION","JOB","KB","KEEP","KEEP_CDC","KEEP_NULLS","KEEP_REPLICATION","KEEPDEFAULTS","KEEPFIXED","KEEPIDENTITY","KEEPNULLS","KERBEROS","KEY","KEY_SOURCE","KEYS","KEYSET","KILL","KILOBYTES_PER_BATCH","LABELONLY","LANGUAGE","LAST","LASTROW","LEVEL","LEVEL_1","LEVEL_2","LEVEL_3","LEVEL_4","LIFETIME","LIMIT","LINENO","LIST","LISTENER","LISTENER_IP","LISTENER_PORT","LOAD","LOADHISTORY","LOB_COMPACTION","LOCAL","LOCAL_SERVICE_NAME","LOCK_ESCALATION","LOCK_TIMEOUT","LOGIN","LOGSPACE","LOOP","LOW","MANUAL","MARK","MARK_IN_USE_FOR_REMOVAL","MASTER","MAX_CPU_PERCENT","MAX_DISPATCH_LATENCY","MAX_DOP","MAX_DURATION","MAX_EVENT_SIZE","MAX_FILES","MAX_IOPS_PER_VOLUME","MAX_MEMORY","MAX_MEMORY_PERCENT","MAX_QUEUE_READERS","MAX_ROLLOVER_FILES","MAX_SIZE","MAXDOP","MAXERRORS","MAXLENGTH","MAXRECURSION","MAXSIZE","MAXTRANSFERSIZE","MAXVALUE","MB","MEDIADESCRIPTION","MEDIANAME","MEDIAPASSWORD","MEDIUM","MEMBER","MEMORY_OPTIMIZED","MEMORY_OPTIMIZED_DATA","MEMORY_OPTIMIZED_ELEVATE_TO_SNAPSHOT","MEMORY_PARTITION_MODE","MERGE","MESSAGE","MESSAGE_FORWARD_SIZE","MESSAGE_FORWARDING","MICROSECOND","MILLISECOND","MIN_CPU_PERCENT","MIN_IOPS_PER_VOLUME","MIN_MEMORY_PERCENT","MINUTE","MINUTES","MINVALUE","MIRROR","MIRROR_ADDRESS","MODIFY","MONEY","MONTH","MOVE","MULTI_USER","MUST_CHANGE","NAME","NANOSECOND","NATIONAL","NATIVE_COMPILATION","NCHAR","NEGOTIATE","NESTED_TRIGGERS","NEW_ACCOUNT","NEW_BROKER","NEW_PASSWORD","NEWNAME","NEXT","NO","NO_BROWSETABLE","NO_CHECKSUM","NO_COMPRESSION","NO_EVENT_LOSS","NO_INFOMSGS","NO_TRUNCATE","NO_WAIT","NOCHECK","NOCOUNT","NOEXEC","NOEXPAND","NOFORMAT","NOINDEX","NOINIT","NOLOCK","NON","NON_TRANSACTED_ACCESS","NONCLUSTERED","NONE","NORECOMPUTE","NORECOVERY","NORESEED","NORESET","NOREWIND","NORMAL","NOSKIP","NOTIFICATION","NOTRUNCATE","NOUNLOAD","NOWAIT","NTEXT","NTLM","NUMANODE","NUMERIC","NUMERIC_ROUNDABORT","NVARCHAR","OBJECT","OF","OFF","OFFLINE","OFFSET","OFFSETS","OLD_ACCOUNT","OLD_PASSWORD","ON","ON_FAILURE","ONLINE","ONLY","OPEN","OPEN_EXISTING","OPENTRAN","OPTIMISTIC","OPTIMIZE","OPTION","ORDER","OUT","OUTPUT","OUTPUTBUFFER","OVER","OVERRIDE","OWNER","OWNERSHIP","PAD_INDEX","PAGE","PAGE_VERIFY","PAGECOUNT","PAGLOCK","PARAMETERIZATION","PARSEONLY","PARTIAL","PARTITION","PARTITIONS","PARTNER","PASSWORD","PATH","PER_CPU","PER_NODE","PERCENT","PERMISSION_SET","PERSISTED","PHYSICAL_ONLY","PLAN","POISON_MESSAGE_HANDLING","POOL","POPULATION","PORT","PRECEDING","PRECISION","PRIMARY","PRIMARY_ROLE","PRINT","PRIOR","PRIORITY","PRIORITY_LEVEL","PRIVATE","PRIVILEGES","PROC","PROCCACHE","PROCEDURE","PROCEDURE_NAME","PROCESS","PROFILE","PROPERTY","PROPERTY_DESCRIPTION","PROPERTY_INT_ID","PROPERTY_SET_GUID","PROVIDER","PROVIDER_KEY_NAME","PUBLIC","PUT","QUARTER","QUERY","QUERY_GOVERNOR_COST_LIMIT","QUEUE","QUEUE_DELAY","QUOTED_IDENTIFIER","RAISERROR","RANGE","RAW","RC2","RC4","RC4_128","READ","READ_COMMITTED_SNAPSHOT","READ_ONLY","READ_ONLY_ROUTING_LIST","READ_ONLY_ROUTING_URL","READ_WRITE","READ_WRITE_FILEGROUPS","READCOMMITTED","READCOMMITTEDLOCK","READONLY","READPAST","READTEXT","READUNCOMMITTED","READWRITE","REAL","REBUILD","RECEIVE","RECOMPILE","RECONFIGURE","RECOVERY","RECURSIVE","RECURSIVE_TRIGGERS","REFERENCES","REGENERATE","RELATED_CONVERSATION","RELATED_CONVERSATION_GROUP","RELATIVE","REMOTE","REMOTE_PROC_TRANSACTIONS","REMOTE_SERVICE_NAME","REMOVE","REORGANIZE","REPAIR_ALLOW_DATA_LOSS","REPAIR_FAST","REPAIR_REBUILD","REPEATABLE","REPEATABLEREAD","REPLICA","REPLICATION","REQUEST_MAX_CPU_TIME_SEC","REQUEST_MAX_MEMORY_GRANT_PERCENT","REQUEST_MEMORY_GRANT_TIMEOUT_SEC","REQUIRED","RESAMPLE","RESEED","RESERVE_DISK_SPACE","RESET","RESOURCE","RESTART","RESTORE","RESTRICT","RESTRICTED_USER","RESULT","RESUME","RETAINDAYS","RETENTION","RETURN","RETURNS","REVERT","REVOKE","REWIND","REWINDONLY","ROBUST","ROLE","ROLLBACK","ROLLUP","ROOT","ROUTE","ROW","ROWCOUNT","ROWGUIDCOL","ROWLOCK","ROWS","ROWS_PER_BATCH","ROWTERMINATOR","ROWVERSION","RSA_1024","RSA_2048","RSA_512","RULE","SAFE","SAFETY","SAMPLE","SAVE","SCHEDULER","SCHEMA","SCHEMA_AND_DATA","SCHEMA_ONLY","SCHEMABINDING","SCHEME","SCROLL","SCROLL_LOCKS","SEARCH","SECOND","SECONDARY","SECONDARY_ONLY","SECONDARY_ROLE","SECONDS","SECRET","SECURITY_LOG","SECURITYAUDIT","SELECT","SELECTIVE","SELF","SEND","SENT","SEQUENCE","SERIALIZABLE","SERVER","SERVICE","SERVICE_BROKER","SERVICE_NAME","SESSION","SESSION_TIMEOUT","SET","SETS","SETUSER","SHOW_STATISTICS","SHOWCONTIG","SHOWPLAN","SHOWPLAN_ALL","SHOWPLAN_TEXT","SHOWPLAN_XML","SHRINKDATABASE","SHRINKFILE","SHUTDOWN","SID","SIGNATURE","SIMPLE","SINGLE_BLOB","SINGLE_CLOB","SINGLE_NCLOB","SINGLE_USER","SINGLETON","SIZE","SKIP","SMALLDATETIME","SMALLINT","SMALLMONEY","SNAPSHOT","SORT_IN_TEMPDB","SOURCE","SPARSE","SPATIAL","SPATIAL_WINDOW_MAX_CELLS","SPECIFICATION","SPLIT","SQL","SQL_VARIANT","SQLPERF","STANDBY","START","START_DATE","STARTED","STARTUP_STATE","STAT_HEADER","STATE","STATEMENT","STATIC","STATISTICAL_SEMANTICS","STATISTICS","STATISTICS_INCREMENTAL","STATISTICS_NORECOMPUTE","STATS","STATS_STREAM","STATUS","STATUSONLY","STOP","STOP_ON_ERROR","STOPAT","STOPATMARK","STOPBEFOREMARK","STOPLIST","STOPPED","SUBJECT","SUBSCRIPTION","SUPPORTED","SUSPEND","SWITCH","SYMMETRIC","SYNCHRONOUS_COMMIT","SYNONYM","SYSNAME","SYSTEM","TABLE","TABLERESULTS","TABLESAMPLE","TABLOCK","TABLOCKX","TAKE","TAPE","TARGET","TARGET_RECOVERY_TIME","TB","TCP","TEXT","TEXTIMAGE_ON","TEXTSIZE","THEN","THESAURUS","THROW","TIES","TIME","TIMEOUT","TIMER","TIMESTAMP","TINYINT","TO","TOP","TORN_PAGE_DETECTION","TRACEOFF","TRACEON","TRACESTATUS","TRACK_CAUSALITY","TRACK_COLUMNS_UPDATED","TRAN","TRANSACTION","TRANSFER","TRANSFORM_NOISE_WORDS","TRIGGER","TRIPLE_DES","TRIPLE_DES_3KEY","TRUE","TRUNCATE","TRUNCATEONLY","TRUSTWORTHY","TRY","TSQL","TWO_DIGIT_YEAR_CUTOFF","TYPE","TYPE_WARNING","UNBOUNDED","UNCHECKED","UNCOMMITTED","UNDEFINED","UNIQUE","UNIQUEIDENTIFIER","UNKNOWN","UNLIMITED","UNLOAD","UNSAFE","UPDATE","UPDATETEXT","UPDATEUSAGE","UPDLOCK","URL","USE","USED","USER","USEROPTIONS","USING","VALID_XML","VALIDATION","VALUE","VALUES","VARBINARY","VARCHAR","VARYING","VERIFYONLY","VERSION","VIEW","VIEW_METADATA","VIEWS","VISIBILITY","WAIT_AT_LOW_PRIORITY","WAITFOR","WEEK","WEIGHT","WELL_FORMED_XML","WHEN","WHERE","WHILE","WINDOWS","WITH","WITHIN","WITHOUT","WITNESS","WORK","WORKLOAD","WRITETEXT","XACT_ABORT","XLOCK","XMAX","XMIN","XML","XMLDATA","XMLNAMESPACES","XMLSCHEMA","XQUERY","XSINIL","YEAR","YMAX","YMIN"],operators:["ALL","AND","ANY","BETWEEN","EXISTS","IN","LIKE","NOT","OR","SOME","EXCEPT","INTERSECT","UNION","APPLY","CROSS","FULL","INNER","JOIN","LEFT","OUTER","RIGHT","CONTAINS","FREETEXT","IS","NULL","PIVOT","UNPIVOT","MATCHED"],builtinFunctions:["AVG","CHECKSUM_AGG","COUNT","COUNT_BIG","GROUPING","GROUPING_ID","MAX","MIN","SUM","STDEV","STDEVP","VAR","VARP","CUME_DIST","FIRST_VALUE","LAG","LAST_VALUE","LEAD","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","COLLATE","COLLATIONPROPERTY","TERTIARY_WEIGHTS","FEDERATION_FILTERING_VALUE","CAST","CONVERT","PARSE","TRY_CAST","TRY_CONVERT","TRY_PARSE","ASYMKEY_ID","ASYMKEYPROPERTY","CERTPROPERTY","CERT_ID","CRYPT_GEN_RANDOM","DECRYPTBYASYMKEY","DECRYPTBYCERT","DECRYPTBYKEY","DECRYPTBYKEYAUTOASYMKEY","DECRYPTBYKEYAUTOCERT","DECRYPTBYPASSPHRASE","ENCRYPTBYASYMKEY","ENCRYPTBYCERT","ENCRYPTBYKEY","ENCRYPTBYPASSPHRASE","HASHBYTES","IS_OBJECTSIGNED","KEY_GUID","KEY_ID","KEY_NAME","SIGNBYASYMKEY","SIGNBYCERT","SYMKEYPROPERTY","VERIFYSIGNEDBYCERT","VERIFYSIGNEDBYASYMKEY","CURSOR_STATUS","DATALENGTH","IDENT_CURRENT","IDENT_INCR","IDENT_SEED","IDENTITY","SQL_VARIANT_PROPERTY","CURRENT_TIMESTAMP","DATEADD","DATEDIFF","DATEFROMPARTS","DATENAME","DATEPART","DATETIME2FROMPARTS","DATETIMEFROMPARTS","DATETIMEOFFSETFROMPARTS","DAY","EOMONTH","GETDATE","GETUTCDATE","ISDATE","MONTH","SMALLDATETIMEFROMPARTS","SWITCHOFFSET","SYSDATETIME","SYSDATETIMEOFFSET","SYSUTCDATETIME","TIMEFROMPARTS","TODATETIMEOFFSET","YEAR","CHOOSE","COALESCE","IIF","NULLIF","ABS","ACOS","ASIN","ATAN","ATN2","CEILING","COS","COT","DEGREES","EXP","FLOOR","LOG","LOG10","PI","POWER","RADIANS","RAND","ROUND","SIGN","SIN","SQRT","SQUARE","TAN","APP_NAME","APPLOCK_MODE","APPLOCK_TEST","ASSEMBLYPROPERTY","COL_LENGTH","COL_NAME","COLUMNPROPERTY","DATABASE_PRINCIPAL_ID","DATABASEPROPERTYEX","DB_ID","DB_NAME","FILE_ID","FILE_IDEX","FILE_NAME","FILEGROUP_ID","FILEGROUP_NAME","FILEGROUPPROPERTY","FILEPROPERTY","FULLTEXTCATALOGPROPERTY","FULLTEXTSERVICEPROPERTY","INDEX_COL","INDEXKEY_PROPERTY","INDEXPROPERTY","OBJECT_DEFINITION","OBJECT_ID","OBJECT_NAME","OBJECT_SCHEMA_NAME","OBJECTPROPERTY","OBJECTPROPERTYEX","ORIGINAL_DB_NAME","PARSENAME","SCHEMA_ID","SCHEMA_NAME","SCOPE_IDENTITY","SERVERPROPERTY","STATS_DATE","TYPE_ID","TYPE_NAME","TYPEPROPERTY","DENSE_RANK","NTILE","RANK","ROW_NUMBER","PUBLISHINGSERVERNAME","OPENDATASOURCE","OPENQUERY","OPENROWSET","OPENXML","CERTENCODED","CERTPRIVATEKEY","CURRENT_USER","HAS_DBACCESS","HAS_PERMS_BY_NAME","IS_MEMBER","IS_ROLEMEMBER","IS_SRVROLEMEMBER","LOGINPROPERTY","ORIGINAL_LOGIN","PERMISSIONS","PWDENCRYPT","PWDCOMPARE","SESSION_USER","SESSIONPROPERTY","SUSER_ID","SUSER_NAME","SUSER_SID","SUSER_SNAME","SYSTEM_USER","USER","USER_ID","USER_NAME","ASCII","CHAR","CHARINDEX","CONCAT","DIFFERENCE","FORMAT","LEFT","LEN","LOWER","LTRIM","NCHAR","PATINDEX","QUOTENAME","REPLACE","REPLICATE","REVERSE","RIGHT","RTRIM","SOUNDEX","SPACE","STR","STUFF","SUBSTRING","UNICODE","UPPER","BINARY_CHECKSUM","CHECKSUM","CONNECTIONPROPERTY","CONTEXT_INFO","CURRENT_REQUEST_ID","ERROR_LINE","ERROR_NUMBER","ERROR_MESSAGE","ERROR_PROCEDURE","ERROR_SEVERITY","ERROR_STATE","FORMATMESSAGE","GETANSINULL","GET_FILESTREAM_TRANSACTION_CONTEXT","HOST_ID","HOST_NAME","ISNULL","ISNUMERIC","MIN_ACTIVE_ROWVERSION","NEWID","NEWSEQUENTIALID","ROWCOUNT_BIG","XACT_STATE","TEXTPTR","TEXTVALID","COLUMNS_UPDATED","EVENTDATA","TRIGGER_NESTLEVEL","UPDATE","CHANGETABLE","CHANGE_TRACKING_CONTEXT","CHANGE_TRACKING_CURRENT_VERSION","CHANGE_TRACKING_IS_COLUMN_IN_MASK","CHANGE_TRACKING_MIN_VALID_VERSION","CONTAINSTABLE","FREETEXTTABLE","SEMANTICKEYPHRASETABLE","SEMANTICSIMILARITYDETAILSTABLE","SEMANTICSIMILARITYTABLE","FILETABLEROOTPATH","GETFILENAMESPACEPATH","GETPATHLOCATOR","PATHNAME","GET_TRANSMISSION_STATUS"],builtinVariables:["@@DATEFIRST","@@DBTS","@@LANGID","@@LANGUAGE","@@LOCK_TIMEOUT","@@MAX_CONNECTIONS","@@MAX_PRECISION","@@NESTLEVEL","@@OPTIONS","@@REMSERVER","@@SERVERNAME","@@SERVICENAME","@@SPID","@@TEXTSIZE","@@VERSION","@@CURSOR_ROWS","@@FETCH_STATUS","@@DATEFIRST","@@PROCID","@@ERROR","@@IDENTITY","@@ROWCOUNT","@@TRANCOUNT","@@CONNECTIONS","@@CPU_BUSY","@@IDLE","@@IO_BUSY","@@PACKET_ERRORS","@@PACK_RECEIVED","@@PACK_SENT","@@TIMETICKS","@@TOTAL_ERRORS","@@TOTAL_READ","@@TOTAL_WRITE"],pseudoColumns:["$ACTION","$IDENTITY","$ROWGUID","$PARTITION"],tokenizer:{root:[{include:"@comments"},{include:"@whitespace"},{include:"@pseudoColumns"},{include:"@numbers"},{include:"@strings"},{include:"@complexIdentifiers"},{include:"@scopes"},[/(<)(where|set|foreach|if|trim)/,["delimiter",{token:"tag",next:"@xml"}]],[/[;,.]/,"delimiter"],[/[()]/,"@brackets"],[/[\w@#$]+/,{cases:{"@keywords":"keyword","@operators":"operator","@builtinVariables":"predefined","@builtinFunctions":"predefined","@default":"identifier"}}],[/[<>=!%&+\-*/|~^]/,"operator"]],whitespace:[[/\s+/,"white"]],comments:[[/--+.*/,"comment"],[/\/\*/,{token:"comment.quote",next:"@comment"}]],comment:[[/[^*/]+/,"comment"],[/\*\//,{token:"comment.quote",next:"@pop"}],[/./,"comment"]],pseudoColumns:[[/[$][A-Za-z_][\w@#$]*/,{cases:{"@pseudoColumns":"predefined","@default":"identifier"}}]],numbers:[[/0[xX][0-9a-fA-F]*/,"number"],[/[$][+-]*\d*(\.\d*)?/,"number"],[/((\d+(\.\d*)?)|(\.\d+))([eE][\-+]?\d+)?/,"number"]],strings:[[/N'/,{token:"string",next:"@string"}],[/'/,{token:"string",next:"@string"}]],string:[[/[^']+/,"string"],[/''/,"string"],[/'/,{token:"string",next:"@pop"}]],complexIdentifiers:[[/\[/,{token:"identifier.quote",next:"@bracketedIdentifier"}],[/"/,{token:"identifier.quote",next:"@quotedIdentifier"}]],bracketedIdentifier:[[/[^\]]+/,"identifier"],[/]]/,"identifier"],[/]/,{token:"identifier.quote",next:"@pop"}]],quotedIdentifier:[[/[^"]+/,"identifier"],[/""/,"identifier"],[/"/,{token:"identifier.quote",next:"@pop"}]],scopes:[[/BEGIN\s+(DISTRIBUTED\s+)?TRAN(SACTION)?\b/i,"keyword"],[/BEGIN\s+TRY\b/i,{token:"keyword.try"}],[/END\s+TRY\b/i,{token:"keyword.try"}],[/BEGIN\s+CATCH\b/i,{token:"keyword.catch"}],[/END\s+CATCH\b/i,{token:"keyword.catch"}],[/(BEGIN|CASE)\b/i,{token:"keyword.block"}],[/END\b/i,{token:"keyword.block"}],[/WHEN\b/i,{token:"keyword.choice"}],[/THEN\b/i,{token:"keyword.choice"}]],xml:[[/"([^"]*)"/,"attribute.value"],[/'([^']*)'/,"attribute.value"],[/[\w\-]+/,"attribute.name"],[/=/,"delimiter"],[/>/,{token:"delimiter",next:"@xmlEmbedded",nextEmbedded:"mybatis"}],[/[ \t\r\n]+/],[/(<\/)(where|if|set|foreach|trim)(>)/,["delimiter","tag",{token:"delimiter",next:"@pop"}]]],xmlEmbedded:[[/<\/(where|if|set|foreach|trim)/,{token:"tag",next:"@pop",nextEmbedded:"@pop"}],[/[^<]+/,""]]}})};function ve(e){this.__parent=e,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}ve.prototype.clone_empty=function(){var e=new ve(this.__parent);return e.set_indent(this.__indent_count,this.__alignment_count),e};ve.prototype.item=function(e){return e<0?this.__items[this.__items.length+e]:this.__items[e]};ve.prototype.has_match=function(e){for(var t=this.__items.length-1;t>=0;t--)if(this.__items[t].match(e))return!0;return!1};ve.prototype.set_indent=function(e,t){this.is_empty()&&(this.__indent_count=e||0,this.__alignment_count=t||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))};ve.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)};ve.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count};ve.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var e=this.__parent.current_line;return e.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),e.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),e.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,e.__items[0]===" "&&(e.__items.splice(0,1),e.__character_count-=1),!0}return!1};ve.prototype.is_empty=function(){return this.__items.length===0};ve.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]};ve.prototype.push=function(e){this.__items.push(e);var t=e.lastIndexOf(`
`);t!==-1?this.__character_count=e.length-t:this.__character_count+=e.length};ve.prototype.pop=function(){var e=null;return this.is_empty()||(e=this.__items.pop(),this.__character_count-=e.length),e};ve.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)};ve.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)};ve.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1};ve.prototype.toString=function(){var e="";return this.is_empty()?this.__parent.indent_empty_lines&&(e=this.__parent.get_indent_string(this.__indent_count)):(e=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),e+=this.__items.join("")),e};function Dt(e,t){this.__cache=[""],this.__indent_size=e.indent_size,this.__indent_string=e.indent_char,e.indent_with_tabs||(this.__indent_string=new Array(e.indent_size+1).join(e.indent_char)),t=t||"",e.indent_level>0&&(t=new Array(e.indent_level+1).join(this.__indent_string)),this.__base_string=t,this.__base_string_length=t.length}Dt.prototype.get_indent_size=function(e,t){var n=this.__base_string_length;return t=t||0,e<0&&(n=0),n+=e*this.__indent_size,n+=t,n};Dt.prototype.get_indent_string=function(e,t){var n=this.__base_string;return t=t||0,e<0&&(e=0,n=""),t+=e*this.__indent_size,this.__ensure_cache(t),n+=this.__cache[t],n};Dt.prototype.__ensure_cache=function(e){for(;e>=this.__cache.length;)this.__add_column()};Dt.prototype.__add_column=function(){var e=this.__cache.length,t=0,n="";this.__indent_size&&e>=this.__indent_size&&(t=Math.floor(e/this.__indent_size),e-=t*this.__indent_size,n=new Array(t+1).join(this.__indent_string)),e&&(n+=new Array(e+1).join(" ")),this.__cache.push(n)};function Ee(e,t){this.__indent_cache=new Dt(e,t),this.raw=!1,this._end_with_newline=e.end_with_newline,this.indent_size=e.indent_size,this.wrap_line_length=e.wrap_line_length,this.indent_empty_lines=e.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new ve(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}Ee.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)};Ee.prototype.get_line_number=function(){return this.__lines.length};Ee.prototype.get_indent_string=function(e,t){return this.__indent_cache.get_indent_string(e,t)};Ee.prototype.get_indent_size=function(e,t){return this.__indent_cache.get_indent_size(e,t)};Ee.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()};Ee.prototype.add_new_line=function(e){return this.is_empty()||!e&&this.just_added_newline()?!1:(this.raw||this.__add_outputline(),!0)};Ee.prototype.get_code=function(e){this.trim(!0);var t=this.current_line.pop();t&&(t[t.length-1]===`
`&&(t=t.replace(/\n+$/g,"")),this.current_line.push(t)),this._end_with_newline&&this.__add_outputline();var n=this.__lines.join(`
`);return e===`\r
`?n=n.replace(/([^\r])\n/g,`$1${e}`):e!==`
`&&(n=n.replace(/[\n]/g,e)),n};Ee.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()};Ee.prototype.set_indent=function(e,t){return e=e||0,t=t||0,this.next_line.set_indent(e,t),this.__lines.length>1?(this.current_line.set_indent(e,t),!0):(this.current_line.set_indent(),!1)};Ee.prototype.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1};Ee.prototype.add_token=function(e){this.__add_space_before_token(),this.current_line.push(e),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()};Ee.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))};Ee.prototype.remove_indent=function(e){for(var t=this.__lines.length;e<t;)this.__lines[e]._remove_indent(),e++;this.current_line._remove_wrap_indent()};Ee.prototype.trim=function(e){for(e=e===void 0?!1:e,this.current_line.trim();e&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null};Ee.prototype.just_added_newline=function(){return this.current_line.is_empty()};Ee.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()};Ee.prototype.ensure_empty_line_above=function(e,t){for(var n=this.__lines.length-2;n>=0;){var i=this.__lines[n];if(i.is_empty())break;if(i.item(0).indexOf(e)!==0&&i.item(-1)!==t){this.__lines.splice(n+1,0,new ve(this)),this.previous_line=this.__lines[this.__lines.length-2];break}n--}};function Cn(e,t,n,i){this.type=e,this.text=t,this.comments_before=null,this.newlines=n||0,this.whitespace_before=i||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}var ws="\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a",xi="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",Ln="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",Ci="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",Ds="(?:\\\\u[0-9a-fA-F]{4}|["+ws+Ln+"])",$s="(?:\\\\u[0-9a-fA-F]{4}|["+xi+Ln+Ci+"])*";const Li=new RegExp(Ds+$s,"g"),Ms=new RegExp("(?:\\\\u[0-9a-fA-F]{4}|["+xi+Ln+Ci+"])+"),$t=/[\n\r\u2028\u2029]/,Mt=new RegExp(`\r
|`+$t.source),Ut=new RegExp(Mt.source,"g");function Je(e,t){this.raw_options=Us(e,t),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php","smarty"],["auto"])}Je.prototype._get_array=function(e,t){var n=this.raw_options[e],i=t||[];return typeof n=="object"?n!==null&&typeof n.concat=="function"&&(i=n.concat()):typeof n=="string"&&(i=n.split(/[^a-zA-Z0-9_/-]+/)),i};Je.prototype._get_boolean=function(e,t){var n=this.raw_options[e],i=n===void 0?!!t:!!n;return i};Je.prototype._get_characters=function(e,t){var n=this.raw_options[e],i=t||"";return typeof n=="string"&&(i=n.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),i};Je.prototype._get_number=function(e,t){var n=this.raw_options[e];t=parseInt(t,10),isNaN(t)&&(t=0);var i=parseInt(n,10);return isNaN(i)&&(i=t),i};Je.prototype._get_selection=function(e,t,n){var i=this._get_selection_list(e,t,n);if(i.length!==1)throw new Error("Invalid Option Value: The option '"+e+`' can only be one of the following values:
`+t+`
You passed in: '`+this.raw_options[e]+"'");return i[0]};Je.prototype._get_selection_list=function(e,t,n){if(!t||t.length===0)throw new Error("Selection list cannot be empty.");if(n=n||[t[0]],!this._is_valid_selection(n,t))throw new Error("Invalid Default Value!");var i=this._get_array(e,n);if(!this._is_valid_selection(i,t))throw new Error("Invalid Option Value: The option '"+e+`' can contain only the following values:
`+t+`
You passed in: '`+this.raw_options[e]+"'");return i};Je.prototype._is_valid_selection=function(e,t){return e.length&&t.length&&!e.some(function(n){return t.indexOf(n)===-1})};function Us(e,t){var n={};e=Bs(e);var i;for(i in e)i!==t&&(n[i]=e[i]);if(t&&e[t])for(i in e[t])n[i]=e[t][i];return n}function Bs(e){var t={},n;for(n in e){var i=n.replace(/-/g,"_");t[i]=e[n]}return t}var Fs=["before-newline","after-newline","preserve-newline"];function Ni(e){Je.call(this,e,"js");var t=this.raw_options.brace_style||null;t==="expand-strict"?this.raw_options.brace_style="expand":t==="collapse-preserve-inline"?this.raw_options.brace_style="collapse,preserve-inline":this.raw_options.braces_on_own_line!==void 0&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var n=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var i=0;i<n.length;i++)n[i]==="preserve-inline"?this.brace_preserve_inline=!0:this.brace_style=n[i];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",Fs),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}Ni.prototype=new Je;var ki=!1;function Te(e){this.__input=e||"",this.__input_length=this.__input.length,this.__position=0}Te.prototype.restart=function(){this.__position=0};Te.prototype.back=function(){this.__position>0&&(this.__position-=1)};Te.prototype.hasNext=function(){return this.__position<this.__input_length};Te.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__input.charAt(this.__position),this.__position+=1),e};Te.prototype.peek=function(e){var t=null;return e=e||0,e+=this.__position,e>=0&&e<this.__input_length&&(t=this.__input.charAt(e)),t};Te.prototype.__match=function(e,t){e.lastIndex=t;var n=e.exec(this.__input);return n&&!ki&&n.index!==t&&(n=null),n};Te.prototype.test=function(e,t){return t=t||0,t+=this.__position,t>=0&&t<this.__input_length?!!this.__match(e,t):!1};Te.prototype.testChar=function(e,t){var n=this.peek(t);return e.lastIndex=0,n!==null&&e.test(n)};Te.prototype.match=function(e){var t=this.__match(e,this.__position);return t?this.__position+=t[0].length:t=null,t};Te.prototype.read=function(e,t,n){var i="",a;return e&&(a=this.match(e),a&&(i+=a[0])),t&&(a||!e)&&(i+=this.readUntil(t,n)),i};Te.prototype.readUntil=function(e,t){var n="",i=this.__position;e.lastIndex=this.__position;var a=e.exec(this.__input);return a?(i=a.index,t&&(i+=a[0].length)):i=this.__input_length,n=this.__input.substring(this.__position,i),this.__position=i,n};Te.prototype.readUntilAfter=function(e){return this.readUntil(e,!0)};Te.prototype.get_regexp=function(e,t){var n=null,i="g";return t&&ki&&(i="y"),typeof e=="string"&&e!==""?n=new RegExp(e,i):e&&(n=new RegExp(e.source,i)),n};Te.prototype.get_literal_regexp=function(e){return RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"))};Te.prototype.peekUntilAfter=function(e){var t=this.__position,n=this.readUntilAfter(e);return this.__position=t,n};Te.prototype.lookBack=function(e){var t=this.__position-1;return t>=e.length&&this.__input.substring(t-e.length,t).toLowerCase()===e};function Qe(e){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=e}Qe.prototype.restart=function(){this.__position=0};Qe.prototype.isEmpty=function(){return this.__tokens_length===0};Qe.prototype.hasNext=function(){return this.__position<this.__tokens_length};Qe.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__tokens[this.__position],this.__position+=1),e};Qe.prototype.peek=function(e){var t=null;return e=e||0,e+=this.__position,e>=0&&e<this.__tokens_length&&(t=this.__tokens[e]),t};Qe.prototype.add=function(e){this.__parent_token&&(e.parent=this.__parent_token),this.__tokens.push(e),this.__tokens_length+=1};function xe(e,t){this._input=e,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,t&&(this._starting_pattern=this._input.get_regexp(t._starting_pattern,!0),this._match_pattern=this._input.get_regexp(t._match_pattern,!0),this._until_pattern=this._input.get_regexp(t._until_pattern),this._until_after=t._until_after)}xe.prototype.read=function(){var e=this._input.read(this._starting_pattern);return(!this._starting_pattern||e)&&(e+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),e};xe.prototype.read_match=function(){return this._input.match(this._match_pattern)};xe.prototype.until_after=function(e){var t=this._create();return t._until_after=!0,t._until_pattern=this._input.get_regexp(e),t._update(),t};xe.prototype.until=function(e){var t=this._create();return t._until_after=!1,t._until_pattern=this._input.get_regexp(e),t._update(),t};xe.prototype.starting_with=function(e){var t=this._create();return t._starting_pattern=this._input.get_regexp(e,!0),t._update(),t};xe.prototype.matching=function(e){var t=this._create();return t._match_pattern=this._input.get_regexp(e,!0),t._update(),t};xe.prototype._create=function(){return new xe(this._input,this)};xe.prototype._update=function(){};function at(e,t){xe.call(this,e,t),t?this._line_regexp=this._input.get_regexp(t._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}at.prototype=new xe;at.prototype.__set_whitespace_patterns=function(e,t){e+="\\t ",t+="\\n\\r",this._match_pattern=this._input.get_regexp("["+e+t+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+t+"]")};at.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var e=this._input.read(this._match_pattern);if(e===" ")this.whitespace_before_token=" ";else if(e){var t=this.__split(this._newline_regexp,e);this.newline_count=t.length-1,this.whitespace_before_token=t[this.newline_count]}return e};at.prototype.matching=function(e,t){var n=this._create();return n.__set_whitespace_patterns(e,t),n._update(),n};at.prototype._create=function(){return new at(this._input,this)};at.prototype.__split=function(e,t){e.lastIndex=0;for(var n=0,i=[],a=e.exec(t);a;)i.push(t.substring(n,a.index)),n=a.index+a[0].length,a=e.exec(t);return n<t.length?i.push(t.substring(n,t.length)):i.push(""),i};const _t={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},Be=function(e,t){this._input=new Te(e),this._options=t||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new at(this._input)};Be.prototype.tokenize=function(){this._input.restart(),this.__tokens=new Qe,this._reset();for(var e,t=new Cn(_t.START,""),n=null,i=[],a=new Qe;t.type!==_t.EOF;){for(e=this._get_next_token(t,n);this._is_comment(e);)a.add(e),e=this._get_next_token(t,n);a.isEmpty()||(e.comments_before=a,a=new Qe),e.parent=n,this._is_opening(e)?(i.push(n),n=e):n&&this._is_closing(e,n)&&(e.opened=n,n.closed=e,n=i.pop(),e.parent=n),e.previous=t,t.next=e,this.__tokens.add(e),t=e}return this.__tokens};Be.prototype._is_first_token=function(){return this.__tokens.isEmpty()};Be.prototype._reset=function(){};Be.prototype._get_next_token=function(){this._readWhitespace();var e=this._input.read(/.+/g);return e?this._create_token(_t.RAW,e):this._create_token(_t.EOF,"")};Be.prototype._is_comment=function(){return!1};Be.prototype._is_opening=function(){return!1};Be.prototype._is_closing=function(){return!1};Be.prototype._create_token=function(e,t){var n=new Cn(e,t,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token);return n};Be.prototype._readWhitespace=function(){return this._patterns.whitespace.read()};function Nn(e,t){e=typeof e=="string"?e:e.source,t=typeof t=="string"?t:t.source,this.__directives_block_pattern=new RegExp(e+/ beautify( \w+[:]\w+)+ /.source+t,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(e+/\sbeautify\signore:end\s/.source+t,"g")}Nn.prototype.get_directives=function(e){if(!e.match(this.__directives_block_pattern))return null;var t={};this.__directive_pattern.lastIndex=0;for(var n=this.__directive_pattern.exec(e);n;)t[n[1]]=n[2],n=this.__directive_pattern.exec(e);return t};Nn.prototype.readIgnored=function(e){return e.readUntilAfter(this.__directives_end_ignore_pattern)};var kn={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1};function Fe(e,t){xe.call(this,e,t),this.__template_pattern=null,this._disabled=Object.assign({},kn),this._excluded=Object.assign({},kn),t&&(this.__template_pattern=this._input.get_regexp(t.__template_pattern),this._excluded=Object.assign(this._excluded,t._excluded),this._disabled=Object.assign(this._disabled,t._disabled));var n=new xe(e);this.__patterns={handlebars_comment:n.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:n.starting_with(/{{{/).until_after(/}}}/),handlebars:n.starting_with(/{{/).until_after(/}}/),php:n.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:n.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:n.starting_with(/{%/).until_after(/%}/),django_value:n.starting_with(/{{/).until_after(/}}/),django_comment:n.starting_with(/{#/).until_after(/#}/),smarty:n.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:n.starting_with(/{\*/).until_after(/\*}/),smarty_literal:n.starting_with(/{literal}/).until_after(/{\/literal}/)}}Fe.prototype=new xe;Fe.prototype._create=function(){return new Fe(this._input,this)};Fe.prototype._update=function(){this.__set_templated_pattern()};Fe.prototype.disable=function(e){var t=this._create();return t._disabled[e]=!0,t._update(),t};Fe.prototype.read_options=function(e){var t=this._create();for(var n in kn)t._disabled[n]=e.templating.indexOf(n)===-1;return t._update(),t};Fe.prototype.exclude=function(e){var t=this._create();return t._excluded[e]=!0,t._update(),t};Fe.prototype.read=function(){var e="";this._match_pattern?e=this._input.read(this._starting_pattern):e=this._input.read(this._starting_pattern,this.__template_pattern);for(var t=this._read_template();t;)this._match_pattern?t+=this._input.read(this._match_pattern):t+=this._input.readUntil(this.__template_pattern),e+=t,t=this._read_template();return this._until_after&&(e+=this._input.readUntilAfter(this._until_pattern)),e};Fe.prototype.__set_templated_pattern=function(){var e=[];this._disabled.php||e.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||e.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||e.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(e.push(this.__patterns.django._starting_pattern.source),e.push(this.__patterns.django_value._starting_pattern.source),e.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||e.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&e.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+e.join("|")+")")};Fe.prototype._read_template=function(){var e="",t=this._input.peek();if(t==="<"){var n=this._input.peek(1);!this._disabled.php&&!this._excluded.php&&n==="?"&&(e=e||this.__patterns.php.read()),!this._disabled.erb&&!this._excluded.erb&&n==="%"&&(e=e||this.__patterns.erb.read())}else t==="{"&&(!this._disabled.handlebars&&!this._excluded.handlebars&&(e=e||this.__patterns.handlebars_comment.read(),e=e||this.__patterns.handlebars_unescaped.read(),e=e||this.__patterns.handlebars.read()),this._disabled.django||(!this._excluded.django&&!this._excluded.handlebars&&(e=e||this.__patterns.django_value.read()),this._excluded.django||(e=e||this.__patterns.django_comment.read(),e=e||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(e=e||this.__patterns.smarty_comment.read(),e=e||this.__patterns.smarty_literal.read(),e=e||this.__patterns.smarty.read()));return e};function Pn(e,t){return t.indexOf(e)!==-1}const T={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:_t.START,RAW:_t.RAW,EOF:_t.EOF};var Pi=new Nn(/\/\*/,/\*\//),js=/0[xX][0123456789abcdefABCDEF_]*[mMdDlLfFsSbB]?|0[oO][01234567_]*[mMdDlLfFsSbB]?|0[bB][01_]*[mMdDlLfFsSbB]?|\d[\d_]*[mMdDlLfFsSbB]|(?:\.\d[\d_]*|\d[\d_]*\.?[\d_]*)(?:[eE][+-]?[\d_]+)?/,Gs=/[0-9]/,Vs=/[^\d.]/;const Bt=">>> === !== << && >= ** != == <= >> || ?? |> < / - + > : & % ? ^ | *".split(" ");var pt=">>>= ... >>= <<= === >>> !== **= => -> ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";pt=pt.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&");pt="\\?\\.(?!\\d) "+pt;pt=pt.replace(/ /g,"|");var Hs=new RegExp(pt);const yt="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(",");var Ys=yt.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as"]),Ks=new RegExp("^(?:"+Ys.join("|")+")$"),Jt;const be=function(e,t){Be.call(this,e,t),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var n=new xe(this._input),i=new Fe(this._input).read_options(this._options);this.__patterns={template:i,identifier:i.starting_with(Li).matching(Ms),number:n.matching(js),punct:n.matching(Hs),comment:n.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:n.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:n.matching(/<!--/),html_comment_end:n.matching(/-->/),include:n.starting_with(/#include/).until_after(Mt),shebang:n.starting_with(/#!/).until_after(Mt),xml:n.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\]|)(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/),single_quote:i.until(/['\\\n\r\u2028\u2029]/),double_quote:i.until(/["\\\n\r\u2028\u2029]/),template_text:i.until(/[`\\$]/),template_expression:i.until(/[`}\\]/)}};be.prototype=new Be;be.prototype._is_comment=function(e){return e.type===T.COMMENT||e.type===T.BLOCK_COMMENT||e.type===T.UNKNOWN};be.prototype._is_opening=function(e){return e.type===T.START_BLOCK||e.type===T.START_EXPR};be.prototype._is_closing=function(e,t){return(e.type===T.END_BLOCK||e.type===T.END_EXPR)&&t&&(e.text==="]"&&t.text==="["||e.text===")"&&t.text==="("||e.text==="}"&&t.text==="{")};be.prototype._reset=function(){Jt=!1};be.prototype._get_next_token=function(e){var t=null;this._readWhitespace();var n=this._input.peek();return n===null?this._create_token(T.EOF,""):(t=t||this._read_non_javascript(n),t=t||this._read_multi_string(n),t=t||this._read_string(n),t=t||this._read_word(e),t=t||this._read_singles(n),t=t||this._read_comment(n),t=t||this._read_regexp(n,e),t=t||this._read_xml(n,e),t=t||this._read_punctuation(),t=t||this._create_token(T.UNKNOWN,this._input.next()),t)};be.prototype._read_word=function(e){var t;if(t=this.__patterns.identifier.read(),t!=="")return t=t.replace(Ut,`
`),!(e.type===T.DOT||e.type===T.RESERVED&&(e.text==="set"||e.text==="get"))&&Ks.test(t)?t==="in"||t==="of"?this._create_token(T.OPERATOR,t):this._create_token(T.RESERVED,t):this._create_token(T.WORD,t);if(t=this.__patterns.number.read(),t!=="")return this._create_token(T.WORD,t)};be.prototype._read_singles=function(e){var t=null;return e==="("||e==="["?t=this._create_token(T.START_EXPR,e):e===")"||e==="]"?t=this._create_token(T.END_EXPR,e):e==="{"?t=this._create_token(T.START_BLOCK,e):e==="}"?t=this._create_token(T.END_BLOCK,e):e===";"?t=this._create_token(T.SEMICOLON,e):e==="."&&Vs.test(this._input.peek(1))?t=this._create_token(T.DOT,e):e===","&&(t=this._create_token(T.COMMA,e)),t&&this._input.next(),t};be.prototype._read_punctuation=function(){var e=this.__patterns.punct.read();if(e!=="")return e==="="?this._create_token(T.EQUALS,e):e==="?."?this._create_token(T.DOT,e):this._create_token(T.OPERATOR,e)};be.prototype._read_non_javascript=function(e){var t="";if(e==="#"){if(this._is_first_token()&&(t=this.__patterns.shebang.read(),t))return this._create_token(T.UNKNOWN,t.trim()+`
`);if(t=this.__patterns.include.read(),t)return this._create_token(T.UNKNOWN,t.trim()+`
`);e=this._input.next();var n="#";if(this._input.hasNext()&&this._input.testChar(Gs)){do e=this._input.next(),n+=e;while(this._input.hasNext()&&e!=="#"&&e!=="=");return e==="#"||(this._input.peek()==="["&&this._input.peek(1)==="]"?(n+="[]",this._input.next(),this._input.next()):this._input.peek()==="{"&&this._input.peek(1)==="}"&&(n+="{}",this._input.next(),this._input.next())),this._create_token(T.WORD,n)}this._input.back()}else if(e==="<"&&this._is_first_token()){if(t=this.__patterns.html_comment_start.read(),t){for(;this._input.hasNext()&&!this._input.testChar($t);)t+=this._input.next();return Jt=!0,this._create_token(T.COMMENT,t)}}else if(Jt&&e==="-"&&(t=this.__patterns.html_comment_end.read(),t))return Jt=!1,this._create_token(T.COMMENT,t);return null};be.prototype._read_comment=function(e){var t=null;if(e==="/"){var n="";if(this._input.peek(1)==="*"){n=this.__patterns.block_comment.read();var i=Pi.get_directives(n);i&&i.ignore==="start"&&(n+=Pi.readIgnored(this._input)),n=n.replace(Ut,`
`),t=this._create_token(T.BLOCK_COMMENT,n),t.directives=i}else this._input.peek(1)==="/"&&(n=this.__patterns.comment.read(),t=this._create_token(T.COMMENT,n))}return t};be.prototype._read_multi_string=function(){if(this._input.match(/"""/g)){let e=this._input.readUntilAfter(/"""/g);return this._create_token(T.STRING,'"""'+e)}return null};be.prototype._read_string=function(e){if(e==="`"||e==="'"||e==='"'){var t=this._input.next();return this.has_char_escapes=!1,e==="`"?t+=this._read_string_recursive("`",!0,"${"):t+=this._read_string_recursive(e),this.has_char_escapes&&this._options.unescape_strings&&(t=Ws(t)),this._input.peek()===e&&(t+=this._input.next()),t=t.replace(Ut,`
`),this._create_token(T.STRING,t)}return null};be.prototype._allow_regexp_or_xml=function(e){return e.type===T.RESERVED&&Pn(e.text,["return","case","throw","else","do","typeof","yield"])||e.type===T.END_EXPR&&e.text===")"&&e.opened.previous.type===T.RESERVED&&Pn(e.opened.previous.text,["if","while","for"])||Pn(e.type,[T.COMMENT,T.START_EXPR,T.START_BLOCK,T.START,T.END_BLOCK,T.OPERATOR,T.EQUALS,T.EOF,T.SEMICOLON,T.COMMA])};be.prototype._read_regexp=function(e,t){if(e==="/"&&this._allow_regexp_or_xml(t)){for(var n=this._input.next(),i=!1,a=!1;this._input.hasNext()&&(i||a||this._input.peek()!==e)&&!this._input.testChar($t);)n+=this._input.peek(),i?i=!1:(i=this._input.peek()==="\\",this._input.peek()==="["?a=!0:this._input.peek()==="]"&&(a=!1)),this._input.next();return this._input.peek()===e&&(n+=this._input.next(),n+=this._input.read(Li)),this._create_token(T.STRING,n)}return null};be.prototype._read_xml=function(e,t){if(this._options.e4x&&e==="<"&&this._allow_regexp_or_xml(t)){var n="",i=this.__patterns.xml.read_match();if(i){for(var a=i[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),s=a.indexOf("{")===0,o=0;i;){var r=!!i[1],l=i[2],u=!!i[i.length-1]||l.slice(0,8)==="![CDATA[";if(!u&&(l===a||s&&l.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(r?--o:++o),n+=i[0],o<=0)break;i=this.__patterns.xml.read_match()}return i||(n+=this._input.match(/[\s\S]*/g)[0]),n=n.replace(Ut,`
`),this._create_token(T.STRING,n)}}return null};function Ws(e){for(var t="",n=0,i=new Te(e),a=null;i.hasNext();)if(a=i.match(/([\s]|[^\\]|\\\\)+/g),a&&(t+=a[0]),i.peek()==="\\"){if(i.next(),i.peek()==="x")a=i.match(/x([0-9A-Fa-f]{2})/g);else if(i.peek()==="u")a=i.match(/u([0-9A-Fa-f]{4})/g);else{t+="\\",i.hasNext()&&(t+=i.next());continue}if(!a||(n=parseInt(a[1],16),n>126&&n<=255&&a[0].indexOf("x")===0))return e;if(n>=0&&n<32){t+="\\"+a[0];continue}else n===34||n===39||n===92?t+="\\"+String.fromCharCode(n):t+=String.fromCharCode(n)}return t}be.prototype._read_string_recursive=function(e,t,n){var i,a;e==="'"?a=this.__patterns.single_quote:e==='"'?a=this.__patterns.double_quote:e==="`"?a=this.__patterns.template_text:e==="}"&&(a=this.__patterns.template_expression);for(var s=a.read(),o="";this._input.hasNext();){if(o=this._input.next(),o===e||!t&&$t.test(o)){this._input.back();break}else o==="\\"&&this._input.hasNext()?(i=this._input.peek(),i==="x"||i==="u"?this.has_char_escapes=!0:i==="\r"&&this._input.peek(1)===`
`&&this._input.next(),o+=this._input.next()):n&&(n==="${"&&o==="$"&&this._input.peek()==="{"&&(o+=this._input.next()),n===o&&(e==="`"?o+=this._read_string_recursive("}",t,"`"):o+=this._read_string_recursive("`",t,"${"),this._input.hasNext()&&(o+=this._input.next())));o+=a.read(),s+=o}return s};function Z(e,t){return t.indexOf(e)!==-1}function qs(e){return e.replace(/^\s+/g,"")}function Xs(e){for(var t={},n=0;n<e.length;n++)t[e[n].replace(/-/g,"_")]=e[n];return t}function Me(e,t){return e&&e.type===T.RESERVED&&e.text===t}function le(e,t){return e&&e.type===T.RESERVED&&Z(e.text,t)}var Qt=["case","return","do","if","throw","else","await","break","continue","async"],zs=["before-newline","after-newline","preserve-newline"],Ft=Xs(zs),wi=[Ft.before_newline,Ft.preserve_newline],H={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};function Di(e,t){t.multiline_frame||t.mode===H.ForInitializer||t.mode===H.Conditional||e.remove_indent(t.start_line_index)}function Js(e){e=e.replace(Ut,`
`);for(var t=[],n=e.indexOf(`
`);n!==-1;)t.push(e.substring(0,n)),e=e.substring(n+1),n=e.indexOf(`
`);return e.length&&t.push(e),t}function st(e){return e===H.ArrayLiteral}function jt(e){return Z(e,[H.Expression,H.ForInitializer,H.Conditional])}function Qs(e,t){for(var n=0;n<e.length;n++){var i=e[n].trim();if(i.charAt(0)!==t)return!1}return!0}function Zs(e,t){for(var n=0,i=e.length,a;n<i;n++)if(a=e[n],a&&a.indexOf(t)!==0)return!1;return!0}function ae(e,t){t=t||{},this._source_text=e||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new Ni(t)}ae.prototype.create_flags=function(e,t){var n=0;e&&(n=e.indentation_level,!this._output.just_added_newline()&&e.line_indent_level>n&&(n=e.line_indent_level));var i={mode:t,parent:e,last_token:e?e.last_token:new Cn(T.START_BLOCK,""),last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,case_block:!1,indentation_level:n,alignment:0,line_indent_level:e?e.line_indent_level:n,start_line_index:this._output.get_line_number(),ternary_depth:0};return i};ae.prototype._reset=function(e){var t=e.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new Ee(this._options,t),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(H.BlockStatement);var n=new be(e,this._options);return this._tokens=n.tokenize(),e};ae.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var e,t=this._reset(this._source_text),n=this._options.eol;this._options.eol==="auto"&&(n=`
`,t&&Mt.test(t||"")&&(n=t.match(Mt)[0]));for(var i=this._tokens.next();i;)this.handle_token(i),this._last_last_text=this._flags.last_token.text,this._flags.last_token=i,i=this._tokens.next();return e=this._output.get_code(n),e};ae.prototype.handle_token=function(e,t){e.type===T.START_EXPR?this.handle_start_expr(e):e.type===T.END_EXPR?this.handle_end_expr(e):e.type===T.START_BLOCK?this.handle_start_block(e):e.type===T.END_BLOCK?this.handle_end_block(e):e.type===T.WORD?this.handle_word(e):e.type===T.RESERVED?this.handle_word(e):e.type===T.SEMICOLON?this.handle_semicolon(e):e.type===T.STRING?this.handle_string(e):e.type===T.EQUALS?this.handle_equals(e):e.type===T.OPERATOR?this.handle_operator(e):e.type===T.COMMA?this.handle_comma(e):e.type===T.BLOCK_COMMENT?this.handle_block_comment(e,t):e.type===T.COMMENT?this.handle_comment(e,t):e.type===T.DOT?this.handle_dot(e):e.type===T.EOF?this.handle_eof(e):e.type===T.UNKNOWN?this.handle_unknown(e,t):this.handle_unknown(e,t)};ae.prototype.handle_whitespace_and_comments=function(e,t){var n=e.newlines,i=this._options.keep_array_indentation&&st(this._flags.mode);if(e.comments_before)for(var a=e.comments_before.next();a;)this.handle_whitespace_and_comments(a,t),this.handle_token(a,t),a=e.comments_before.next();if(i)for(var s=0;s<n;s+=1)this.print_newline(s>0,t);else if(this._options.max_preserve_newlines&&n>this._options.max_preserve_newlines&&(n=this._options.max_preserve_newlines),this._options.preserve_newlines&&n>1){this.print_newline(!1,t);for(var o=1;o<n;o+=1)this.print_newline(!0,t)}};var wn=["async","break","continue","return","throw","yield"];ae.prototype.allow_wrap_or_preserved_newline=function(e,t){if(t=t===void 0?!1:t,!this._output.just_added_newline()){var n=this._options.preserve_newlines&&e.newlines||t,i=Z(this._flags.last_token.text,Bt)||Z(e.text,Bt);if(i){var a=Z(this._flags.last_token.text,Bt)&&Z(this._options.operator_position,wi)||Z(e.text,Bt);n=n&&a}if(n)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(le(this._flags.last_token,wn))return;this._output.set_wrap_point()}}};ae.prototype.print_newline=function(e,t){if(!t&&this._flags.last_token.text!==";"&&this._flags.last_token.text!==","&&this._flags.last_token.text!=="="&&(this._flags.last_token.type!==T.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++"))for(var n=this._tokens.peek();this._flags.mode===H.Statement&&!(this._flags.if_block&&Me(n,"else"))&&!this._flags.do_block;)this.restore_mode();this._output.add_new_line(e)&&(this._flags.multiline_frame=!0)};ae.prototype.print_token_line_indentation=function(e){this._output.just_added_newline()&&(this._options.keep_array_indentation&&e.newlines&&(e.text==="["||st(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(e.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))};ae.prototype.print_token=function(e){if(this._output.raw){this._output.add_raw_token(e);return}if(this._options.comma_first&&e.previous&&e.previous.type===T.COMMA&&this._output.just_added_newline()&&this._output.previous_line.last()===","){var t=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(t),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(e),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(e),this._output.non_breaking_space=!0,this._output.add_token(e.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)};ae.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)};ae.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))};ae.prototype.set_mode=function(e){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,e),this._flags=this.create_flags(this._previous_flags,e),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)};ae.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===H.Statement&&Di(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))};ae.prototype.start_of_object_property=function(){return this._flags.parent.mode===H.ObjectLiteral&&this._flags.mode===H.Statement&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||le(this._flags.last_token,["get","set"]))};ae.prototype.start_of_statement=function(e){var t=!1;return t=t||le(this._flags.last_token,["var","let","const"])&&e.type===T.WORD,t=t||Me(this._flags.last_token,"do"),t=t||!(this._flags.parent.mode===H.ObjectLiteral&&this._flags.mode===H.Statement)&&le(this._flags.last_token,wn)&&!e.newlines,t=t||Me(this._flags.last_token,"else")&&!(Me(e,"if")&&!e.comments_before),t=t||this._flags.last_token.type===T.END_EXPR&&(this._previous_flags.mode===H.ForInitializer||this._previous_flags.mode===H.Conditional),t=t||this._flags.last_token.type===T.WORD&&this._flags.mode===H.BlockStatement&&!this._flags.in_case&&!(e.text==="--"||e.text==="++")&&this._last_last_text!=="function"&&e.type!==T.WORD&&e.type!==T.RESERVED,t=t||this._flags.mode===H.ObjectLiteral&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||le(this._flags.last_token,["get","set"])),t?(this.set_mode(H.Statement),this.indent(),this.handle_whitespace_and_comments(e,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e,le(e,["do","for","if","while"])),!0):!1};ae.prototype.handle_start_expr=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e);var t=H.Expression;if(e.text==="["){if(this._flags.last_token.type===T.WORD||this._flags.last_token.text===")"){le(this._flags.last_token,yt)&&(this._output.space_before_token=!0),this.print_token(e),this.set_mode(t),this.indent(),this._options.space_in_paren&&(this._output.space_before_token=!0);return}t=H.ArrayLiteral,st(this._flags.mode)&&(this._flags.last_token.text==="["||this._flags.last_token.text===","&&(this._last_last_text==="]"||this._last_last_text==="}"))&&(this._options.keep_array_indentation||this.print_newline()),Z(this._flags.last_token.type,[T.START_EXPR,T.END_EXPR,T.WORD,T.OPERATOR,T.DOT])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===T.RESERVED)this._flags.last_token.text==="for"?(this._output.space_before_token=this._options.space_before_conditional,t=H.ForInitializer):Z(this._flags.last_token.text,["if","while","switch"])?(this._output.space_before_token=this._options.space_before_conditional,t=H.Conditional):Z(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:this._flags.last_token.text==="import"&&e.whitespace_before===""?this._output.space_before_token=!1:(Z(this._flags.last_token.text,yt)||this._flags.last_token.text==="catch")&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===T.EQUALS||this._flags.last_token.type===T.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e);else if(this._flags.last_token.type===T.WORD){this._output.space_before_token=!1;var n=this._tokens.peek(-3);if(this._options.space_after_named_function&&n){var i=this._tokens.peek(-4);le(n,["async","function"])||n.text==="*"&&le(i,["async","function"])?this._output.space_before_token=!0:this._flags.mode===H.ObjectLiteral&&(n.text==="{"||n.text===","||n.text==="*"&&(i.text==="{"||i.text===","))&&(this._output.space_before_token=!0)}}else this.allow_wrap_or_preserved_newline(e);(this._flags.last_token.type===T.RESERVED&&(this._flags.last_word==="function"||this._flags.last_word==="typeof")||this._flags.last_token.text==="*"&&(Z(this._last_last_text,["function","yield"])||this._flags.mode===H.ObjectLiteral&&Z(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}this._flags.last_token.text===";"||this._flags.last_token.type===T.START_BLOCK?this.print_newline():(this._flags.last_token.type===T.END_EXPR||this._flags.last_token.type===T.START_EXPR||this._flags.last_token.type===T.END_BLOCK||this._flags.last_token.text==="."||this._flags.last_token.type===T.COMMA)&&this.allow_wrap_or_preserved_newline(e,e.newlines),this.print_token(e),this.set_mode(t),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()};ae.prototype.handle_end_expr=function(e){for(;this._flags.mode===H.Statement;)this.restore_mode();this.handle_whitespace_and_comments(e),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(e,e.text==="]"&&st(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type===T.START_EXPR&&!this._options.space_in_empty_paren?(this._output.trim(),this._output.space_before_token=!1):this._output.space_before_token=!0),this.deindent(),this.print_token(e),this.restore_mode(),Di(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===H.Conditional&&(this._previous_flags.mode=H.Expression,this._flags.do_block=!1,this._flags.do_while=!1)};ae.prototype.handle_start_block=function(e){this.handle_whitespace_and_comments(e);var t=this._tokens.peek(),n=this._tokens.peek(1);this._flags.last_word==="switch"&&this._flags.last_token.type===T.END_EXPR?(this.set_mode(H.BlockStatement),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(H.BlockStatement):n&&(Z(n.text,[":",","])&&Z(t.type,[T.STRING,T.WORD,T.RESERVED])||Z(t.text,["get","set","..."])&&Z(n.type,[T.WORD,T.RESERVED]))?Z(this._last_last_text,["class","interface"])?this.set_mode(H.BlockStatement):this.set_mode(H.ObjectLiteral):this._flags.last_token.type===T.OPERATOR&&(this._flags.last_token.text==="=>"||this._flags.last_token.text==="->")?this.set_mode(H.BlockStatement):Z(this._flags.last_token.type,[T.EQUALS,T.START_EXPR,T.COMMA,T.OPERATOR])||le(this._flags.last_token,["return","throw","import","default"])?this.set_mode(H.ObjectLiteral):this.set_mode(H.BlockStatement);var i=!t.comments_before&&t.text==="}",a=i&&this._flags.last_word==="function"&&this._flags.last_token.type===T.END_EXPR;if(this._options.brace_preserve_inline){var s=0,o=null;this._flags.inline_frame=!0;do if(s+=1,o=this._tokens.peek(s-1),o.newlines){this._flags.inline_frame=!1;break}while(o.type!==T.EOF&&!(o.type===T.END_BLOCK&&o.opened===e))}(this._options.brace_style==="expand"||this._options.brace_style==="none"&&e.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==T.OPERATOR&&(a||this._flags.last_token.type===T.EQUALS||le(this._flags.last_token,Qt)&&this._flags.last_token.text!=="else")?this._output.space_before_token=!0:this.print_newline(!1,!0):(st(this._previous_flags.mode)&&(this._flags.last_token.type===T.START_EXPR||this._flags.last_token.type===T.COMMA)&&((this._flags.last_token.type===T.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===T.COMMA||this._flags.last_token.type===T.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(e),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==T.OPERATOR&&this._flags.last_token.type!==T.START_EXPR&&(this._flags.last_token.type===T.START_BLOCK&&!this._flags.inline_frame?this.print_newline():this._output.space_before_token=!0)),this.print_token(e),this.indent(),!i&&!(this._options.brace_preserve_inline&&this._flags.inline_frame)&&this.print_newline()};ae.prototype.handle_end_block=function(e){for(this.handle_whitespace_and_comments(e);this._flags.mode===H.Statement;)this.restore_mode();var t=this._flags.last_token.type===T.START_BLOCK;this._flags.inline_frame&&!t?this._output.space_before_token=!0:this._options.brace_style==="expand"?t||this.print_newline():t||(st(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(e)};ae.prototype.handle_word=function(e){if(e.type===T.RESERVED){if(Z(e.text,["set","get"])&&this._flags.mode!==H.ObjectLiteral)e.type=T.WORD;else if(e.text==="import"&&this._tokens.peek().text==="(")e.type=T.WORD;else if(Z(e.text,["as","from"])&&!this._flags.import_block)e.type=T.WORD;else if(this._flags.mode===H.ObjectLiteral){var t=this._tokens.peek();t.text===":"&&(e.type=T.WORD)}}if(this.start_of_statement(e)?le(this._flags.last_token,["var","let","const"])&&e.type===T.WORD&&(this._flags.declaration_statement=!0):e.newlines&&!jt(this._flags.mode)&&(this._flags.last_token.type!==T.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++")&&this._flags.last_token.type!==T.EQUALS&&(this._options.preserve_newlines||!le(this._flags.last_token,["var","let","const","set","get"]))?(this.handle_whitespace_and_comments(e),this.print_newline()):this.handle_whitespace_and_comments(e),this._flags.do_block&&!this._flags.do_while)if(Me(e,"while")){this._output.space_before_token=!0,this.print_token(e),this._output.space_before_token=!0,this._flags.do_while=!0;return}else this.print_newline(),this._flags.do_block=!1;if(this._flags.if_block)if(!this._flags.else_block&&Me(e,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===H.Statement;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&le(e,["case","default"])){this.print_newline(),!this._flags.case_block&&(this._flags.case_body||this._options.jslint_happy)&&this.deindent(),this._flags.case_body=!1,this.print_token(e),this._flags.in_case=!0;return}if((this._flags.last_token.type===T.COMMA||this._flags.last_token.type===T.START_EXPR||this._flags.last_token.type===T.EQUALS||this._flags.last_token.type===T.OPERATOR)&&(this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e)),Me(e,"function")){(Z(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!(Z(this._flags.last_token.text,["(","[","{",":","=",","])||this._flags.last_token.type===T.OPERATOR))&&!this._output.just_added_blankline()&&!e.comments_before&&(this.print_newline(),this.print_newline(!0)),this._flags.last_token.type===T.RESERVED||this._flags.last_token.type===T.WORD?le(this._flags.last_token,["get","set","new","export"])||le(this._flags.last_token,wn)?this._output.space_before_token=!0:Me(this._flags.last_token,"default")&&this._last_last_text==="export"?this._output.space_before_token=!0:this._flags.last_token.text==="declare"?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===T.OPERATOR||this._flags.last_token.text==="="?this._output.space_before_token=!0:!this._flags.multiline_frame&&(jt(this._flags.mode)||st(this._flags.mode))||this.print_newline(),this.print_token(e),this._flags.last_word=e.text;return}var n="NONE";if(this._flags.last_token.type===T.END_BLOCK?this._previous_flags.inline_frame?n="SPACE":le(e,["else","catch","finally","from"])?this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&e.newlines?n="NEWLINE":(n="SPACE",this._output.space_before_token=!0):n="NEWLINE":this._flags.last_token.type===T.SEMICOLON&&this._flags.mode===H.BlockStatement?n="NEWLINE":this._flags.last_token.type===T.SEMICOLON&&jt(this._flags.mode)||this._flags.last_token.type===T.STRING||this._flags.last_token.type===T.RESERVED||this._flags.last_token.type===T.WORD||this._flags.last_token.text==="*"&&(Z(this._last_last_text,["function","yield"])||this._flags.mode===H.ObjectLiteral&&Z(this._last_last_text,["{",","]))?n="SPACE":this._flags.last_token.type===T.START_BLOCK?this._flags.inline_frame?n="SPACE":n="NEWLINE":this._flags.last_token.type===T.END_EXPR&&(this._output.space_before_token=!0,n="NEWLINE"),le(e,yt)&&this._flags.last_token.text!==")"&&(this._flags.inline_frame||this._flags.last_token.text==="else"||this._flags.last_token.text==="export"?n="SPACE":n="NEWLINE"),le(e,["else","catch","finally"]))if((!(this._flags.last_token.type===T.END_BLOCK&&this._previous_flags.mode===H.BlockStatement)||this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&e.newlines)&&!this._flags.inline_frame)this.print_newline();else{this._output.trim(!0);var i=this._output.current_line;i.last()!=="}"&&this.print_newline(),this._output.space_before_token=!0}else n==="NEWLINE"?le(this._flags.last_token,Qt)?this._output.space_before_token=!0:this._flags.last_token.text==="declare"&&le(e,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==T.END_EXPR?(this._flags.last_token.type!==T.START_EXPR||!le(e,["var","let","const"]))&&this._flags.last_token.text!==":"&&(Me(e,"if")&&Me(e.previous,"else")?this._output.space_before_token=!0:this.print_newline()):le(e,yt)&&this._flags.last_token.text!==")"&&this.print_newline():this._flags.multiline_frame&&st(this._flags.mode)&&this._flags.last_token.text===","&&this._last_last_text==="}"?this.print_newline():n==="SPACE"&&(this._output.space_before_token=!0);e.previous&&(e.previous.type===T.WORD||e.previous.type===T.RESERVED)&&(this._output.space_before_token=!0),this.print_token(e),this._flags.last_word=e.text,e.type===T.RESERVED&&(e.text==="do"?this._flags.do_block=!0:e.text==="if"?this._flags.if_block=!0:e.text==="import"?this._flags.import_block=!0:this._flags.import_block&&Me(e,"from")&&(this._flags.import_block=!1))};ae.prototype.handle_semicolon=function(e){this.start_of_statement(e)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(e);for(var t=this._tokens.peek();this._flags.mode===H.Statement&&!(this._flags.if_block&&Me(t,"else"))&&!this._flags.do_block;)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(e)};ae.prototype.handle_string=function(e){e.text.startsWith("`")&&e.newlines===0&&e.whitespace_before===""&&(e.previous.text===")"||this._flags.last_token.type===T.WORD)||(this.start_of_statement(e)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(e),this._flags.last_token.type===T.RESERVED||this._flags.last_token.type===T.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===T.COMMA||this._flags.last_token.type===T.START_EXPR||this._flags.last_token.type===T.EQUALS||this._flags.last_token.type===T.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e):e.text.startsWith("`")&&this._flags.last_token.type===T.END_EXPR&&(e.previous.text==="]"||e.previous.text===")")&&e.newlines===0?this._output.space_before_token=!0:this.print_newline())),this.print_token(e)};ae.prototype.handle_equals=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(e),this._output.space_before_token=!0};ae.prototype.handle_comma=function(e){this.handle_whitespace_and_comments(e,!0),this.print_token(e),this._output.space_before_token=!0,this._flags.declaration_statement?(jt(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(e)):this._flags.mode===H.ObjectLiteral||this._flags.mode===H.Statement&&this._flags.parent.mode===H.ObjectLiteral?(this._flags.mode===H.Statement&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(e)};ae.prototype.handle_operator=function(e){var t=e.text==="*"&&(le(this._flags.last_token,["function","yield"])||Z(this._flags.last_token.type,[T.START_BLOCK,T.COMMA,T.END_BLOCK,T.SEMICOLON])),n=Z(e.text,["-","+"])&&(Z(this._flags.last_token.type,[T.START_BLOCK,T.START_EXPR,T.EQUALS,T.OPERATOR])||Z(this._flags.last_token.text,yt)||this._flags.last_token.text===",");if(!this.start_of_statement(e)){var i=!t;this.handle_whitespace_and_comments(e,i)}if(le(this._flags.last_token,Qt)){this._output.space_before_token=!0,this.print_token(e);return}if(e.text==="*"&&this._flags.last_token.type===T.DOT){this.print_token(e);return}if(e.text==="::"){this.print_token(e);return}if(this._flags.last_token.type===T.OPERATOR&&Z(this._options.operator_position,wi)&&this.allow_wrap_or_preserved_newline(e),e.text===":"&&this._flags.in_case){this.print_token(e),this._flags.in_case=!1,this._flags.case_body=!0,this._tokens.peek().type!==T.START_BLOCK?(this.indent(),this.print_newline(),this._flags.case_block=!1):(this._flags.case_block=!0,this._output.space_before_token=!0);return}var a=!0,s=!0,o=!1;if(e.text===":"?this._flags.ternary_depth===0?a=!1:(this._flags.ternary_depth-=1,o=!0):e.text==="?"&&(this._flags.ternary_depth+=1),!n&&!t&&this._options.preserve_newlines&&Z(e.text,Bt)){var r=e.text===":",l=r&&o,u=r&&!o;switch(this._options.operator_position){case Ft.before_newline:this._output.space_before_token=!u,this.print_token(e),(!r||l)&&this.allow_wrap_or_preserved_newline(e),this._output.space_before_token=!0;return;case Ft.after_newline:this._output.space_before_token=!0,!r||l?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(e):this._output.space_before_token=!1,this.print_token(e),this._output.space_before_token=!0;return;case Ft.preserve_newline:u||this.allow_wrap_or_preserved_newline(e),a=!(this._output.just_added_newline()||u),this._output.space_before_token=a,this.print_token(e),this._output.space_before_token=!0;return}}if(t){this.allow_wrap_or_preserved_newline(e),a=!1;var c=this._tokens.peek();s=c&&Z(c.type,[T.WORD,T.RESERVED])}else e.text==="..."?(this.allow_wrap_or_preserved_newline(e),a=this._flags.last_token.type===T.START_BLOCK,s=!1):(Z(e.text,["--","++","!","~"])||n)&&((this._flags.last_token.type===T.COMMA||this._flags.last_token.type===T.START_EXPR)&&this.allow_wrap_or_preserved_newline(e),a=!1,s=!1,e.newlines&&(e.text==="--"||e.text==="++"||e.text==="~")&&this.print_newline(!1,!0),this._flags.last_token.text===";"&&jt(this._flags.mode)&&(a=!0),this._flags.last_token.type===T.RESERVED?a=!0:this._flags.last_token.type===T.END_EXPR?a=!(this._flags.last_token.text==="]"&&(e.text==="--"||e.text==="++")):this._flags.last_token.type===T.OPERATOR&&(a=Z(e.text,["--","-","++","+"])&&Z(this._flags.last_token.text,["--","-","++","+"]),Z(e.text,["+","-"])&&Z(this._flags.last_token.text,["--","++"])&&(s=!0)),(this._flags.mode===H.BlockStatement&&!this._flags.inline_frame||this._flags.mode===H.Statement)&&(this._flags.last_token.text==="{"||this._flags.last_token.text===";")&&this.print_newline());this._output.space_before_token=this._output.space_before_token||a,this.print_token(e),this._output.space_before_token=s};ae.prototype.handle_block_comment=function(e,t){if(this._output.raw){this._output.add_raw_token(e),e.directives&&e.directives.preserve==="end"&&(this._output.raw=this._options.test_output_raw);return}if(e.directives){this.print_newline(!1,t),this.print_token(e),e.directives.preserve==="start"&&(this._output.raw=!0),this.print_newline(!1,!0);return}if(!$t.test(e.text)&&!e.newlines){this._output.space_before_token=!0,this.print_token(e),this._output.space_before_token=!0;return}else this.print_block_commment(e,t)};ae.prototype.print_block_commment=function(e,t){var n=Js(e.text),i,a=!1,s=!1,o=e.whitespace_before,r=o.length;if(this.print_newline(!1,t),this.print_token_line_indentation(e),this._output.add_token(n[0]),this.print_newline(!1,t),n.length>1){for(n=n.slice(1),a=Qs(n,"*"),s=Zs(n,o),a&&(this._flags.alignment=1),i=0;i<n.length;i++)a?(this.print_token_line_indentation(e),this._output.add_token(qs(n[i]))):s&&n[i]?(this.print_token_line_indentation(e),this._output.add_token(n[i].substring(r))):(this._output.current_line.set_indent(-1),this._output.add_token(n[i])),this.print_newline(!1,t);this._flags.alignment=0}};ae.prototype.handle_comment=function(e,t){e.newlines?this.print_newline(!1,t):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(e),this.print_newline(!1,t)};ae.prototype.handle_dot=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e,!0),le(this._flags.last_token,Qt)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(e,this._flags.last_token.text===")"&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(e)};ae.prototype.handle_unknown=function(e,t){this.print_token(e),e.text[e.text.length-1]===`
`&&this.print_newline(!1,t)};ae.prototype.handle_eof=function(e){for(;this._flags.mode===H.Statement;)this.restore_mode();this.handle_whitespace_and_comments(e)};const eo=()=>{Ps();const e="magicscript";W.register({id:e}),W.setLanguageConfiguration(e,{wordPattern:/(-?\d*\.\d\w*)|([^`~!#%^&*()\-=+[{\]}\\|;:'",.<>/?\s]+)/g,brackets:[["{","}"],["[","]"],["(",")"]],onEnterRules:[{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,afterText:/^\s*\*\/$/,action:{indentAction:W.IndentAction.IndentOutdent,appendText:" * "}},{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,action:{indentAction:W.IndentAction.None,appendText:" * "}},{beforeText:/^(\t|(\ \ ))*\ \*(\ ([^\*]|\*(?!\/))*)?$/,action:{indentAction:W.IndentAction.None,appendText:"* "}},{beforeText:/^(\t|(\ \ ))*\ \*\/\s*$/,action:{indentAction:W.IndentAction.None,removeText:1}}],comments:{lineComment:"//",blockComment:["/*","*/"]},operators:["<=",">=","==","!=","+","-","*","/","%","&","|","!","&&","||","?",":","++","--","+=","-=","*=","/="],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"""',close:'"""',notIn:["string.multi"]},{open:"<where>",close:"</where>"},{open:"<if",close:' test=""></if>'},{open:"<set>",close:"</set>"},{open:"<foreach",close:' collection=""></foreach>'},{open:'"',close:'"',notIn:["string"]},{open:"'",close:"'",notIn:["string"]},{open:"/**",close:" */",notIn:["string"]}]}),W.setMonarchTokensProvider(e,pn),W.registerCompletionItemProvider(e,xs),W.registerFoldingRangeProvider(e,Ls),W.registerSignatureHelpProvider(e,Ns),W.registerHoverProvider(e,ks),W.registerDocumentFormattingEditProvider(e,{provideDocumentFormattingEdits(t,n,i){return[{text:new ae(t.getValue()).beautify(),range:t.getFullModelRange()}]}})};function Se(e,t,n){var i={debug:!1,automaticOpen:!0,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:2e3,maxReconnectAttempts:null,binaryType:"blob"};n||(n={});for(var a in i)typeof n[a]!="undefined"?this[a]=n[a]:this[a]=i[a];this.url=e,this.reconnectAttempts=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var s=this,o,r=!1,l=!1,u=document.createElement("div");u.addEventListener("open",function(f){s.onopen(f)}),u.addEventListener("close",function(f){s.onclose(f)}),u.addEventListener("connecting",function(f){s.onconnecting(f)}),u.addEventListener("message",function(f){s.onmessage(f)}),u.addEventListener("error",function(f){s.onerror(f)}),this.addEventListener=u.addEventListener.bind(u),this.removeEventListener=u.removeEventListener.bind(u),this.dispatchEvent=u.dispatchEvent.bind(u);function c(f,m){var O=document.createEvent("CustomEvent");return O.initCustomEvent(f,!1,!1,m),O}this.open=function(f){if(o=new WebSocket(s.url,t||[]),o.binaryType=this.binaryType,f){if(this.maxReconnectAttempts&&this.reconnectAttempts>this.maxReconnectAttempts)return}else u.dispatchEvent(c("connecting")),this.reconnectAttempts=0;(s.debug||Se.debugAll)&&console.debug("ReconnectingWebSocket","attempt-connect",s.url);var m=o,O=setTimeout(function(){(s.debug||Se.debugAll)&&console.debug("ReconnectingWebSocket","connection-timeout",s.url),l=!0,m.close(),l=!1},s.timeoutInterval);o.onopen=function(b){clearTimeout(O),(s.debug||Se.debugAll)&&console.debug("ReconnectingWebSocket","onopen",s.url),s.protocol=o.protocol,s.readyState=WebSocket.OPEN,s.reconnectAttempts=0;var A=c("open");A.isReconnect=f,f=!1,u.dispatchEvent(A)},o.onclose=function(b){if(clearTimeout(h),o=null,r)s.readyState=WebSocket.CLOSED,u.dispatchEvent(c("close"));else{s.readyState=WebSocket.CONNECTING;var A=c("connecting");A.code=b.code,A.reason=b.reason,A.wasClean=b.wasClean,u.dispatchEvent(A),!f&&!l&&((s.debug||Se.debugAll)&&console.debug("ReconnectingWebSocket","onclose",s.url),u.dispatchEvent(c("close")));var h=s.reconnectInterval*Math.pow(s.reconnectDecay,s.reconnectAttempts);setTimeout(function(){s.reconnectAttempts++,s.open(!0)},h>s.maxReconnectInterval?s.maxReconnectInterval:h)}},o.onmessage=function(b){(s.debug||Se.debugAll)&&console.debug("ReconnectingWebSocket","onmessage",s.url,b.data);var A=c("message");A.data=b.data,u.dispatchEvent(A)},o.onerror=function(b){(s.debug||Se.debugAll)&&console.debug("ReconnectingWebSocket","onerror",s.url,b),u.dispatchEvent(c("error"))}},this.automaticOpen==!0&&this.open(!1),this.send=function(f){if(o)return(s.debug||Se.debugAll)&&console.debug("ReconnectingWebSocket","send",s.url,f),o.send(f);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(f,m){typeof f=="undefined"&&(f=1e3),r=!0,o&&o.close(f,m)},this.refresh=function(){o&&o.close()}}Se.prototype.onopen=function(e){};Se.prototype.onclose=function(e){};Se.prototype.onconnecting=function(e){};Se.prototype.onmessage=function(e){};Se.prototype.onerror=function(e){};Se.debugAll=!1;Se.CONNECTING=WebSocket.CONNECTING;Se.OPEN=WebSocket.OPEN;Se.CLOSING=WebSocket.CLOSING;Se.CLOSED=WebSocket.CLOSED;function Gt(e){this.listeners={},this.socket=new Se(e),this.socket.onmessage=this.messageReceived,this.socket.onconnecting=()=>{g.status("\u8FDE\u63A5\u8C03\u8BD5\u670D\u52A1\u5668...")},this.socket.onopen=()=>{g.status("\u8FDE\u63A5\u8C03\u8BD5\u670D\u52A1\u5668\u6210\u529F"),g.$emit("ws_open")},this.socket.onclose=()=>{g.status("\u8C03\u8BD5\u670D\u52A1\u5668\u5DF2\u65AD\u5F00"),g.$emit("ws_close")}}Gt.prototype.on=function(e,t){this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(t)};Gt.prototype.messageReceived=function(e){let t=e.data,n=t.indexOf(","),i=n===-1?t:t.substring(0,n),a=[];for(;n>-1;){if(t=t.substring(n+1),t.startsWith("[")||t.startsWith("{")){a.push(JSON.parse(t));break}n=t.indexOf(","),a.push(n===-1?t:t.substring(0,n))}g.$emit("ws_"+i,a)};Gt.prototype.send=function(e){this.socket.send(e)};Gt.prototype.close=function(){this.socket.close()};var Ae={OPEN:"open",BREAKPOINT:"breakpoint",LOGIN:"login",RESUME_BREAKPOINT:"resume_breakpoint",LOGIN_RESPONSE:"login_response",LOG:"log",LOGS:"logs",EXCEPTION:"exception",USER_LOGIN:"user_login",USER_LOGOUT:"user_logout",GET_ONLINE:"get_online",ONLINE_USERS:"online_users",SET_FILE_ID:"set_file_id",INTO_FILE_ID:"into_file_id"},D={DO_SAVE:"doSave",DO_TEST:"doTest",LOGINED:"logined",LOGOUT:"logout",DO_DOWNLOAD:"do-download",DO_UPLOAD:"do-upload",DO_PUSH:"do-push",DO_RECENT:"do-recent",OPEN:"open",SELECT_NAVBAR_BY_ITEM:"select-navbar-by-item",OPEN_WITH_ID:"open-with-id",OPEN_ITEM:"open-item",DELETE_FILE:"delete-file",DEBUG_CONTINUE:"debug-continue",DEBUG_SETPINTO:"debug-setpinto",SWITCH_THEME:"switch-theme",OPEN_GROUP:"open-group",SWITCH_TOOLBAR:"switch-toolbar",STATUS:"status",MESSAGE:"message",CLOSE:"close",OPEN_EMPTY:"open-empty",LOAD_RESOURCES:"load-resources",DO_SEARCH:"doSearch",NOTIFY:"notify",RELOAD_RESOURCES:"reload-resources",RELOAD_RESOURCES_FINISH:"reload-resources-finish",LOAD_RESOURCES_FINISH:"load-resources-finish"};const Dn="magic-";class to{constructor(){}set(t,n){(Array.isArray(n)||typeof n=="object")&&(n=JSON.stringify(n)),localStorage.setItem(`${Dn}${t}`,n)}remove(t){localStorage.removeItem(`${Dn}${t}`)}get(t){return localStorage.getItem(`${Dn}${t}`)}}var je=new to;const no=x("div",{class:"magic-mounts"},null,-1),io={props:{config:{type:Object,required:!0}},setup(e){const t=e;eo(),self.MonacoEnvironment={getWorker:function(h,d){return d==="json"?new Qi:new Zi}},t.config.header=t.config.header||{};const n=k(!1),i=k(null),a=k(null);tt("ELEMENT_ROOT",a),tt("activateUserFiles",k({}));let s=null;const o=t.config;w.BASE_URL=o.baseURL||"",w.SERVER_URL=o.serverURL||"";let r=`${location.protocol}//${location.host}${location.pathname}`.replace("/index.html","");w.BASE_URL.startsWith("http")?r=w.BASE_URL:w.BASE_URL.startsWith("/")?r=`${location.protocol}/${location.host}${w.BASE_URL}`:r=r+"/"+w.BASE_URL,Y.setBaseURL(w.BASE_URL),g.status("\u52A0\u8F7Dclasses\u4FE1\u606F..."),Promise.all([Q.initClasses(),Q.initImportClass()]).then(()=>g.status("classes\u4FE1\u606F\u52A0\u8F7D\u5B8C\u6BD5")).catch(h=>{g.status("classes\u4FE1\u606F\u52A0\u8F7D\u5931\u8D25")}).finally(()=>m);const l=t.config.options||[];tt("options",l),l.length===0&&Y.sendGet("/options").success(h=>{h.forEach(d=>l.push(d))});const u=()=>{w.LOGINED=!0,s=new Gt(ut(r.replace(/^http/,"ws")+"/console")),Ie(()=>i.value.loadResources())};g.$on(D.LOGINED,u);const c=()=>{fetch("https://img.shields.io/maven-metadata/v.json?label=maven-central&metadataUrl=https%3A%2F%2Frepo1.maven.org%2Fmaven2%2Forg%2Fssssssss%2Fmagic-api%2Fmaven-metadata.xml").then(h=>{h.status===200&&h.json().then(d=>{w.config.version!==d.value.replace("v","")?(g.status(`\u7248\u672C\u68C0\u6D4B\u5B8C\u6BD5\uFF0C\u6700\u65B0\u7248\u672C\u4E3A\uFF1A${d.value},\u5EFA\u8BAE\u66F4\u65B0\uFF01\uFF01`),d.value!==je.get(w.IGNORE_VERSION)&&g.$emit(D.NOTIFY,{title:"\u66F4\u65B0\u63D0\u793A",icon:"warning",content:`\u68C0\u6D4B\u5230\u5DF2\u6709\u65B0\u7248\u672C${d.value}\uFF0C\u662F\u5426\u66F4\u65B0\uFF1F`,buttons:[{title:"\u66F4\u65B0\u65E5\u5FD7",onClick:()=>{window.open("http://www.ssssssss.org/magic-api/changelog.html")}},{title:"\u4E0D\u518D\u63D0\u9192",onClick:()=>{je.set(w.IGNORE_VERSION,d.value)}}]})):g.status("\u7248\u672C\u68C0\u6D4B\u5B8C\u6BD5\uFF0C\u5F53\u524D\u5DF2\u662F\u6700\u65B0\u7248")})})},f=()=>{w.HEADER_MAGIC_TOKEN_VALUE=je.get(w.STORE.token)||w.HEADER_MAGIC_TOKEN_VALUE,g.status("\u5C1D\u8BD5\u81EA\u52A8\u767B\u5F55"),Y.sendPost("/login").success(h=>{h?(g.status("\u81EA\u52A8\u767B\u5F55\u6210\u529F"),g.$emit(D.LOGINED)):n.value=!0})},m=()=>{typeof hideMaLoading=="function"&&hideMaLoading()},O=()=>{Y.execute({url:"/config.json",method:"get"}).then(h=>{if(w.config=h.data,t.config.inJar&&location.href.indexOf(h.data.web)>-1){let d=location.href.substring(0,location.href.indexOf(h.data.web));w.SERVER_URL=ut(d+"/"+(h.data.prefix||""))}if(w.config.version&&w.config.version!==w.MAGIC_API_VERSION_TEXT){const d=`\u68C0\u6D4B\u5230\u524D\u540E\u7AEF\u7248\u672C\u4E0D\u4E00\u81F4\uFF08\u524D\u7AEF\uFF1A${w.MAGIC_API_VERSION_TEXT} \u540E\u7AEF\uFF1A${w.config.version}\uFF09\uFF0C\u8BF7\u68C0\u67E5`;g.status(d,!1),g.$emit(D.NOTIFY,{icon:"error",title:"\u7248\u672C\u68C0\u6D4B",content:d})}m(),f(),t.config.checkUpdate!==!1&&c()}).catch(h=>{console.error(h),m(),me.alert("\u52A0\u8F7D\u914D\u7F6E\u5931\u8D25","\u52A0\u8F7D\u914D\u7F6E\u5931\u8D25"),g.status("\u52A0\u8F7D\u914D\u7F6E\u5931\u8D25",!1)})},b=()=>{const h=document.body;oe.bind(h,oe.Ctrl|oe.S,()=>g.$emit(D.DO_SAVE,!0)),oe.bind(h,oe.Ctrl|oe.Q,()=>g.$emit(D.DO_TEST)),oe.bind(h,oe.Ctrl|oe.E,()=>g.$emit(D.DO_RECENT)),oe.bind(h,oe.F8,()=>g.$emit(D.DEBUG_CONTINUE)),oe.bind(h,oe.F6,()=>g.$emit(D.DEBUG_SETPINTO)),oe.bind(h,oe.Ctrl|oe.Shift|oe.F,()=>g.$emit(D.DO_SEARCH))};ht(()=>{b()}),Wi(()=>oe.unbind());const A=nt({});return cn("default",Ia),cn("dark",xa),qe.setTheme("default"),Object.keys(o.themes||{}).forEach(h=>{cn(h,o.themes[h])}),g.$on(D.MESSAGE,(h,d)=>{s&&(d?s.send(`${h},${d}`):s.send(h))}),g.$event(Ae.OPEN,()=>{w.CLIENT_ID=Ca(16),g.send(Ae.LOGIN,[w.HEADER_MAGIC_TOKEN_VALUE,w.CLIENT_ID].join(","))}),g.$event(Ae.LOGIN_RESPONSE,([h,d])=>{h==="1"&&(w.user=d)}),g.$on(D.LOGOUT,()=>{n.value=!0,s&&s.close(),s=null}),(h,d)=>{const S=v("magic-header"),I=v("magic-main"),y=v("magic-status-bar"),R=v("magic-login"),$=v("magic-notify");return E(),L("div",{class:"magic-editor",style:De(P(A)),onContextmenu:d[1]||(d[1]=ge(()=>{},["prevent"])),ref_key:"root",ref:a},[p(S,{themeStyle:P(A)},null,8,["themeStyle"]),p(I,{ref_key:"componentMain",ref:i,onOnLoad:O},null,512),p(y,{config:P(o)},null,8,["config"]),p(R,{value:n.value,"onUpdate:value":d[0]||(d[0]=q=>n.value=q)},null,8,["value"]),p($),no],36)}}};var ao=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:io});const so={class:"magic-empty"},oo={props:{text:{type:String,default:"\u65E0\u6570\u636E"}},setup(e){return(t,n)=>(E(),L("div",so,[x("p",null,j(e.text),1)]))}};var ro=V(oo,[["__scopeId","data-v-594aa0b8"]]),lo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ro});const uo={class:"icon"},co={props:{loading:Boolean,loadingText:{type:String,default:"\u52A0\u8F7D\u4E2D..."},style:Object},setup(e){return(t,n)=>{const i=v("magic-icon");return e.loading?(E(),L("div",{key:0,class:"magic-loading",style:De(e.style)},[x("p",null,[x("span",uo,[p(i,{icon:"refresh",size:"20px"})]),Ye(" "+j(e.loadingText),1)])],4)):ft(t.$slots,"default",{key:1},void 0,!0)}}};var _o=V(co,[["__scopeId","data-v-6d83fffa"]]),po=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:_o});const ho={props:{language:{type:String,required:!0},editorConfig:{type:Object,default:{}},value:Array},setup(){return{instance:null,instancePromise:null}},mounted(){this.instance=qe.createDiffEditor(this.$refs.editor,Ve(ce({},this.editorConfig),{enableSplitViewResizing:!1,language:this.language,minimap:{enabled:!1},folding:!1,lineDecorationsWidth:20,wordWrap:"on",fixedOverflowWidgets:!1,fontFamily:w.EDITOR_FONT_FAMILY,fontSize:w.EDITOR_FONT_SIZE,fontLigatures:!0,renderWhitespace:"none",theme:w.THEME,readOnly:this.readonly===!0,value:this.value||"",automaticLayout:!0})),this.instance.setModel({original:qe.createModel(this.value[0],this.language),modified:qe.createModel(this.value[1],this.language)})},methods:{getEditorDom(){return this.$refs.editor},getInstance(){return this.instance}},watch:{value(e){this.instance.setModel({original:qe.createModel(e[0],this.language),modified:qe.createModel(e[1],this.language)})}}},fo={class:"magic-monaco-editor",ref:"editor"};function mo(e,t,n,i,a,s){return E(),L("div",fo,null,512)}var go=V(ho,[["render",mo],["__scopeId","data-v-7c84fbe0"]]),vo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:go});const Eo={props:{language:{type:String,required:!0},editorConfig:{type:Object,default:{}},value:String,decorations:Array,readonly:{type:Boolean,default:!1},supportBreakpoint:{type:Boolean,default:!1},matches:String},setup(){return{instance:null,instancePromise:null}},emits:["update:value","change","update:decorations"],mounted(){this.instance=qe.create(this.$refs.editor,Ve(ce({},this.editorConfig),{language:this.language,minimap:{enabled:!1},folding:!0,lineDecorationsWidth:this.supportBreakpoint?35:void 0,wordWrap:"on",fontFamily:w.EDITOR_FONT_FAMILY,fontSize:w.EDITOR_FONT_SIZE,fontLigatures:!0,renderWhitespace:"none",theme:w.THEME,readOnly:this.readonly===!0,value:this.value||"",automaticLayout:!0})),this.instance.onDidChangeModelContent(e=>{this.$emit("update:value",this.instance.getValue()),this.$emit("change")}),this.instance.addAction({id:"editor.action.triggerSuggest.extension",label:"\u89E6\u53D1\u4EE3\u7801\u63D0\u793A",precondition:"!suggestWidgetVisible && !markersNavigationVisible && !parameterHintsVisible && !findWidgetVisible",run:()=>{this.instance.trigger(null,"editor.action.triggerSuggest",{})}}),qn.registerCommand("editor.action.scrollUp1Line",()=>{this.instance.setScrollTop(this.instance.getScrollTop()-22)}),this.instance.addCommand(lt.Alt|gt.US_SLASH,()=>{let e=this.instance.getAction("editor.action.triggerParameterHints"),t=this.instance.getAction("editor.action.triggerSuggest.extension");e.run().then(()=>{setTimeout(()=>{t.isSupported()&&t.run()},0)})},"!findWidgetVisible && !inreferenceSearchEditor && !editorHasSelection"),this.initKeys(),this.initDecorations()},methods:{getEditorDom(){return this.$refs.editor},match(){this.matches&&Ie(()=>{let e=this.instance.getModel().findMatches(this.matches);e&&e.length>0&&this.instance.setSelections(e.map(({range:t})=>({positionColumn:t.endColumn,positionLineNumber:t.endLineNumber,selectionStartColumn:t.startColumn,selectionStartLineNumber:t.startLineNumber})))})},initKeys(){[["editor.action.triggerParameterHints",lt.Alt|gt.US_SLASH],["editor.action.triggerSuggest",lt.Alt|gt.US_SLASH],["toggleSuggestionDetails",lt.Alt|gt.US_SLASH,ea.deserialize("suggestWidgetVisible && textInputFocus")],["editor.action.formatDocument",lt.CtrlCmd|lt.Alt|gt.KEY_L],["editor.action.marker.nextInFiles",lt.CtrlCmd|gt.F8]].forEach(t=>{var s;let n=t[0];const{handler:i,when:a}=(s=qn.getCommand(n))!=null?s:{};if(i){let o=rn._coreKeybindings.findIndex(r=>r.command===n);o>0&&rn._coreKeybindings.splice(o,1),this.instance._standaloneKeybindingService.addDynamicKeybinding(n,t[1],i,a||t[2])}}),rn._cachedMergedKeybindings=null},getInstance(){return this.instance},initDecorations(){this.instance.onMouseDown(e=>{if(!e.target.element.classList.contains("codicon")&&e.target.detail&&e.target.detail.offsetX&&e.target.detail.offsetX>=0&&e.target.detail.offsetX<=65){var t=e.target.position.lineNumber;if(this.instance.getModel().getLineContent(t).trim()==="")return;let i=this.instance.getLineDecorations(t).filter(a=>a.options.linesDecorationsClassName==="breakpoints");i&&i.length>0?this.instance.getModel().deltaDecorations([i[0].id],[]):this.instance.getModel().deltaDecorations([],[{range:new it(t,1,t,1),options:{isWholeLine:!0,linesDecorationsClassName:"breakpoints",className:"breakpoint-line"}}]),this.updateDecoration()}})},appendDecoration(e){const t=this.instance.deltaDecorations([],e);return this.updateDecoration(),t},removedDecorations(e){this.instance.deltaDecorations(e,[]),this.updateDecoration()},updateDecoration(){this.$emit("update:decorations",this.instance.getModel().getAllDecorations())}},watch:{value(e){e!==this.instance.getValue()&&(this.instance.setValue(e||""),this.match(),this.$emit("change"))},matches(){this.match()}}},To={class:"magic-monaco-editor",ref:"editor"};function bo(e,t,n,i,a,s){return E(),L("div",To,null,512)}var So=V(Eo,[["render",bo],["__scopeId","data-v-319cefd8"]]),yo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:So});const Oo={props:{max:Number,min:Number,direction:String,reverse:{type:Boolean,default:!1}},setup(e){return{style:k({[e.direction==="x"?"width":"height"]:e.min+"px"})}},mounted(){new ResizeObserver(this.updateCss).observe(this.$refs.resizer)},methods:{updateCss(){try{const e=this.$refs.resizer.parentElement;this.$refs.resizer.style.setProperty("--width",e.offsetWidth+"px"),this.$refs.resizer.style.setProperty("--height",e.offsetHeight+"px")}catch{}},mousedown(e){const t=this.direction==="x",n=t?e.clientX:e.clientY,i=e.target.parentElement.getBoundingClientRect();document.onmousemove=a=>{let s=t?i.width:i.height;t?this.reverse?s=n-a.clientX+i.width:s=a.clientX-n+i.width:this.reverse?s=a.clientY-n+i.height:s=n-a.clientY+i.height,s>=this.min&&s<=this.max&&(this.style[t?"width":"height"]=`${s}px`)},document.onmouseup=()=>{document.onmousemove=document.onmouseup=null},e.stopPropagation(),e.preventDefault()}}};function Ao(e,t,n,i,a,s){return E(),L("div",{class:de(`magic-resizer-${this.direction}`),style:De(i.style)},[ft(e.$slots,"default",{},void 0,!0),x("div",{class:de(["magic-resizer-event",{reverse:n.reverse}]),onMousedown:t[0]||(t[0]=(...o)=>s.mousedown&&s.mousedown(...o)),ref:"resizer"},null,34)],6)}var Ro=V(Oo,[["render",Ao],["__scopeId","data-v-7de8c22c"]]),Io=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ro});const xo={props:{info:Object},setup(e){return(t,n)=>null}};var Co=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:xo});const $n=e=>(Ke("data-v-4b164a55"),e=e(),We(),e),Lo={class:"magic-function-info"},No=$n(()=>x("label",null,"\u8FD4\u56DE\u503C",-1)),ko=$n(()=>x("label",null,"\u51FD\u6570\u540D\u79F0",-1)),Po=$n(()=>x("label",null,"\u51FD\u6570\u8DEF\u5F84",-1)),wo={setup(e){const t=ie("info"),n=[{title:"\u51FD\u6570\u53C2\u6570",component:J("magic-function-parameter")},{title:"\u51FD\u6570\u63CF\u8FF0",component:J("magic-api-description")}];return(i,a)=>{const s=v("magic-select"),o=v("magic-input"),r=v("magic-navbar-item"),l=v("magic-navbar");return E(),L(ee,null,[x("div",Lo,[x("form",null,[No,p(s,{width:"100px",options:i.$FUNCTION_RETURN_TYPES,"default-select":i.$DEFAULT_FUNCTION_RETURN_TYPE,value:P(t).method,"onUpdate:value":a[0]||(a[0]=u=>P(t).method=u)},null,8,["options","default-select","value"]),ko,p(o,{value:P(t).name,"onUpdate:value":a[1]||(a[1]=u=>P(t).name=u),placeholder:"\u8BF7\u8F93\u5165\u51FD\u6570\u540D\u79F0",width:"200px"},null,8,["value"]),Po,p(o,{value:P(t).path,"onUpdate:value":a[2]||(a[2]=u=>P(t).path=u),placeholder:"\u8BF7\u8F93\u5165\u51FD\u6570\u8DEF\u5F84",width:"auto",style:{flex:"1"}},null,8,["value"])])]),p(l,{direction:"horizontal",ref:"navbar",style:{flex:"1"},"allow-close":!1},{default:C(()=>[(E(),L(ee,null,ue(n,(u,c)=>p(r,{key:c,title:u.title},{default:C(()=>[(E(),U(J(u.component),{info:P(t)},null,8,["info"]))]),_:2},1032,["title"])),64))]),_:1},512)],64)}}};var Do=V(wo,[["__scopeId","data-v-4b164a55"]]),$o=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Do});const Mo={props:{info:Object},setup(e){return(t,n)=>null}};var Uo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Mo});const Bo={class:"magic-navbar-item"},Fo={props:{title:String,style:Object,show:{type:Boolean,default:!0},to:HTMLElement},setup(e){return(t,n)=>(E(),L("div",Bo,[ft(t.$slots,"default",{},void 0,!0)]))}};var jo=V(Fo,[["__scopeId","data-v-30388e35"]]),Go=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:jo}),Vo="",Ho=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Vo});const Yo={props:{icon:String,size:String},setup(e){const n={fontSize:e.size};return(i,a)=>(E(),L("i",{class:de(`magic-icon magic-icon-${e.icon}`),style:n},null,2))}};var Mn=V(Yo,[["__scopeId","data-v-50969699"]]),Ko=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Mn}),Wo={props:{direction:{type:String,default:""},reverse:{type:Boolean,default:!1},defaultSelect:{type:Number,default:0},allowClose:{type:Boolean,default:!0},spliter:Boolean,value:Array,to:HTMLElement},setup(e,t){const n=k(e.defaultSelect);return{slots:_e(()=>t.slots.default()[0].children),navbars:_e(()=>t.slots.default()[0].children.flatMap(i=>i.props)),selectIndex:n}},methods:{select(e){this.selectIndex=e}},render(){const e=i=>{const a=parseInt(Math.random()*1e8),s=i.length*6;return se("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:22,height:s},[se("defs",se("path",{id:`path-text-${a}`,d:this.reverse?`M6,0 L6,${s}`:`M14,${s} L14,0`})),se("text",{fill:"var(--main-color)"},se("textPath",{"xlink:href":`#path-text-${a}`},i))])},t=i=>{if(this.spliter&&this.direction==="vertical"&&i.match(/\w/g)){const a=[];let s="",o=1,r;const l=i.split("");for(let u=0,c=l.length;u<c;u++){const f=l[u];o=f.match(/\w/)?1:2,o==r?s+=f:(s&&a.push(r===1?e(s):s),s=f),r=o}return s&&a.push(r===1?e(s):s),a}return[i]},n=[se("ul",{class:"magic-navbar-header none-select"},this.navbars.map((i,a)=>{const s=[se("div",{class:"magic-navbar-title"},[...t(i.title)])];i.icon&&s.push(se(Mn,{icon:i.icon}));const o=i.style||{};return i.show===!1&&(o.display="none"),se("li",{class:this.selectIndex===a?"selected":"",style:o,onClick:()=>{this.selectIndex===a&&this.allowClose?this.selectIndex=-1:this.selectIndex=a}},s)}))];return this.slots.forEach((i,a)=>{const s=a!==this.selectIndex||i.props.show===!1?{display:"none"}:{};this.to?n.push(se(Yn,{to:this.to},se("div",{class:"magic-navbar-body",style:s},i))):n.push(se("div",{class:"magic-navbar-body",style:s},i))}),se("div",{class:`magic-navbar magic-navbar__${this.direction}`+(this.reverse?" reverse":"")},n)}},qo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Wo}),Xo="",zo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Xo}),Jo={props:{tabs:Array,className:String,value:Object,allowClose:{type:Boolean}},emits:["update:value","change","close","item-contextmenu"],setup(e){const t=k({}),n=k({});function i(o,r,l){switch(l){case"dragstart":t.value=o,r.stopPropagation();break;case"dragenter":n.value=o,r.stopPropagation();break;case"dragend":if(t.value!==n.value){const u=e.tabs.indexOf(t.value),c=e.tabs.indexOf(n.value);e.tabs.splice(u,1),e.tabs.splice(c,0,t.value)}n.value={},r.stopPropagation();break;case"dragover":t.value!==n.value&&r.preventDefault();break}}const a=k({});function s(o){let r=o.wheelDelta||o.detail;a.value.value.el.scrollLeft+=r>0?-100:100}return{selectIndex:k(0),draggableItem:t,draggableTargetItem:n,tabDraggable:i,scrollbar:a,scrollbarHandler:s,scrollId:"",scrollItem:k(null)}},mounted(){Ie(()=>{this.scrollbar.value.el.addEventListener("DOMMouseScroll",this.scrollbarHandler,!1),this.scrollbar.value.el.addEventListener("mousewheel",this.scrollbarHandler,!1)})},methods:{scrollIntoView(e){this.scrollId="s"+new Date().getTime()+""+parseInt(Math.random()*1e7),this.scrollItem=e,Ie(()=>{const t=document.querySelector("#"+this.scrollId);t&&t.scrollIntoView(!0)})}},destroyed(){Ie(()=>{this.scrollbar.value.el.removeEventListener("DOMMouseScroll",this.scrollbarHandler),this.scrollbar.value.el.removeEventListener("mousewheel",this.scrollbarHandler)})},render(){const e=this.tabs&&se("ul",this.tabs.map((t,n)=>{const i=[this.$slots.default({tab:t})];return this.allowClose&&i.push(se(Mn,{icon:"close",size:"12px",style:{marginLeft:"5px"},onClick:a=>{this.$emit("close",t),a.stopPropagation(),a.preventDefault()}})),se("li",{class:[this.value===t?"selected":"",t===this.draggableTargetItem?"draggable-target-item":""],id:this.scrollItem===t||this.scrollItem===t.id?this.scrollId:void 0,onClick:a=>{this.value!==t&&(this.$emit("update:value",t),this.$emit("change",t)),a.stopPropagation(),a.preventDefault()},onMousedown:a=>{a.which===2&&this.allowClose&&this.$emit("close",t)},onContextmenu:a=>{this.$emit("item-contextmenu",a,t,n),a.preventDefault()},draggable:!0,onDragenter:a=>this.tabDraggable(t,a,"dragenter"),onDragstart:a=>this.tabDraggable(t,a,"dragstart"),onDragend:a=>this.tabDraggable(t,a,"dragend"),onDragover:a=>this.tabDraggable(t,a,"dragover")},i)}));return this.scrollbar.value=e,se("div",{class:"magic-tab none-select"+(this.className?" "+this.className:"")},e)}},Qo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Jo});const Zo={class:"magic-table-row"},$i={props:{title:String,row:Object,flex:String,width:String,align:String},setup(e){return(t,n)=>(E(),L("div",Zo,[ft(t.$slots,"default",{row:e.row})]))}};var er=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:$i}),tr="",nr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:tr}),ir={props:{data:{type:Array,default:[]},width:String,border:{type:Boolean,default:!1}},emits:["clickRow","contextmenu"],render(){const e=this.$slots.default(),t=n=>{n=n||{};let i=[];if(n.width){let a=`width: ${n.width}`;!n.width.endsWith("%")&&!isNaN(n.width)&&(a+="px"),i.push(a),i.push("flex:none")}else n.flex&&i.push(`flex: ${n.flex}`);return n.align&&i.push(`text-align: ${n.align}`),i.join(";")};return se("div",{class:"magic-table"+(this.border?" magic-table__border":"")},[se("div",{class:"magic-table-header none-select"},e.map(n=>se("div",{class:"magic-table-column",style:t(n.props)},n.props.title))),se("div",{class:"magic-table-body",onScroll:n=>{n.target.scrollTop+n.target.offsetHeight+40>=n.target.scrollHeight&&this.$emit("loadNext")}},this.data.map((n,i)=>se($i,{row:n,onClick:()=>{this.$emit("clickRow",i)}},{default:()=>e.map(a=>se("div",{class:"magic-table-column",onContextmenu:s=>{this.$emit("contextmenu",s,n),s.stopPropagation(),s.preventDefault()},style:t(a.props)},a.children.default({row:n})))})))])}},ar=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ir}),sr="",or=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:sr}),rr={props:{data:Array,sort:Boolean,descending:Boolean,filter:String,filterText:Function,selected:Object,draggable:{type:Boolean,default:!1},onMove:{type:Function,defeault:()=>new Promise(e=>e(!0))}},emits:["drag","contextmenu","onMove","itemClick"],setup(e,t){const n=t.emit,i=nt({item:{},itemParent:{},target:{},targetParent:{}});function a(s,o,r,l){function u(){return!(i.item===i.target||i.itemParent===i.target||!i.target.folder&&i.itemParent===i.targetParent)}switch(l){case"dragstart":i.item=o,i.itemParent=s,r.stopPropagation();break;case"dragenter":i.target=o,i.targetParent=s,r.stopPropagation();break;case"dragover":u()&&r.preventDefault();break;case"dragend":if(!u())break;e.onMove(o,i.target||i.targetParent).then(c=>{if(c){const f=i.itemParent||{children:e.data};f.children.splice(f.children.indexOf(o),1),i.target.folder?(i.target.children=i.target.children||[],i.target.children.push(i.item)):(i.targetParent.children=i.targetParent.children||[],i.targetParent.children.push(i.item)),e.sort&&It(i.target.folder?i.target.children:i.targetParent.children,e.descending,"name"),i.target={},i.targetParent={}}}),r.stopPropagation();break}n("drag",l,i,r)}return e.sort&&(It(e.data,e.descending,"name","children"),mt(()=>e.data,s=>{It(e.data,e.descending,"name","children")}),mt(()=>e.descending,s=>{It(e.data,e.descending,"name","children")})),{draggableItem:i,itemDraggable:a}},data(){return{scrollId:"",scrollItem:k(null)}},methods:{scrollIntoView(e){this.scrollId="s"+new Date().getTime()+""+parseInt(Math.random()*1e7),this.scrollItem=e;const t=n=>{let i=!1;for(const a in n){const s=n[a];if(i=s===e){s.opened!==void 0&&(s.opened=!0);break}else if(s.children&&s.children.length>0&&(i=t(s.children))){s.opened=!0;break}}return i};t(this.data)&&Ie(()=>{const n=document.querySelector("#"+this.scrollId);n&&n.scrollIntoView(!0)})}},render(){const e=n=>this.filter?this.filterText(Pe(n)).indexOf(this.filter)>-1||n.children&&n.children.some(i=>e(i)):!0,t=(n,i,a)=>{const s=a>0?{paddingLeft:`${a*17}px`}:{};return e(i)&&se("li",{onDblclick:o=>{i.folder&&(i.opened=!i.opened),o.stopPropagation(),o.preventDefault()},onClick:o=>{this.$emit("itemClick",i),o.stopPropagation(),o.preventDefault()},onContextmenu:o=>{this.$emit("contextmenu",i,o),o.stopPropagation(),o.preventDefault()},draggable:this.draggable,onDragenter:o=>this.itemDraggable(n,i,o,"dragenter"),onDragstart:o=>this.itemDraggable(n,i,o,"dragstart"),onDragend:o=>this.itemDraggable(n,i,o,"dragend"),onDragover:o=>this.itemDraggable(n,i,o,"dragover")},[se("div",{class:["magic-tree-item",i===this.draggableItem.target?"draggable-target-item":"",i===this.selected?"selected":""],style:s,id:this.scrollItem===i||this.scrollItem===i.id?this.scrollId:void 0},i.folder?this.$slots.folder({item:i}):this.$slots.file({item:i})),i.folder&&i.opened&&se("ul",{class:i.opened&&"opened"||"hide"},i.children&&i.children.map(o=>t(i,o,a+1)))])};return se("div",{class:"magic-tree none-select"},se("ul",{},this.data&&this.data.map(n=>t(null,n,0))))}},lr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:rr});const ur=["onMousedown"],cr={props:{value:{type:Boolean,default:!0},className:String,showClose:{type:Boolean,default:!0},shade:{type:Boolean,default:!0},padding:{type:String,default:"5px 10px"},height:{type:String,default:"auto"},width:{type:String,default:"auto"},moveable:{type:Boolean,default:!0},overflow:{type:String,default:"auto"},top:String,maxHeight:String,maxWidth:String,contentHeight:String,title:String,content:String,onClose:Function},emits:["update:value","onClose"],setup(e,{expose:t,emit:n}){const i=e,a=k(i.top||"auto"),s=k("auto"),o=k("relative"),r=k(null);function l(){n("update:value",!1)}const u=()=>{n("close"),typeof i.onClose=="function"&&i.onClose(),l()};let c,f=!1,m,O;function b(y){i.moveable&&(c=y,m=y.target.parentNode.getBoundingClientRect(),O=document.getElementsByClassName("magic-editor")[0].getBoundingClientRect(),f=!0)}function A(y){if(i.moveable&&f){let R=Math.min(Math.max(m.top+(y.pageY-c.pageY),O.y),O.y+O.height-m.height),$=Math.min(Math.max(m.left+(y.pageX-c.pageX),O.x),O.x+O.width-m.width);a.value=R+"px",s.value=$+"px",o.value="absolute"}}let h=!1;const d=()=>{!h&&r.value&&(o.value="absolute",s.value=r.value.getBoundingClientRect().x+"px"),h=!0};i.top&&qi(d);const S=y=>{i.showClose&&y.keyCode===27&&u()};function I(y){f=!1}return t({close:u}),(y,R)=>{const $=v("magic-icon");return e.value?(E(),U(Yn,{key:0,to:".magic-editor"},[x("div",{class:de(["magic-dialog",(e.shade?"magic-dialog__shade":"")+(e.className?" "+e.className:"")]),tabindex:"1",onMousemove:A,onMouseup:I,onKeydown:S},[x("div",{class:"magic-dialog-main",style:De({position:o.value,top:a.value,left:s.value,width:e.width,height:e.height,"max-width":e.maxWidth}),ref_key:"dialog",ref:r},[x("div",{ref_key:"title",ref:title,class:de(["magic-dialog-header none-select",{moveable:e.moveable}]),onMousedown:b},[Ye(j(e.title)+" ",1),e.showClose?(E(),L("span",{key:0,onMousedown:ge(u,["stop"])},[p($,{icon:"close"})],40,ur)):te("",!0)],34),x("div",{class:"magic-dialog-body",style:De({padding:e.padding,"max-height":e.maxHeight,height:e.contentHeight,overflow:e.overflow})},[e.content?(E(),L(ee,{key:0},[Ye(j(e.content),1)],64)):ft(y.$slots,"default",{key:1},void 0,!0)],4)],4)],34)])):te("",!0)}}};var _r=V(cr,[["__scopeId","data-v-cbcc8c70"]]),pr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:_r});const dr={class:"magic-notify"},hr=["onClick"],fr=["innerHTML"],mr=["innerHTML"],gr={setup(e){const t={error:'<path fill="#E05555" fill-opacity=".7" fill-rule="evenodd" d="M8,14 C4.6862915,14 2,11.3137085 2,8 C2,4.6862915 4.6862915,2 8,2 C11.3137085,2 14,4.6862915 14,8 C14,11.3137085 11.3137085,14 8,14 Z M7,4 L7,8 L9,8 L9,4 L7,4 Z M7,10 L7,12 L9,12 L9,10 L7,10 Z"/>',warning:'<path fill="#F4AF3D" fill-rule="evenodd" d="M8,2 L15,14 L1,14 L8,2 Z M9,13 L9,11 L7,11 L7,13 L9,13 Z M9,10 L9,6 L7,6 L7,10 L9,10 Z"/>',info:'<path fill="#40B6E0" fill-opacity=".7" fill-rule="evenodd" d="M8,14 C4.6862915,14 2,11.3137085 2,8 C2,4.6862915 4.6862915,2 8,2 C11.3137085,2 14,4.6862915 14,8 C14,11.3137085 11.3137085,14 8,14 Z M7,4 L7,8 L9,8 L9,4 L7,4 Z M7,10 L7,12 L9,12 L9,10 L7,10 Z" transform="rotate(-180 8 8)"/>'},n=nt([]),i=s=>{const o=n.findIndex(r=>s.id===r.id);return o>-1&&n.splice(o,1),!0},a=s=>{s.icon=t[s.icon]||t.info,s.id=parseInt(Math.random()*1e7),n.push(s),s.duration&&setTimeout(()=>i(s),parseInt(s.duration))};return g.$on(D.NOTIFY,a),(s,o)=>{const r=v("magic-icon"),l=v("magic-button"),u=v("magic-button-group");return E(),L("div",dr,[(E(!0),L(ee,null,ue(P(n),(c,f)=>(E(),L("div",{class:"magic-notify-item",key:f},[x("div",{class:"close",onClick:m=>i(c)},[p(r,{icon:"close"})],8,hr),x("h3",null,[(E(),L("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",innerHTML:c.icon},null,8,fr)),Ye(j(c.title),1)]),x("p",{innerHTML:c.content},null,8,mr),c.buttons?(E(),U(u,{key:0},{default:C(()=>[(E(!0),L(ee,null,ue(c.buttons,(m,O)=>(E(),U(l,{key:O,value:m.title,type:"link",onClick:()=>i(c)&&m.onClick()},null,8,["value","onClick"]))),128))]),_:2},1024)):te("",!0)]))),128))])}}};var vr=V(gr,[["__scopeId","data-v-413b2c61"]]),Er=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:vr});const Tr={props:{align:{type:String,default:"left"}},setup(e){return(t,n)=>(E(),L("div",{class:de(["magic-button-group",e.align])},[ft(t.$slots,"default",{},void 0,!0)],2))}};var br=V(Tr,[["__scopeId","data-v-70c60ab6"]]),Sr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:br});const yr={props:{value:String,type:String},setup(e){return(t,n)=>(E(),L("button",{onClick:n[0]||(n[0]=ge(i=>t.$emit("onClick"),["stop"])),class:de(["magic-button",e.type]),type:"button"},j(e.value),3))}};var Or=V(yr,[["__scopeId","data-v-2e4c463a"]]),Ar=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Or});const Rr=["checked"],Ir={props:{value:{type:[Number,Boolean],default:()=>!1},checkedHalf:{type:Boolean,default:!1}},setup(e){const t=new Date().getTime()+""+Math.floor(Math.random()*1e3);return(n,i)=>(E(),L("div",{class:"magic-checkbox",onClick:i[1]||(i[1]=ge(a=>n.$emit("click",a),["stop"]))},[x("input",{id:t,ref:"checkbox",type:"checkbox",onChange:i[0]||(i[0]=()=>{n.$emit("update:value",n.$refs.checkbox.checked),n.$emit("change",n.$refs.checkbox.checked)}),checked:e.value},null,40,Rr),x("label",{for:t,class:de({checkedHalf:e.checkedHalf&&e.value})},null,2)]))}};var xr=V(Ir,[["__scopeId","data-v-22b807f1"]]),Cr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:xr});const Lr={class:"magic-file"},Nr=["accept","multiple"],kr={props:{value:[Object,String],placeholder:{type:String,default:"\u8BF7\u9009\u62E9\u6587\u4EF6"},accept:String,multiple:{type:Boolean,default:!1},border:{type:Boolean,default:!0}},emits:["update:value"],setup(e,{emit:t}){const n=e,i=k(null),a=k(null),s=()=>{i.value.files[0]&&(a.value=Array.from(i.value.files).map(o=>o.name).join(",")),t("update:value",n.multiple?i.value.files:i.value.files[0])};return(o,r)=>{const l=v("magic-input"),u=v("magic-icon");return E(),L("div",Lr,[x("input",{type:"file",style:{display:"none"},ref_key:"file",ref:i,onChange:s,accept:e.accept,multiple:e.multiple},null,40,Nr),p(l,{readonly:!0,style:{width:"100%"},placeholder:e.placeholder,onClick:()=>o.$refs.file.click(),value:a.value,border:e.border},null,8,["placeholder","onClick","value","border"]),p(u,{icon:"upload"})])}}};var Pr=V(kr,[["__scopeId","data-v-5c4a8b85"]]),wr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Pr});const Dr=["value","placeholder","readonly","type"],$r={props:{value:[String,Number,Object],placeholder:String,defaultValue:[String,Number,Object],readonly:{type:Boolean,default:!1},type:{type:String,default:"text"},width:{type:String,default:"100%"},border:{type:Boolean,default:!0}},emits:["update:value"],setup(e,{emit:t}){const n=e;!n.value&&n.defaultValue&&t("update:value",n.defaultValue);const i={width:n.width};return(a,s)=>(E(),L("input",{class:de(["magic-input",{"magic-input__border":e.border}]),value:e.value,placeholder:e.placeholder,readonly:e.readonly,style:i,type:e.type,onInput:s[0]||(s[0]=o=>a.$emit("update:value",o.target.value))},null,42,Dr))}};var Mr=V($r,[["__scopeId","data-v-3a157bc4"]]),Ur=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Mr});const Br={key:0},Fr=["placeholder"],jr=["onClick"],Gr={props:{value:[Object,String,Number],options:Array,defaultSelect:[Object,String,Number],width:String,border:{type:Boolean,default:!0},placeholder:String,inputable:{type:Boolean,default:!1}},emits:["update:value","select"],setup(e,{emit:t}){const n=e;document.body.addEventListener("click",()=>a.value=!1);const i=k("-2px"),a=k(!1),s=k("auto"),o=k("0px"),r=_e(()=>{const m=n.options.find(O=>O.value===n.value)||n.options.find(O=>O.value===n.defaultSelect);return m&&m.text||""}),l=m=>{t("update:value",m),t("select",m),a.value=!1},u=ie("ELEMENT_ROOT"),c=(m,O)=>O+m.scrollTop>0?m.scrollTop:m.parentElement?c(m.parentElement,O+m.scrollTop):m.scrollTop,f=(m,O)=>{i.value=-c(m,0)-1+"px",a.value=!0,Ie(()=>{o.value=-(window.pageXOffset+1)+"px",s.value=m.clientWidth+"px";let b=O.offsetHeight;O.offsetTop+b+20>u.value.offsetTop+u.value.offsetHeight&&(i.value=-(b+m.offsetHeight)+"px")})};return(m,O)=>(E(),L("div",{class:de([{inputable:e.inputable,border:e.border},"magic-select not-select"]),style:De({width:e.width}),onClick:O[2]||(O[2]=ge(b=>f(m.$refs.container,m.$refs.selectList),["stop"])),ref:"container"},[e.inputable?te("",!0):(E(),L("span",Br,j(P(r)),1)),e.inputable?sn((E(),L("input",{key:1,ref:"input","onUpdate:modelValue":O[0]||(O[0]=b=>on(value)?value.value=b:null),autocomplete:"off",type:"text",onInput:O[1]||(O[1]=b=>l(b.target.value)),placeholder:e.placeholder},null,40,Fr)),[[Xi,e.value]]):te("",!0),sn(x("ul",{style:De({width:s.value,marginTop:i.value,marginLeft:o.value}),ref:"selectList"},[(E(!0),L(ee,null,ue(e.options,b=>(E(),L("li",{key:b.value,onClick:ge(A=>l(b.value),["stop"])},j(b.text),9,jr))),128))],4),[[Kn,a.value]])],6))}};var Vr=V(Gr,[["__scopeId","data-v-869742dc"]]),Hr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Vr});const Yr=["placeholder","value"],Kr={props:{value:String,placeholder:String},setup(e){return(t,n)=>(E(),L("textarea",{class:"magic-textarea",placeholder:e.placeholder,value:e.value,onInput:n[0]||(n[0]=i=>t.$emit("update:value",i.target.value))},null,40,Yr))}};var Wr=V(Kr,[["__scopeId","data-v-ca6693f6"]]),qr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Wr});const Xr={props:{users:Array,max:Number,size:{type:Number,default:22}},setup(e){const t=e,n=_e(()=>({height:t.size+"px",lineHeight:t.size+"px"})),i=_e(()=>t.users.slice(0,t.max||t.users.length));return(a,s)=>{const o=v("magic-avatar");return t.users&&t.users.length>0?(E(),L("div",{key:0,class:"magic-avatar-group",style:De(P(n))},[(E(!0),L(ee,null,ue(P(i),(r,l)=>(E(),U(o,{key:l,user:r,size:e.size},null,8,["user","size"]))),128)),t.users.length>P(i).length?(E(),U(o,{key:0,text:`${e.max}+`,size:e.size},null,8,["text","size"])):te("",!0)],4)):te("",!0)}}};var zr=V(Xr,[["__scopeId","data-v-511f7f80"]]),Jr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:zr});const Qr=["title"],Zr={props:{user:Object,text:String,size:{type:Number,default:22}},setup(e){const t=e,n=["#1abc9c","#2ecc71","#3498db","#9b59b6","#16a085","#27ae60","#2980b9","#8e44ad","#f1c40f","#e67e22","#e74c3c","#eca0f1","#95a5a6","#f39c12","#d35400","#c0392b","#bdc3c7","#7f8c8d"],i=_e(()=>({width:t.size+"px",height:t.size+"px",lineHeight:t.size+"px",borderRadius:t.size/2+"px",backgroundColor:t.text&&"#bdc3c7"||n[ka(`${t.user.cid}`)%n.length]})),a=_e(()=>t.text||t.user.username.substring(0,1)),s=_e(()=>t.user?`\u7528\u6237\u540D\uFF1A${t.user.username}
IP\uFF1A${t.user.ip||"unknown"}`:void 0);return(o,r)=>(E(),L("div",{class:"magic-avatar",style:De(P(i)),title:P(s)},j(P(a)),13,Qr))}};var el=V(Zr,[["__scopeId","data-v-4b5e69aa"]]),tl=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:el});const nl=["width"],il=["x","fill"],al={props:{icon:String},setup(e){const t=e,n={GET:"#0cbb52",POST:"#FFB400",DELETE:["DEL","#EB2013"],PUT:"#097BED",function:["Fn","#9012FE"],websocket:["WS","#6B6B6B"],task:["TASK","#9012FE"],resource:["RES","#9012FE"]},i=_e(()=>{let a=n[t.icon];const s=a!==void 0&&Array.isArray(a),o=s?a[0]:t.icon,r=o.length*9,l=s?a[1]:a||"var(--main-icon-color)";return{width:r,color:l,text:o}});return(a,s)=>(E(),L("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:P(i).width,height:"12","font-size":"10","font-weight":"bolder","font-family":"inherit"},[x("text",{x:P(i).width/2,y:"8",fill:P(i).color,style:{"dominant-baseline":"middle","text-anchor":"middle"}},j(P(i).text),9,il)],8,nl))}};var sl=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:al});const ol={props:{opened:Object},setup(e){const t=[{title:"Json",icon:"json",component:J("magic-api-request-body")},{title:"\u89C6\u56FE",icon:"structure",component:J("magic-api-request-structure")}];return(n,i)=>{const a=v("magic-navbar-item"),s=v("magic-navbar");return E(),U(s,{spliter:!0,direction:"vertical"},{default:C(()=>[(E(),L(ee,null,ue(t,(o,r)=>p(a,rt({key:r},o),{default:C(()=>[(E(),U(J(o.component)))]),_:2},1040)),64))]),_:1})}}};var rl=V(ol,[["__scopeId","data-v-1e478b66"]]),ll=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:rl});const ul={setup(e){const t=ie("info");return(n,i)=>{const a=v("magic-textarea");return E(),U(a,{value:P(t).description,"onUpdate:value":i[0]||(i[0]=s=>P(t).description=s)},null,8,["value"])}}};var cl=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ul});const Mi=e=>(Ke("data-v-430d6958"),e=e(),We(),e),_l={class:"magic-api-group"},pl=Mi(()=>x("label",null,"\u5206\u7EC4\u540D\u79F0",-1)),dl=Mi(()=>x("label",null,"\u5206\u7EC4\u8DEF\u5F84",-1)),hl={setup(e){const t=ie("info"),n=[{title:"\u8DEF\u5F84\u53D8\u91CF",component:J("magic-api-path")},{title:"\u5206\u7EC4\u9009\u9879",component:J("magic-api-option")}],i=()=>{const a=t.value;Y.sendJson("/resource/folder/save",{id:a.id,name:a.name,parentId:a.parentId,type:a.type,path:a.path,paths:a.paths,options:a.options})};return(a,s)=>{const o=v("magic-input"),r=v("magic-button"),l=v("magic-navbar-item"),u=v("magic-navbar");return E(),L(ee,null,[x("div",_l,[x("form",null,[pl,p(o,{value:P(t).name,"onUpdate:value":s[0]||(s[0]=c=>P(t).name=c),placeholder:"\u8BF7\u8F93\u5165\u63A5\u53E3\u540D\u79F0",width:"200px"},null,8,["value"]),dl,p(o,{value:P(t).path,"onUpdate:value":s[1]||(s[1]=c=>P(t).path=c),placeholder:"\u8BF7\u8F93\u5165\u63A5\u53E3\u8DEF\u5F84",width:"auto",style:{flex:"1"}},null,8,["value"]),p(r,{value:"\u4FDD\u5B58",onOnClick:i})])]),p(u,{direction:"horizontal",ref:"navbar",style:{flex:"1"},"allow-close":!1},{default:C(()=>[(E(),L(ee,null,ue(n,(c,f)=>p(l,rt({key:f},c),{default:C(()=>[(E(),U(J(c.component)))]),_:2},1040)),64))]),_:1},512)],64)}}};var fl=V(hl,[["__scopeId","data-v-430d6958"]]),ml=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:fl});const gl={class:"magic-panel-api"},vl={setup(e){const t=ie("info"),n=k(-1);return(i,a)=>{const s=v("magic-panel-common-toolbar"),o=v("magic-checkbox"),r=v("magic-table-column"),l=v("magic-input"),u=v("magic-select"),c=v("magic-table");return E(),L("div",gl,[p(s,{index:n.value,"onUpdate:index":a[0]||(a[0]=f=>n.value=f),value:P(t).headers},null,8,["index","value"]),p(c,{data:P(t).headers,border:"",onClickRow:a[1]||(a[1]=f=>n.value=f)},{default:C(()=>[p(r,{title:"\u5FC5\u586B",width:"35"},{default:C(({row:f})=>[p(o,{value:f.required,"onUpdate:value":m=>f.required=m},null,8,["value","onUpdate:value"])]),_:1}),p(r,{title:"Key"},{default:C(({row:f})=>[p(l,{value:f.name,"onUpdate:value":m=>f.name=m,border:!1},null,8,["value","onUpdate:value"])]),_:1}),p(r,{title:"Value"},{default:C(({row:f})=>[p(l,{value:f.value,"onUpdate:value":m=>f.value=m,border:!1},null,8,["value","onUpdate:value"])]),_:1}),p(r,{title:"\u53C2\u6570\u7C7B\u578B",width:"135"},{default:C(({row:f})=>[p(u,{options:i.$REQUEST_SIMPLE_TYPES,value:f.dataType,"onUpdate:value":m=>f.dataType=m,"default-select":i.$DEFAULT_REQUEST_SIMPLE_TYPE,border:!1},null,8,["options","value","onUpdate:value","default-select"])]),_:1}),p(r,{title:"\u9ED8\u8BA4\u503C"},{default:C(({row:f})=>[p(l,{value:f.defaultValue,"onUpdate:value":m=>f.defaultValue=m,border:!1},null,8,["value","onUpdate:value"])]),_:1}),p(r,{title:"\u9A8C\u8BC1\u65B9\u5F0F",width:"100"},{default:C(({row:f})=>[p(u,{options:i.$VALIDATE_TYPES,value:f.validateType,"onUpdate:value":m=>f.validateType=m,"default-select":i.$DEFAULT_VALIDATE_TYPE,border:!1},null,8,["options","value","onUpdate:value","default-select"])]),_:1}),p(r,{title:"\u8868\u8FBE\u5F0F\u6216\u6B63\u5219\u8868\u8FBE\u5F0F"},{default:C(({row:f})=>[p(l,{value:f.expression,"onUpdate:value":m=>f.expression=m,border:!1},null,8,["value","onUpdate:value"])]),_:1}),p(r,{title:"\u9A8C\u8BC1\u8BF4\u660E"},{default:C(({row:f})=>[p(l,{value:f.error,"onUpdate:value":m=>f.error=m,border:!1},null,8,["value","onUpdate:value"])]),_:1}),p(r,{title:"\u63CF\u8FF0",flex:"2"},{default:C(({row:f})=>[p(l,{value:f.description,"onUpdate:value":m=>f.description=m,border:!1},null,8,["value","onUpdate:value"])]),_:1})]),_:1},8,["data"])])}}};var El=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:vl});const Un=e=>(Ke("data-v-0aa3270a"),e=e(),We(),e),Tl={class:"magic-api-info"},bl=Un(()=>x("label",null,"\u8BF7\u6C42\u65B9\u6CD5",-1)),Sl=Un(()=>x("label",null,"\u63A5\u53E3\u540D\u79F0",-1)),yl=Un(()=>x("label",null,"\u63A5\u53E3\u8DEF\u5F84",-1)),Ol={setup(e){const t=ie("info"),n=[{title:"\u8BF7\u6C42\u53C2\u6570",component:J("magic-api-parameter")},{title:"\u8BF7\u6C42Header",component:J("magic-api-header")},{title:"\u8DEF\u5F84\u53D8\u91CF",component:J("magic-api-path")},{title:"\u8BF7\u6C42Body",component:J("magic-api-body")},{title:"\u63A5\u53E3\u9009\u9879",component:J("magic-api-option")},{title:"\u63A5\u53E3\u63CF\u8FF0",component:J("magic-api-description")}];return(i,a)=>{const s=v("magic-select"),o=v("magic-input"),r=v("magic-navbar-item"),l=v("magic-navbar");return E(),L(ee,null,[x("div",Tl,[x("form",null,[bl,p(s,{width:"100px",options:i.$REQUEST_METHODS,"default-select":i.$DEFAULT_REQUEST_METHOD,value:P(t).method,"onUpdate:value":a[0]||(a[0]=u=>P(t).method=u)},null,8,["options","default-select","value"]),Sl,p(o,{value:P(t).name,"onUpdate:value":a[1]||(a[1]=u=>P(t).name=u),placeholder:"\u8BF7\u8F93\u5165\u63A5\u53E3\u540D\u79F0",width:"200px"},null,8,["value"]),yl,p(o,{value:P(t).path,"onUpdate:value":a[2]||(a[2]=u=>P(t).path=u),placeholder:"\u8BF7\u8F93\u5165\u63A5\u53E3\u8DEF\u5F84",width:"auto",style:{flex:"1"}},null,8,["value"])])]),p(l,{direction:"horizontal",ref:"navbar",style:{flex:"1"},"allow-close":!1},{default:C(()=>[(E(),L(ee,null,ue(n,(u,c)=>p(r,rt({key:c},u),{default:C(()=>[(E(),U(J(u.component)))]),_:2},1040)),64))]),_:1},512)],64)}}};var Al=V(Ol,[["__scopeId","data-v-0aa3270a"]]),Rl=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Al});const Il={class:"magic-panel-api"},xl={setup(e){const t=ie("info"),n=ie("options")||[],i=_e(()=>n.map(o=>({text:o[0],value:o[0],description:o[1],defaultValue:o[2]}))),a=k(-1),s=(o,r)=>{const l=n.find(u=>u[0]===o);l&&(r.description=l[1]||"",r.value=l[2]||"")};return(o,r)=>{const l=v("magic-panel-common-toolbar"),u=v("magic-select"),c=v("magic-table-column"),f=v("magic-input"),m=v("magic-table");return E(),L("div",Il,[p(l,{index:a.value,"onUpdate:index":r[0]||(r[0]=O=>a.value=O),value:P(t).options},null,8,["index","value"]),p(m,{data:P(t).options,border:"",onClickRow:r[1]||(r[1]=O=>a.value=O)},{default:C(()=>[p(c,{title:"\u952E",width:"20%"},{default:C(({row:O})=>[p(u,{options:P(i),value:O.name,"onUpdate:value":b=>O.name=b,"default-select":o.$DEFAULT_REQUEST_SIMPLE_TYPE,border:!1,inputable:"",onSelect:b=>s(b,O)},null,8,["options","value","onUpdate:value","default-select","onSelect"])]),_:1}),p(c,{title:"\u503C",width:"60%"},{default:C(({row:O})=>[p(f,{value:O.value,"onUpdate:value":b=>O.value=b,border:!1},null,8,["value","onUpdate:value"])]),_:1}),p(c,{title:"\u63CF\u8FF0",width:"20%"},{default:C(({row:O})=>[p(f,{value:O.description,"onUpdate:value":b=>O.description=b,border:!1},null,8,["value","onUpdate:value"])]),_:1})]),_:1},8,["data"])])}}};var Cl=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:xl});const Ll={class:"magic-panel-api"},Nl={setup(e){const t=k(-1),n=ie("info");return(i,a)=>{const s=v("magic-panel-common-toolbar"),o=v("magic-checkbox"),r=v("magic-table-column"),l=v("magic-input"),u=v("magic-file"),c=v("magic-select"),f=v("magic-table");return E(),L("div",Ll,[p(s,{index:t.value,"onUpdate:index":a[0]||(a[0]=m=>t.value=m),value:P(n).parameters},null,8,["index","value"]),p(f,{data:P(n).parameters,border:"",onClickRow:a[1]||(a[1]=m=>t.value=m)},{default:C(()=>[p(r,{title:"\u5FC5\u586B",width:"35"},{default:C(({row:m})=>[p(o,{value:m.required,"onUpdate:value":O=>m.required=O},null,8,["value","onUpdate:value"])]),_:1}),p(r,{title:"Key"},{default:C(({row:m})=>[p(l,{value:m.name,"onUpdate:value":O=>m.name=O,border:!1},null,8,["value","onUpdate:value"])]),_:1}),p(r,{title:"Value"},{default:C(({row:m})=>[m.dataType==="MultipartFile"?(E(),U(u,{key:0,value:m.value,"onUpdate:value":O=>m.value=O,border:!1},null,8,["value","onUpdate:value"])):m.dataType==="MultipartFiles"?(E(),U(u,{key:1,value:m.value,"onUpdate:value":O=>m.value=O,border:!1,multiple:""},null,8,["value","onUpdate:value"])):(E(),U(l,{key:2,value:m.value,"onUpdate:value":O=>m.value=O,border:!1},null,8,["value","onUpdate:value"]))]),_:1}),p(r,{title:"\u53C2\u6570\u7C7B\u578B",width:"135"},{default:C(({row:m})=>[p(c,{options:i.$REQUEST_PARAMETER_TYPES,value:m.dataType,"onUpdate:value":O=>m.dataType=O,"default-select":i.$DEFAULT_REQUEST_PARAMETER_TYPE,border:!1},null,8,["options","value","onUpdate:value","default-select"])]),_:1}),p(r,{title:"\u9ED8\u8BA4\u503C"},{default:C(({row:m})=>[p(l,{value:m.defaultValue,"onUpdate:value":O=>m.defaultValue=O,border:!1},null,8,["value","onUpdate:value"])]),_:1}),p(r,{title:"\u9A8C\u8BC1\u65B9\u5F0F",width:"100"},{default:C(({row:m})=>[p(c,{options:i.$VALIDATE_TYPES,value:m.validateType,"onUpdate:value":O=>m.validateType=O,"default-select":i.$DEFAULT_VALIDATE_TYPE,border:!1},null,8,["options","value","onUpdate:value","default-select"])]),_:1}),p(r,{title:"\u8868\u8FBE\u5F0F\u6216\u6B63\u5219\u8868\u8FBE\u5F0F"},{default:C(({row:m})=>[p(l,{value:m.expression,"onUpdate:value":O=>m.expression=O,border:!1},null,8,["value","onUpdate:value"])]),_:1}),p(r,{title:"\u9A8C\u8BC1\u8BF4\u660E"},{default:C(({row:m})=>[p(l,{value:m.error,"onUpdate:value":O=>m.error=O,border:!1},null,8,["value","onUpdate:value"])]),_:1}),p(r,{title:"\u63CF\u8FF0",flex:"2"},{default:C(({row:m})=>[p(l,{value:m.description,"onUpdate:value":O=>m.description=O,border:!1},null,8,["value","onUpdate:value"])]),_:1})]),_:1},8,["data"])])}}};var kl=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Nl});const Pl={class:"magic-panel-api"},wl={setup(e){const t=k(-1),n=ie("info");return(i,a)=>{const s=v("magic-panel-common-toolbar"),o=v("magic-input"),r=v("magic-table-column"),l=v("magic-select"),u=v("magic-table");return E(),L("div",Pl,[p(s,{index:t.value,"onUpdate:index":a[0]||(a[0]=c=>t.value=c),value:P(n).paths},null,8,["index","value"]),p(u,{data:P(n).paths,border:"",onClickRow:a[1]||(a[1]=c=>t.value=c)},{default:C(()=>[p(r,{title:"Key"},{default:C(({row:c})=>[p(o,{value:c.name,"onUpdate:value":f=>c.name=f,border:!1},null,8,["value","onUpdate:value"])]),_:1}),p(r,{title:"Value"},{default:C(({row:c})=>[p(o,{value:c.value,"onUpdate:value":f=>c.value=f,border:!1},null,8,["value","onUpdate:value"])]),_:1}),p(r,{title:"\u53C2\u6570\u7C7B\u578B",width:"135"},{default:C(({row:c})=>[p(l,{options:i.$REQUEST_SIMPLE_TYPES,value:c.dataType,"onUpdate:value":f=>c.dataType=f,"default-select":i.$DEFAULT_REQUEST_SIMPLE_TYPE,border:!1},null,8,["options","value","onUpdate:value","default-select"])]),_:1}),p(r,{title:"\u9A8C\u8BC1\u65B9\u5F0F",width:"100"},{default:C(({row:c})=>[p(l,{options:i.$VALIDATE_TYPES,value:c.validateType,"onUpdate:value":f=>c.validateType=f,"default-select":i.$DEFAULT_VALIDATE_TYPE,border:!1},null,8,["options","value","onUpdate:value","default-select"])]),_:1}),p(r,{title:"\u8868\u8FBE\u5F0F\u6216\u6B63\u5219\u8868\u8FBE\u5F0F"},{default:C(({row:c})=>[p(o,{value:c.expression,"onUpdate:value":f=>c.expression=f,border:!1},null,8,["value","onUpdate:value"])]),_:1}),p(r,{title:"\u9A8C\u8BC1\u8BF4\u660E"},{default:C(({row:c})=>[p(o,{value:c.error,"onUpdate:value":f=>c.error=f,border:!1},null,8,["value","onUpdate:value"])]),_:1}),p(r,{title:"\u63CF\u8FF0",flex:"2"},{default:C(({row:c})=>[p(o,{value:c.description,"onUpdate:value":f=>c.description=f,border:!1},null,8,["value","onUpdate:value"])]),_:1})]),_:1},8,["data"])])}}};var Dl=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:wl});const $l={setup(e){const t=ie("info"),n=()=>{const i=Oi(t.value.requestBody,t.value.requestBodyDefinition);i&&(t.value.requestBodyDefinition=i)};return(i,a)=>{const s=v("magic-monaco-editor");return E(),U(s,{value:P(t).requestBody,"onUpdate:value":a[0]||(a[0]=o=>P(t).requestBody=o),language:"json",onChange:n},null,8,["value"])}}};var Ml=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:$l});const Ul=["onClick"],Bl={key:0,align:"center",style:{flex:"1"}},Fl={key:1,align:"center",style:{flex:"1"}},jl={setup(e){const t=ie("info");let n=[];const i=(r,l)=>{const u={level:l,node:r,name:l===0?"\u6839\u8282\u70B9":r.name,folder:(r==null?void 0:r.dataType)==="Object"||(r==null?void 0:r.dataType)==="Array",display:!0};u.folder&&(u.expand=!0),n.push(u)},a=(r,l)=>{(r||[]).forEach(u=>{i(u,l),a(u.children,l+1)})},s=_e(()=>{var r;return n=[],i(t.value.requestBodyDefinition||{},0),a(((r=t.value.requestBodyDefinition)==null?void 0:r.children)||[],1),n.filter(l=>l.display)}),o=r=>{const l=n.findIndex(c=>c===r),u=r.level;r.expand=!r.expand;for(let c=l+1,f=n.length;c<f;c++){const m=n[c];if(m.level>u)m.display=r.expand;else break}};return(r,l)=>{const u=v("magic-icon"),c=v("magic-table-column"),f=v("magic-checkbox"),m=v("magic-select"),O=v("magic-input"),b=v("magic-table");return E(),U(b,{data:P(s),border:""},{default:C(()=>[p(c,{title:"\u5B57\u6BB5"},{default:C(({row:A})=>[x("span",{style:De({paddingLeft:`${(A.level+(A.folder?0:1))*16}px`}),onClick:h=>o(A)},[A.folder?(E(),U(u,{key:0,icon:A.expand?"arrow-bottom":"arrow-right"},null,8,["icon"])):te("",!0)],12,Ul),x("span",null,j(A.name||"-"),1)]),_:1}),p(c,{title:"\u5FC5\u586B",width:"35"},{default:C(({row:A})=>[p(f,{value:A.node.required,"onUpdate:value":h=>A.node.required=h},null,8,["value","onUpdate:value"])]),_:1}),p(c,{title:"\u7C7B\u578B",width:"80"},{default:C(({row:A})=>[p(m,{options:r.$BODY_DATA_TYPES,value:A.node.dataType,"onUpdate:value":h=>A.node.dataType=h,border:!1},null,8,["options","value","onUpdate:value"])]),_:1}),p(c,{title:"\u503C",flex:"2"},{default:C(({row:A})=>{var h;return[A.folder?(E(),L("p",Bl,"-")):(E(),L("span",{key:1,class:de(["magic-data-type",(h=A.node.dataType)==null?void 0:h.toLowerCase()])},j(A.node.value),3))]}),_:1}),p(c,{title:"\u9ED8\u8BA4\u503C"},{default:C(({row:A})=>[p(O,{value:A.node.defaultValue,"onUpdate:value":h=>A.node.defaultValue=h,border:!1},null,8,["value","onUpdate:value"])]),_:1}),p(c,{title:"\u9A8C\u8BC1\u65B9\u5F0F",width:"100"},{default:C(({row:A})=>[p(m,{options:r.$VALIDATE_TYPES,value:A.node.validateType,"onUpdate:value":h=>A.node.validateType=h,"default-select":r.$DEFAULT_VALIDATE_TYPE,border:!1},null,8,["options","value","onUpdate:value","default-select"])]),_:1}),p(c,{title:"\u8868\u8FBE\u5F0F\u6216\u6B63\u5219\u8868\u8FBE\u5F0F"},{default:C(({row:A})=>[p(O,{value:A.node.expression,"onUpdate:value":h=>A.node.expression=h,border:!1},null,8,["value","onUpdate:value"])]),_:1}),p(c,{title:"\u9A8C\u8BC1\u8BF4\u660E"},{default:C(({row:A})=>[p(O,{value:A.node.error,"onUpdate:value":h=>A.node.error=h,border:!1},null,8,["value","onUpdate:value"])]),_:1}),p(c,{title:"\u5B57\u6BB5\u6CE8\u91CA"},{default:C(({row:A})=>[A.name?(E(),U(O,{key:0,value:A.node.description,"onUpdate:value":h=>A.node.description=h,border:!1},null,8,["value","onUpdate:value"])):(E(),L("p",Fl,"-"))]),_:1})]),_:1},8,["data"])}}};var Gl=V(jl,[["__scopeId","data-v-12babf82"]]),Vl=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Gl});const Hl=["src"],Yl={setup(e){const t=ie("info"),n=ie("opened"),i=k(null),a=ie("ELEMENT_ROOT"),s=_e(()=>new ae(t.value.responseBody||"").beautify()),o=_e(()=>{if(n.value.responseBlob){const l=n.value.responseHeaders["content-disposition"];if(l){const u=l.replace(/.*filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/,"$1");_n(n.value.responseBlobValue,u);return}return URL.createObjectURL(n.value.responseBlobValue)}}),r=l=>{const u=getComputedStyle(a.value),c=i.value.contentWindow.document.body.style;c.color=u.getPropertyValue("--main-color"),c.backgroundColor=u.getPropertyValue("--main-background-color")};return(l,u)=>{const c=v("magic-monaco-editor"),f=v("magic-empty");return P(n).responseBlob?P(o)?(E(),L("iframe",{key:1,src:P(o),onLoad:r,ref_key:"iframe",ref:i},null,40,Hl)):(E(),U(f,{key:2,text:"\u65E0\u54CD\u5E94Body"})):(E(),U(c,{key:0,value:P(s),"onUpdate:value":u[0]||(u[0]=m=>on(s)?s.value=m:null),language:"json",readonly:!0},null,8,["value"]))}}};var Kl=V(Yl,[["__scopeId","data-v-2560303a"]]),Wl=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Kl});const ql={setup(e){const t=ie("opened"),n=_e(()=>Object.keys(t.value.responseHeaders||{}).map(i=>({key:i,value:t.value.responseHeaders[i]})));return(i,a)=>{const s=v("magic-table-column"),o=v("magic-table");return E(),U(o,{data:P(n),border:""},{default:C(()=>[p(s,{title:"Key"},{default:C(({row:r})=>[x("span",null,j(r.key),1)]),_:1}),p(s,{title:"Value"},{default:C(({row:r})=>[x("span",null,j(r.value),1)]),_:1})]),_:1},8,["data"])}}};var Xl=V(ql,[["__scopeId","data-v-db168582"]]),zl=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Xl});const Jl=["onClick"],Ql={key:0,align:"center",style:{flex:"1"}},Zl={key:1,align:"center",style:{flex:"1"}},eu={setup(e){var l;const t=ie("info"),n=ie("opened");let i=[];const a=(u,c)=>{const f={level:c,node:u,name:c===0?"\u6839\u8282\u70B9":u.name,folder:(u==null?void 0:u.dataType)==="Object"||(u==null?void 0:u.dataType)==="Array",display:!0};f.folder&&(f.expand=!0),i.push(f)},s=(u,c)=>{(u||[]).forEach(f=>{a(f,c),s(f.children,c+1)})},o=u=>{const c=i.findIndex(m=>m===u),f=u.level;u.expand=!u.expand;for(let m=c+1,O=i.length;m<O;m++){const b=i[m];if(b.level>f)b.display=u.expand;else break}};s(((l=t.value.responseBodyDefinition)==null?void 0:l.children)||[],1);const r=_e(()=>{var u;return i=[],n.value.responseBlob||(a(t.value.responseBodyDefinition||{},0),s(((u=t.value.responseBodyDefinition)==null?void 0:u.children)||[],1)),i.filter(c=>c.display)});return(u,c)=>{const f=v("magic-icon"),m=v("magic-table-column"),O=v("magic-select"),b=v("magic-input"),A=v("magic-table"),h=v("magic-empty");return P(r).length?(E(),U(A,{key:0,data:P(r),border:""},{default:C(()=>[p(m,{title:"\u5B57\u6BB5"},{default:C(({row:d})=>[x("span",{style:De({paddingLeft:`${(d.level+(d.folder?0:1))*16}px`}),onClick:S=>o(d)},[d.folder?(E(),U(f,{key:0,icon:d.expand?"arrow-bottom":"arrow-right"},null,8,["icon"])):te("",!0)],12,Jl),x("span",null,j(d.name||"-"),1)]),_:1}),p(m,{title:"\u7C7B\u578B",width:"80"},{default:C(({row:d})=>[p(O,{options:u.$BODY_DATA_TYPES,value:d.node.dataType,"onUpdate:value":S=>d.node.dataType=S,border:!1},null,8,["options","value","onUpdate:value"])]),_:1}),p(m,{title:"\u503C",flex:"3"},{default:C(({row:d})=>{var S;return[d.folder?(E(),L("p",Ql,"-")):(E(),L("span",{key:1,class:de(["magic-data-type",(S=d.node.dataType)==null?void 0:S.toLowerCase()])},j(d.node.value),3))]}),_:1}),p(m,{title:"\u5B57\u6BB5\u6CE8\u91CA"},{default:C(({row:d})=>[d.name?(E(),U(b,{key:0,value:d.node.description,"onUpdate:value":S=>d.node.description=S,border:!1},null,8,["value","onUpdate:value"])):(E(),L("p",Zl,"-"))]),_:1})]),_:1},8,["data"])):(E(),U(h,{key:1,text:"\u65E0\u54CD\u5E94\u7ED3\u6784"}))}}};var tu=V(eu,[["__scopeId","data-v-ea08c446"]]),nu=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:tu});const iu={class:"magic-panel-api-response"},au={props:{opened:Object},setup(e){const t=[{title:"Body",component:J("magic-api-response-body")},{title:"\u54CD\u5E94Header",component:J("magic-api-response-header")},{title:"\u54CD\u5E94\u7ED3\u6784",component:J("magic-api-response-structure")}];return(n,i)=>{const a=v("magic-navbar-item"),s=v("magic-navbar");return E(),L("div",iu,[p(s,{direction:"horizontal",ref:"navbar",style:{flex:"1"},"allow-close":!1},{default:C(()=>[(E(),L(ee,null,ue(t,(o,r)=>p(a,{key:r,title:o.title},{default:C(()=>[(E(),U(zi,null,[(E(),U(J(o.component),{opened:e.opened},null,8,["opened"]))],1024))]),_:2},1032,["title"])),64))]),_:1},512)])}}};var su=V(au,[["__scopeId","data-v-3d951bef"]]),ou=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:su});const ru={class:"magic-panel-global"},lu={setup(e){const t=k(w.GLOBAL),n=k(-1);return(i,a)=>{const s=v("magic-panel-common-toolbar"),o=v("magic-input"),r=v("magic-table-column"),l=v("magic-table");return E(),L("div",ru,[p(s,{index:n.value,"onUpdate:index":a[0]||(a[0]=u=>n.value=u),value:t.value.headers},null,8,["index","value"]),p(l,{data:t.value.headers,border:"",onClickRow:a[1]||(a[1]=u=>n.value=u)},{default:C(()=>[p(r,{title:"Key"},{default:C(({row:u})=>[p(o,{value:u.name,"onUpdate:value":c=>u.name=c,border:!1},null,8,["value","onUpdate:value"])]),_:1}),p(r,{title:"Value"},{default:C(({row:u})=>[p(o,{value:u.value,"onUpdate:value":c=>u.value=c,border:!1},null,8,["value","onUpdate:value"])]),_:1})]),_:1},8,["data"])])}}};var uu=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:lu});const cu={class:"magic-panel-global"},_u={setup(e){const t=k(-1),n=k(w.GLOBAL);return(i,a)=>{const s=v("magic-panel-common-toolbar"),o=v("magic-input"),r=v("magic-table-column"),l=v("magic-file"),u=v("magic-table");return E(),L("div",cu,[p(s,{index:t.value,"onUpdate:index":a[0]||(a[0]=c=>t.value=c),value:n.value.parameters},null,8,["index","value"]),p(u,{data:n.value.parameters,border:"",onClickRow:a[1]||(a[1]=c=>t.value=c)},{default:C(()=>[p(r,{title:"Key"},{default:C(({row:c})=>[p(o,{value:c.name,"onUpdate:value":f=>c.name=f,border:!1},null,8,["value","onUpdate:value"])]),_:1}),p(r,{title:"Value"},{default:C(({row:c})=>[c.dataType==="MultipartFile"?(E(),U(l,{key:0,value:c.value,"onUpdate:value":f=>c.value=f,border:!1},null,8,["value","onUpdate:value"])):c.dataType==="MultipartFiles"?(E(),U(l,{key:1,value:c.value,"onUpdate:value":f=>c.value=f,border:!1,multiple:""},null,8,["value","onUpdate:value"])):(E(),U(o,{key:2,value:c.value,"onUpdate:value":f=>c.value=f,border:!1},null,8,["value","onUpdate:value"]))]),_:1})]),_:1},8,["data"])])}}};var pu=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:_u});const du={class:"magic-global"},hu={setup(e){const t=[{title:"\u5168\u5C40\u8BF7\u6C42\u53C2\u6570",component:J("magic-global-parameter")},{title:"\u5168\u5C40\u8BF7\u6C42Header",component:J("magic-global-header")}];return(n,i)=>{const a=v("magic-navbar-item"),s=v("magic-navbar");return E(),L("div",du,[p(s,{direction:"horizontal",ref:"navbar",style:{flex:"1"},"allow-close":!1},{default:C(()=>[(E(),L(ee,null,ue(t,(o,r)=>p(a,rt({key:r},o),{default:C(()=>[(E(),U(J(o.component)))]),_:2},1040)),64))]),_:1},512)])}}};var fu=V(hu,[["__scopeId","data-v-03e7bbcc"]]),mu=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:fu});const gu={props:{value:Array,index:Number},emits:["update:index"],setup(e,{emit:t}){const n=e,i=[{title:"\u589E\u52A0\u4E00\u884C",icon:"plus",onClick(){n.value.push({}),t("update:index",n.value.length-1)}},{title:"\u5220\u9664\u4E00\u884C",icon:"minus",onClick(){n.value.length>0&&(n.value.splice(n.index==-1?n.value.length-1:n.index,1),t("update:index",-1))}}];return(a,s)=>{const o=v("magic-panel-toolbar");return E(),U(o,{toolbars:i})}}};var vu=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:gu});const Eu={class:"magic-panel-toolbar"},Tu=["title","onClick"],bu={props:{toolbars:Array},setup(e){return(t,n)=>{const i=v("magic-icon");return E(),L("ul",Eu,[(E(!0),L(ee,null,ue(e.toolbars,(a,s)=>(E(),L("li",{key:s,title:a.title,onClick:ge(o=>a.disabled!==!0&&a.onClick(),["stop"]),class:de({disabled:a.disabled})},[p(i,{icon:a.icon},null,8,["icon"])],10,Tu))),128))])}}};var Su=V(bu,[["__scopeId","data-v-e91df708"]]),yu=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Su});const Ou={class:"magic-resource-choose"},Au={key:1},Ru={key:2},Iu={props:{value:[Array,Object],type:String,single:{type:Boolean,default:()=>!1},file:{type:Boolean,default:()=>!0}},emits:["update:value"],setup(e,{expose:t,emit:n}){const i=e,a=ie("resources"),s=ie("service"),o=k([]),r=()=>{let b=[],A=h=>{h.id.endsWith("-root")?b.push({type:"root",id:h.type}):b.push({type:h.folder?"group":h.type,id:h.id}),h.children&&h.children.filter(d=>d.selected).forEach(d=>A(d))};o.value.filter(h=>h.selected).forEach(h=>A(h)),n("update:value",i.single?b[0]:b)},l=(b,A)=>{let h=[];return b&&b.forEach(d=>{var S;if(d.folder||i.file){if(d.folder)d.icon="list";else{const I=(S=s[A.type])==null?void 0:S.getIcon;d.icon=I&&I(d)||A.icon,d.textIcon=I!==void 0,d.type=A.type}h.push(d)}d.folder&&d.children&&(d.children=l(d.children,A))}),h},u=b=>{let A=b,h=[],d=S=>{S.forEach(I=>{I.id===A?(h.push(I),A=I.parentId||I.groupId,d(o.value)):I.children&&I.children.length>0&&d(I.children)})};return d(o.value),h},c=(b,A)=>{A!==void 0&&(b.selected=A);let h=d=>{d.selected=i.single?!1:b.selected,d.checkedHalf=i.single?!1:!b.selected,d.children&&d.children.forEach(S=>h(S))};b.children&&b.children.forEach(d=>h(d)),b.folder&&(b.checkedHalf=!1),u(b.folder?b.parentId:b.groupId).forEach(d=>{d.selected=i.single?!1:d.children.some(S=>S.selected),d.checkedHalf=i.single?!1:d.children.some(S=>!S.selected||S.checkedHalf)}),i.single?n("update:value",b.selected?b:void 0):r()},f=b=>c(b,!b.selected);return a().filter(b=>!i.type||i.type===b.navbar.type).forEach(b=>{const A=b.navbar.type,h=l(b.tree,b.navbar);h.forEach(d=>{d.folder?d.parentId=A+"-root":d.groupId=A+"-root"}),o.value.push({icon:b.navbar.icon,name:b.navbar.title,iconClass:"root",folder:!0,opened:!0,type:b.navbar.type,id:A+"-root",children:h})}),t({selectAll:b=>Xe(o.value,A=>{A.checkedHalf=!1,A.selected=b,A.children&&A.children.forEach(h=>h.selected=b),r()}),expand:b=>Xe(o.value,A=>{A.folder&&(A.opened=b)})}),(b,A)=>{const h=v("magic-checkbox"),d=v("magic-icon"),S=v("magic-text-icon"),I=v("magic-tree");return E(),L("div",Ou,[p(I,{data:o.value,sort:!1,onItemClick:f},{folder:C(({item:y})=>[p(h,{value:y.selected,"onUpdate:value":R=>y.selected=R,"checked-half":y.checkedHalf,onChange:R=>c(y)},null,8,["value","onUpdate:value","checked-half","onChange"]),y.children&&y.children.length>0?(E(),U(d,{key:0,icon:y.opened?"arrow-bottom":"arrow-right",onClick:ge(R=>y.opened=!y.opened,["stop"])},null,8,["icon","onClick"])):te("",!0),p(d,{icon:y.icon,class:de(y.iconClass)},null,8,["icon","class"]),x("label",null,j(y.name),1),y.path?(E(),L("span",Au,"("+j(y.path)+")",1)):te("",!0)]),file:C(({item:y})=>[p(h,{value:y.selected,"onUpdate:value":R=>y.selected=R,"checked-half":y.checkedHalf,onChange:R=>c(y)},null,8,["value","onUpdate:value","checked-half","onChange"]),y.textIcon?(E(),U(S,{key:0,icon:y.icon},null,8,["icon"])):(E(),U(d,{key:1,icon:y.icon},null,8,["icon"])),x("label",null,j(y.name),1),y.path?(E(),L("span",Ru,"("+j(y.path)+")",1)):te("",!0)]),_:1},8,["data"])])}}};var xu=V(Iu,[["__scopeId","data-v-7eb90c29"]]),Cu=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:xu});const Lu={class:"magic-form-row"},Nu=x("label",null,"\u540D\u79F0",-1),ku={class:"magic-form-row"},Pu=x("label",null,"Key",-1),wu={class:"magic-form-row"},Du=x("label",null,"URL",-1),$u={class:"magic-form-row"},Mu=x("label",null,"\u7528\u6237\u540D",-1),Uu={class:"magic-form-row"},Bu=x("label",null,"\u5BC6\u7801",-1),Fu={class:"magic-form-row"},ju=x("label",null,"\u9A71\u52A8\u7C7B",-1),Gu={class:"magic-form-row"},Vu=x("label",null,"\u7C7B\u578B",-1),Hu={class:"magic-form-row"},Yu=x("label",null,"maxRows",-1),Ku={class:"magic-form-row"},Wu=x("label",null,"\u5176\u5B83\u914D\u7F6E",-1),qu={props:{info:Object},setup(e){const{info:t}=e,n=k(JSON.stringify(t.properties||{}));return mt(n,i=>{try{t.properties=JSON.parse(i)}catch{t.properties={}}}),(i,a)=>{const s=v("magic-input"),o=v("magic-select"),r=v("magic-monaco-editor");return E(),L(ee,null,[x("div",Lu,[Nu,p(s,{value:e.info.name,"onUpdate:value":a[0]||(a[0]=l=>e.info.name=l),placeholder:"\u6570\u636E\u6E90\u540D\u79F0\uFF0C\u4EC5\u505A\u5C55\u793A\u4F7F\u7528"},null,8,["value"])]),x("div",ku,[Pu,p(s,{value:e.info.key,"onUpdate:value":a[1]||(a[1]=l=>e.info.key=l),placeholder:"\u6570\u636E\u5E93key\uFF0C\u540E\u7EED\u4EE3\u7801\u4E2D\u4F7F\u7528"},null,8,["value"])]),x("div",wu,[Du,p(s,{value:e.info.url,"onUpdate:value":a[2]||(a[2]=l=>e.info.url=l),placeholder:"\u8BF7\u8F93\u5165jdbcurl\uFF0C\u5982\uFF1Ajdbc:mysql://localhost"},null,8,["value"])]),x("div",$u,[Mu,p(s,{value:e.info.username,"onUpdate:value":a[3]||(a[3]=l=>e.info.username=l),placeholder:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u7528\u6237\u540D"},null,8,["value"])]),x("div",Uu,[Bu,p(s,{value:e.info.password,"onUpdate:value":a[4]||(a[4]=l=>e.info.password=l),type:"password",placeholder:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u5BC6\u7801"},null,8,["value"])]),x("div",Fu,[ju,p(o,{inputable:"",value:e.info.driverClassName,"onUpdate:value":a[5]||(a[5]=l=>e.info.driverClassName=l),width:"100%",options:i.$JDBC_DRIVERS.map(l=>({text:l,value:l})),placeholder:"\u9A71\u52A8\u7C7B\uFF0C\u53EF\u9009\uFF0C\u5185\u90E8\u81EA\u52A8\u8BC6\u522B\uFF0C\u4E5F\u53EF\u4EE5\u624B\u52A8\u8F93\u5165\u6307\u5B9A"},null,8,["value","options"])]),x("div",Gu,[Vu,p(o,{inputable:"",value:e.info.type,"onUpdate:value":a[6]||(a[6]=l=>e.info.type=l),width:"100%",options:i.$DATASOURCE_TYPES.map(l=>({text:l,value:l})),placeholder:"\u6570\u636E\u6E90\u7C7B\u578B\uFF0C\u53EF\u9009\uFF0C\u4E5F\u53EF\u4EE5\u624B\u52A8\u8F93\u5165\u6307\u5B9A"},null,8,["value","options"])]),x("div",Hu,[Yu,p(s,{value:e.info.maxRows,"onUpdate:value":a[7]||(a[7]=l=>e.info.maxRows=l),placeholder:"\u6700\u591A\u8FD4\u56DE\u6761\u6570\uFF0C-1\u672A\u4E0D\u9650\u5236","default-value":-1,type:"number"},null,8,["value"])]),x("div",Ku,[Wu,p(r,{language:"json",value:n.value,"onUpdate:value":a[8]||(a[8]=l=>n.value=l),style:{height:"150px"}},null,8,["value"])])],64)}}};var Xu=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:qu});const zu=e=>(Ke("data-v-0e33e135"),e=e(),We(),e),Ju={class:"magic-backup"},Qu={class:"magic-backup-diff-container"},Zu={class:"magic-backup-diff-header"},ec=zu(()=>x("div",null,"\u5F53\u524D\u7248\u672C",-1)),tc={setup(e){const t=k(!0),n=[{icon:"refresh",title:"\u5237\u65B0",onClick(){m()}},{icon:"copy",title:"\u5168\u91CF\u5907\u4EFD",onClick(){Y.sendPost("/backup/full").success(()=>{g.status("\u5168\u91CF\u5907\u4EFD\u5B8C\u6BD5"),m()})}}],i=k([]),a=k([]),s=k(!1),o=k(!0),r=k(""),l=k({});let u=!1,c=!1,f;const m=y=>{t.value=!0,Y.sendGet("/backups",{timestamp:y}).success(R=>{y?a.value.push(...R):a.value=R,(c=R.length>=100)&&(f=R[R.length-1].createDate),t.value=!1})},O=ie("service"),b=y=>{var R;return y.endsWith("-group")?O[y.replace("-group","")].name+"\u5206\u7EC4":y==="full"?"\u5168\u91CF\u5907\u4EFD":((R=O[y])==null?void 0:R.name)||y};let A=!1;g.$on(D.LOAD_RESOURCES_FINISH,y=>y||m());const h=()=>{c&&!u&&m(f)};ht(()=>{!A&&w.LOGINED&&m(),A=!0});const{proxy:d}=At(),S=(y,R)=>{const $=[];R.id!=="full"&&!R.id.endsWith("-group")&&$.push({icon:"difference",label:"\u5BF9\u6BD4\u4E0D\u540C",onClick(){r.value=xt(R.createDate),s.value=!0,o.value=!0,Promise.all([new Promise(q=>Y.sendGet("/backup",{id:R.id,timestamp:R.createDate}).success(K=>q(K))),new Promise(q=>Y.sendGet("/resource/file/"+R.id).success(K=>q((K==null?void 0:K.script)||"")))]).then(q=>{l.value=R,o.value=!1,i.value=q}).catch(q=>{console.error(q),s.value=!1})}}),(R.id==="full"||!R.id.endsWith("-group"))&&$.push({icon:"rollback",label:"\u8FD8\u539F\u4FEE\u6539",onClick(){const q=`${R.name}(${xt(R.createDate)})`;me.confirm("\u8FD8\u539F\u5907\u4EFD","\u8BE5\u6A21\u5F0F\u662F\u5168\u91CF\u4ECE\u5907\u4EFD\u6587\u4EF6\u4E2D\u8BFB\u53D6\uFF0C\u5E76\u8986\u76D6\u66F4\u65B0\u5F53\u524D\u8D44\u6E90\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F",()=>{Y.sendPost("/backup/rollback",{id:R.id,timestamp:R.createDate}).success(K=>{K?(g.report("resource-rollback-full"),g.status(`\u6062\u590D\u300C${q}\u300D\u6210\u529F`),g.$emit(D.LOAD_RESOURCES)):(me.alert(`\u6062\u590D${q}\u5931\u8D25`),g.status(`\u6062\u590D\u300C${q}\u300D\u5931\u8D25`,!1))})})}}),$.length>0&&d.$contextmenu({event:y,menus:$})},I=()=>{s.value=!1;const y=`${l.value.name}(${xt(l.value.createDate)})`;Y.sendPost("/backup/rollback",{id:l.value.id,timestamp:l.value.createDate}).success(R=>{R?(g.report("resource-rollback"),g.status(`\u6062\u590D\u300C${y}\u300D\u6210\u529F`),g.$emit(D.LOAD_RESOURCES,l.value.type)):(me.alert(`\u6062\u590D${y}\u5931\u8D25`),g.status(`\u6062\u590D\u300C${y}\u300D\u5931\u8D25`,!1))})};return(y,R)=>{const $=v("magic-panel-toolbar"),q=v("magic-loading"),K=v("magic-table-column"),pe=v("magic-table"),Ce=v("magic-empty"),we=v("magic-monaco-diff-editor"),ne=v("magic-button"),ye=v("magic-button-group"),Ze=v("magic-dialog");return E(),L(ee,null,[x("div",Ju,[p($,{toolbars:n}),x("div",null,[p(q,{loading:t.value},null,8,["loading"]),a.value.length>0?(E(),U(pe,{key:0,data:a.value,border:!0,onContextmenu:S,onLoadNext:h},{default:C(()=>[p(K,{title:"\u8BB0\u5F55\u65F6\u95F4",align:"center",width:"160"},{default:C(({row:Re})=>[Ye(j(P(xt)(Re.createDate)),1)]),_:1}),p(K,{title:"\u7C7B\u578B",align:"center",width:"90"},{default:C(({row:Re})=>[x("span",null,j(b(Re.type)),1)]),_:1}),p(K,{title:"\u64CD\u4F5C\u4EBA",align:"center",width:"100"},{default:C(({row:Re})=>[Ye(j(Re.createBy||"guest"),1)]),_:1}),p(K,{title:"\u540D\u79F0"},{default:C(({row:Re})=>[Ye(j(Re.name),1)]),_:1})]),_:1},8,["data"])):(E(),U(Ce,{key:1,text:"\u6682\u65E0\u5386\u53F2\u8BB0\u5F55"}))])]),p(Ze,{value:s.value,"onUpdate:value":R[1]||(R[1]=Re=>s.value=Re),title:"\u5386\u53F2\u8BB0\u5F55",width:"80%",maxWidth:"100%",top:"60px",height:"80%",className:"magic-dialog-diff"},{default:C(()=>[x("div",Qu,[x("div",Zu,[x("div",null,j(r.value),1),ec]),o.value?(E(),U(q,{key:1,loading:o.value},null,8,["loading"])):(E(),U(we,{key:0,value:i.value,"onUpdate:value":R[0]||(R[0]=Re=>i.value=Re),language:"magicscript"},null,8,["value"]))]),p(ye,{align:"right"},{default:C(()=>[p(ne,{value:"\u6062\u590D",type:"active",onClick:I})]),_:1})]),_:1},8,["value"])],64)}}};var nc=V(tc,[["__scopeId","data-v-0e33e135"]]),ic=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:nc});const ot=e=>(Ke("data-v-d6992652"),e=e(),We(),e),ac={class:"magic-debug"},sc={class:"magic-debug-variables"},oc={key:0,viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},rc=ot(()=>x("path",{d:"M201.472 320h-49.6V129.408l-59.2 18.368v-40.32L196.16 70.4h5.312V320z m50.816 320.128H81.024v-33.92l80.832-86.208c6.016-6.656 11.136-12.672 15.36-18.176a133.76 133.76 0 0 0 10.112-15.104 57.728 57.728 0 0 0 5.504-12.8 42.88 42.88 0 0 0 1.6-11.392c0-11.136-2.816-19.84-8.384-26.24-5.632-6.272-13.632-9.472-24.064-9.472a36.224 36.224 0 0 0-15.488 3.2 31.808 31.808 0 0 0-11.328 8.704 39.232 39.232 0 0 0-6.976 13.312 56.32 56.32 0 0 0-2.368 16.832h-49.792c0-11.2 1.984-21.76 6.016-31.744 3.968-9.984 9.792-18.624 17.28-26.112 7.616-7.424 16.704-13.312 27.392-17.664 10.688-4.352 22.784-6.528 36.16-6.528 13.12 0 24.768 1.664 34.88 4.928 10.176 3.2 18.624 7.872 25.536 13.952 6.848 6.08 12.032 13.504 15.616 22.336 3.52 8.768 5.312 18.688 5.312 29.696 0 8.32-1.28 16.384-3.968 24.192-2.56 7.744-6.336 15.552-11.136 23.296a190.08 190.08 0 0 1-17.408 23.68 528.64 528.64 0 0 1-22.784 24.768l-44.096 46.464h107.456v40zM131.456 812.8h26.432c12.608 0 21.888-3.136 27.968-9.408a34.56 34.56 0 0 0 9.088-25.088 38.656 38.656 0 0 0-2.048-12.8 26.304 26.304 0 0 0-16.832-16.704 42.112 42.112 0 0 0-14.912-2.432 41.792 41.792 0 0 0-12.928 1.984 33.664 33.664 0 0 0-10.688 5.568 25.6 25.6 0 0 0-9.856 20.608H78.08a60.8 60.8 0 0 1 6.4-28.032c4.352-8.448 10.176-15.552 17.536-21.44 7.424-5.888 16-10.496 25.984-13.76 9.984-3.2 20.608-4.864 32-4.864 12.544 0 24 1.472 34.368 4.48 10.368 3.072 19.2 7.616 26.688 13.632 7.424 5.952 13.184 13.44 17.28 22.272 4.16 8.896 6.208 19.2 6.208 30.848a52.8 52.8 0 0 1-9.856 30.72 67.968 67.968 0 0 1-28.032 22.976 62.08 62.08 0 0 1 31.488 22.656 61.44 61.44 0 0 1 10.368 35.712 66.56 66.56 0 0 1-25.408 54.336c-7.872 6.208-17.28 10.88-28.032 14.208a121.024 121.024 0 0 1-66.368 0.64 81.92 81.92 0 0 1-27.2-13.248 68.032 68.032 0 0 1-19.2-22.4 66.304 66.304 0 0 1-7.296-32h49.6a29.824 29.824 0 0 0 10.368 22.912 36.48 36.48 0 0 0 11.584 6.592 48.64 48.64 0 0 0 30.4 0 30.336 30.336 0 0 0 19.392-17.792 46.208 46.208 0 0 0-0.256-31.04 28.544 28.544 0 0 0-8.192-11.584 34.304 34.304 0 0 0-12.928-6.592 63.104 63.104 0 0 0-17.088-2.176h-26.432V812.8z",fill:"#9AA7B0"},null,-1)),lc=ot(()=>x("path",{d:"M384 128h512v192H384zM384 768h512v192H384zM384 448h512v192H384z",fill:"#40B6E0","fill-opacity":".7"},null,-1)),uc=[rc,lc],cc={key:1,viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},_c=ot(()=>x("path",{d:"M192 128h640v192H192zM192 384h640v192H192zM192 640h640v192H192z",fill:"#F4AF3D","fill-opacity":".6"},null,-1)),pc=[_c],dc={class:"key"},hc=ot(()=>x("label",{class:"separator"},"=",-1)),fc={key:2,class:"object-type"},mc={key:3,class:"object-type"},gc={key:0,viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},vc=ot(()=>x("path",{d:"M128 128h768v768H128z",fill:"#40B6E0","fill-opacity":".6","p-id":"8251"},null,-1)),Ec=ot(()=>x("path",{d:"M691.968 704V422.912l-62.464 15.36L613.12 373.76l102.912-30.72h53.76V704h-77.824z m-284.288 6.144c-95.744 0-158.72-80.384-158.72-184.32V524.8c0-103.936 64.512-185.344 159.744-185.344 94.72 0 158.72 80.384 158.72 184.32V524.8c0 103.936-64 185.344-159.744 185.344z m1.408-71.168c47.616 0 77.824-48.128 77.824-113.152V524.8c0-65.024-31.744-114.176-78.848-114.176S330.24 458.24 330.24 523.776V524.8c0 65.536 31.232 114.176 78.848 114.176z",fill:"#231F20","fill-opacity":".7","p-id":"8252"},null,-1)),Tc=[vc,Ec],bc={key:1,viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},Sc=ot(()=>x("path",{d:"M192 128h640v192H192zM192 384h640v192H192zM192 640h640v192H192z",fill:"#F4AF3D","fill-opacity":".6"},null,-1)),yc=[Sc],Oc={class:"key"},Ac=ot(()=>x("label",{class:"separator"},"=",-1)),Rc={key:2,class:"object-type"},Ic={setup(e){const t=ie("opened"),n=_e(()=>!t.value.variables),i=k([{title:"\u7EE7\u7EED(F8)",icon:"continue",disabled:n,onClick(){g.$emit(D.DEBUG_CONTINUE)}},{title:"\u5355\u6B65(F6)",icon:"step-over",disabled:n,onClick(){g.$emit(D.DEBUG_SETPINTO)}},{title:"\u5C55\u5F00",icon:"expand-all",disabled:n,onClick:()=>Xe(t.value.variables,a=>a.opened=!0)},{title:"\u6298\u53E0",icon:"collapse-all",disabled:n,onClick:()=>Xe(t.value.variables,a=>a.opened=!1)}]);return(a,s)=>{const o=v("magic-panel-toolbar"),r=v("magic-icon"),l=v("magic-tree"),u=v("magic-empty");return E(),L("div",ac,[p(o,{toolbars:i.value},null,8,["toolbars"]),x("div",sc,[P(t).variables?(E(),U(l,{key:0,data:P(t).variables},{folder:C(({item:c})=>[p(r,{icon:c.opened?"arrow-bottom":"arrow-right",onClick:ge(f=>c.opened=!c.opened,["stop"])},null,8,["icon","onClick"]),c.dataType==="array"?(E(),L("svg",oc,uc)):(E(),L("svg",cc,pc)),x("label",dc,j(c.name),1),hc,c.size?(E(),L("span",fc,"("+j(c.size)+")",1)):te("",!0),c.type?(E(),L("span",mc,j(`{${c.type}}`),1)):te("",!0)]),file:C(({item:c})=>[p(r,{icon:"empty"}),c.dataType==="number"?(E(),L("svg",gc,Tc)):(E(),L("svg",bc,yc)),x("label",Oc,j(c.name),1),Ac,x("span",{class:de(["magic-data-type",c.dataType])},j(c.value),3),c.type&&!c.isNull?(E(),L("span",Rc," ("+j(c.type)+")",1)):te("",!0)]),_:1},8,["data"])):(E(),U(u,{key:1,text:"\u6682\u65E0\u53D8\u91CF\u4FE1\u606F"}))])])}}};var xc=V(Ic,[["__scopeId","data-v-d6992652"]]),Cc=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:xc});const Lc={class:"magic-event"},Nc=["innerHTML"],kc={setup(e){const t=g.getStatusLog(),n=[{title:"\u6E05\u7A7A",icon:"clear",onClick:()=>{g.clearStatusLog()}}];return(i,a)=>{const s=v("magic-panel-toolbar"),o=v("magic-table-column"),r=v("magic-table");return E(),L("div",Lc,[p(s,{toolbars:n}),x("div",null,[p(r,{data:P(t),border:""},{default:C(()=>[p(o,{title:"\u65F6\u95F4",width:"180"},{default:C(({row:l})=>[Ye(j(l.timestamp),1)]),_:1}),p(o,{title:"\u4E8B\u4EF6\u5185\u5BB9"},{default:C(({row:l})=>[x("div",{innerHTML:l.content},null,8,Nc)]),_:1})]),_:1},8,["data"])])])}}};var Pc=V(kc,[["__scopeId","data-v-5b6fa67c"]]),wc=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Pc});const Dc=["innerHTML"],$c=["onClick"],Mc={setup(e){const t=k([]),n=k(null),{proxy:i}=At(),a=o=>{i.$contextmenu({event:o,menus:[{icon:"delete",label:"\u6E05\u7A7A\u65E5\u5FD7",onClick:()=>t.value.splice(0)},{icon:"expand-all",label:"\u5168\u90E8\u5C55\u5F00",onClick:()=>t.value.forEach(r=>r.showMore=!0)},{icon:"collapse-all",label:"\u5168\u90E8\u6536\u7F29",onClick:()=>t.value.forEach(r=>r.showMore=!1)}]})},s=o=>{const r=o.map(l=>{let u=l.replace(/[&<>]/gm,function(f){return f==="&"?"&amp;":f==="<"?"&lt;":f===">"?"&gt;":""});u=u.replace(/(\d{4}-\d{2}-\d{2}\s\d{2}:\d{2}:\d{2}.\d{3}\s+)([^\s]+)( --- \[)(.{15})(] )(.{40})/gm,'$1 <span class="log-$2">$2</span>$3$4$5<span class="log-cyan">$6</span>'),u=u.replace(/(https?:\/\/[^\s]+)/gm,'<a class="log-link" href="$1" target="blank">$1</a>'),u=u.replace(/(\tat .*\()(.*?:\d+)(\).*?[\r\n])/g,'$1<span style="color:#808080;text-decoration: underline;">$2</span>$3');let c=l.split(`
`).length;return{html:u,multiple:c>3,lines:c-4,showMore:!1}});r&&(t.value.push(...r),Ie(()=>{n.value&&(n.value.scrollTop=n.value.scrollHeight)}))};return g.$event(Ae.LOGS,([o])=>s(o)),g.$event(Ae.LOG,([o])=>s([o])),(o,r)=>{const l=v("magic-empty");return E(),L("div",{class:"magic-log-wrapper",onContextmenu:r[0]||(r[0]=ge(u=>a(u),["prevent"]))},[!t.value||t.value.length===0?(E(),U(l,{key:0,text:"\u6682\u65E0\u65E5\u5FD7"})):(E(),L("div",{key:1,class:"magic-log",ref_key:"element",ref:n},[(E(!0),L(ee,null,ue(t.value,(u,c)=>(E(),L("div",{class:de({multiple:u.multiple,more:u.showMore}),key:"run_log_"+c},[x("pre",{innerHTML:u.html},null,8,Dc),u.multiple?(E(),L("span",{key:0,class:"multiple",onClick:f=>u.showMore=!u.showMore},j(u.showMore?"\u70B9\u51FB\u9690\u85CF\u591A\u884C\u65E5\u5FD7":`\u6709 ${u.lines} \u884C\u65E5\u5FD7\u88AB\u9690\u85CF \u70B9\u51FB\u663E\u793A`),9,$c)):te("",!0)],2))),128))],512))],32)}}};var Uc=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Mc});const Bc={class:"magic-online"},Fc={setup(e){const t=nt([]),n=ie("activateUserFiles"),i=(s,o)=>{const r=t.find(l=>l.cid===s);r&&(Object.values(n.value).forEach(l=>{const u=l.findIndex(c=>c.cid===s);u>-1&&l.splice(u,1)}),n.value[o]=n.value[o]||[],n.value[o].push(r))},a=s=>{t.some(o=>o.cid===s.cid)||t.push(s)};return g.$event(Ae.LOGIN_RESPONSE,([s,o])=>{n.value={},t.splice(0,t.length),s==="1"&&(a(o),g.send(Ae.GET_ONLINE))}),g.$event(Ae.USER_LOGIN,([s])=>{w.CLIENT_ID!==s.cid&&(g.$emit(D.NOTIFY,{title:"\u7528\u6237\u4E0A\u7EBF",content:`\u7528\u6237${s.username}\u5DF2\u4E0A\u7EBF\uFF0CIP:${s.ip}`,duration:3e3}),g.status(`\u7528\u6237${s.username}\u5DF2\u4E0A\u7EBF\uFF0CIP:${s.ip}`)),a(s)}),g.$event(Ae.USER_LOGOUT,([s])=>{w.CLIENT_ID!==s.cid&&(g.$emit(D.NOTIFY,{title:"\u7528\u6237\u4E0B\u7EBF",content:`\u7528\u6237${s.username}\u5DF2\u4E0B\u7EBF\uFF0CIP:${s.ip}`,duration:3e3}),g.status(`\u7528\u6237${s.username}\u5DF2\u4E0B\u7EBF\uFF0CIP:${s.ip}`));const o=t.findIndex(r=>r.cid===s.cid);i(s.cid,"0"),o>-1&&t.splice(o,1)}),g.$event(Ae.ONLINE_USERS,([s])=>{s.forEach(o=>{w.CLIENT_ID!==o.cid&&(a(o),o.fileId&&i(o.cid,o.fileId))})}),g.$event(Ae.INTO_FILE_ID,([s,o])=>i(s,o)),(s,o)=>{const r=v("magic-avatar-group");return E(),L("div",Bc,[p(r,{users:P(t),max:9},null,8,["users"]),x("span",null,"\u5F53\u524D\u5728\u7EBF\uFF1A"+j(P(t).length)+"\u4EBA",1)])}}};var jc=V(Fc,[["__scopeId","data-v-788b49dc"]]),Gc=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:jc});const Vc={class:"magic-status-bar"},Hc=["innerHTML"],Yc=["title","onClick"],Kc={props:{config:Object},setup(e){const t=e,n=k(null),i=[{icon:"gitee",title:"Gitee",displayKey:"repo",onClick:()=>window.open("https://gitee.com/ssssssss-team/magic-api")},{icon:"git",title:"Github",displayKey:"repo",onClick:()=>window.open("https://github.com/ssssssss-team/magic-api")},{icon:"qq",title:"\u52A0\u5165QQ\u7FA4",displayKey:"qqGroup",onClick:()=>window.open("https://qm.qq.com/cgi-bin/qm/qr?k=Q6dLmVS8cHwoaaP18A3tteK_o0244e6B&jump_from=webapi")},{icon:"help",title:"\u5E2E\u52A9\u6587\u6863",displayKey:"document",onClick:()=>window.open("https://ssssssss.org/magic-api")}],a=_e(()=>{const o=i.filter(r=>t.config.header[r.displayKey]!==!1);return n.value&&n.value.id&&n.value.username&&o.push({icon:"logout",title:n.value.username,onClick:()=>me.confirm("\u6CE8\u9500\u767B\u5F55",`\u662F\u5426\u8981\u6CE8\u9500\u767B\u5F55\u300C${n.value.username}\u300D`,()=>Y.sendPost("/logout").success(()=>{n.value=null,w.HEADER_MAGIC_TOKEN_VALUE="unauthorization",w.LOGINED=!1,je.remove(w.STORE.token),g.$emit(D.LOGOUT),g.status("\u6CE8\u9500\u767B\u5F55\u6210\u529F")}))}),o}),s=k("");return g.$on(D.LOGINED,()=>{g.status("\u83B7\u53D6\u5F53\u524D\u767B\u5F55\u7528\u6237\u4FE1\u606F"),Y.send("/user").success(o=>n.value=o)}),g.$on(D.STATUS,o=>s.value=o),(o,r)=>{const l=v("magic-online"),u=v("magic-icon");return E(),L("div",Vc,[x("div",{class:"message",innerHTML:s.value},null,8,Hc),p(l),x("ul",null,[(E(!0),L(ee,null,ue(P(a),(c,f)=>(E(),L("li",{title:c.title,key:f,onClick:ge(c.onClick,["stop"])},[p(u,{icon:c.icon},null,8,["icon"])],8,Yc))),128))])])}}};var Wc=V(Kc,[["__scopeId","data-v-7891cbf6"]]),qc=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Wc});const Xc={class:"magic-todo"},zc={key:3},Jc={class:"todo"},Qc={setup(e){const t=k(!0),n=[{icon:"refresh",title:"\u5237\u65B0",onClick(){c()}},{icon:"expand-all",title:"\u5C55\u5F00",onClick:()=>Xe(i.value,m=>m.opened=!0)},{icon:"collapse-all",title:"\u6298\u53E0",onClick:()=>Xe(i.value,m=>m.opened=!1)}],i=k([]),a=ie("resources"),s={},o=m=>{(m.groupId||m.line)&&g.$emit(D.OPEN_WITH_ID,m.id)},r=(m,O)=>{let b=m.find(A=>A.id===O);if(!b)for(let A=0;A<m.length;A++){const h=m[A];if(h.folder&&(b=r(h.children||[],O)))return b._type=h.type,b}return b},l=m=>{let O=[];return m.forEach(b=>{b.line>0?O.push(b):b.folder&&b.children&&(b.children=l(b.children),b.children.length&&O.push(b))}),O},u=ie("service"),c=()=>{i.value=[],t.value=!0,Y.sendGet("/todo").success(m=>{const O=a();O.forEach(A=>s[A.navbar.type]=A.navbar);let b=!1;m.forEach(A=>{for(let h=0;h<O.length;h++){const d=O[h],S=r(d.tree,A.id);if(S){S.folder=!0,S.children=S.children||[],S.icon=u[S._type].getIcon(S),S.children.push(ce({},A)),d.display=!0,b=!0;break}}}),b&&(i.value=l(O.filter(A=>A.display).map(A=>({folder:!0,icon:A.navbar.icon,name:A.navbar.title,children:A.tree,root:!0}))),Xe(i.value,A=>A.opened=!0)),t.value=!1})};let f=!1;return g.$on(D.LOAD_RESOURCES_FINISH,c),ht(()=>{!f&&w.LOGINED&&c(),f=!0}),(m,O)=>{const b=v("magic-panel-toolbar"),A=v("magic-loading"),h=v("magic-icon"),d=v("magic-text-icon"),S=v("magic-tree"),I=v("magic-empty");return E(),L("div",Xc,[p(b,{toolbars:n}),x("div",null,[p(A,{loading:t.value},null,8,["loading"]),i.value.length>0?(E(),U(S,{key:0,data:i.value,onItemClick:o},{folder:C(({item:y})=>[p(h,{icon:y.opened?"arrow-bottom":"arrow-right",onClick:ge(R=>y.opened=!y.opened,["stop"])},null,8,["icon","onClick"]),y.root?(E(),U(h,{key:0,icon:y.icon},null,8,["icon"])):y.icon?(E(),U(d,{key:1,icon:y.icon},null,8,["icon"])):(E(),U(h,{key:2,icon:"list"})),x("label",null,j(y.name),1),y.path?(E(),L("span",zc,"("+j(y.path)+")",1)):te("",!0)]),file:C(({item:y})=>[p(h),p(h,{icon:"todo"}),x("label",Jc,j(y.text),1)]),_:1},8,["data"])):(E(),U(I,{key:1,text:"\u6682\u65E0TODO\u4E8B\u9879"}))])])}}};var Zc=V(Qc,[["__scopeId","data-v-4bb5213c"]]),e_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Zc});const t_={class:"magic-toolbar"},n_={class:"magic-toolbar-header"},i_={class:"magic-toolbar-header-buttons"},a_={setup(e){const t=k(null),n=nt([{type:"api",title:"\u63A5\u53E3\u4FE1\u606F",icon:"parameter",component:Ue(J("magic-api-info"))},{id:"response",type:"api",title:"\u6267\u884C\u7ED3\u679C",icon:"run",component:Ue(J("magic-api-response"))},{type:"task",title:"\u5B9A\u65F6\u4EFB\u52A1\u4FE1\u606F",icon:"parameter",component:Ue(J("magic-task-info"))},{type:"function",title:"\u51FD\u6570\u4FE1\u606F",icon:"parameter",component:Ue(J("magic-function-info"))},{type:"group-api",title:"\u63A5\u53E3\u5206\u7EC4",icon:"parameter",component:Ue(J("magic-api-group"))},{id:"debug",type:["api","task"],title:"\u8C03\u8BD5\u4FE1\u606F",icon:"debug-info",component:Ue(J("magic-debug"))},{id:"log",title:"\u8FD0\u884C\u65E5\u5FD7",icon:"log",component:Ue(J("magic-log"))},{type:"api",title:"\u5168\u5C40\u53C2\u6570",icon:"settings",component:Ue(J("magic-global"))},{id:"todo",title:"TODO",icon:"todo",component:Ue(J("magic-todo"))},{id:"history",title:"\u5386\u53F2\u8BB0\u5F55",icon:"history",component:Ue(J("magic-backup"))},{id:"event",title:"\u4E8B\u4EF6",icon:"event",component:Ue(J("magic-event")),style:{float:"right"}}]),i=k({}),a=k({});tt("opened",i),tt("info",a);const s=o=>{n.forEach(r=>r.show=r.type===void 0||(Array.isArray(r.type)?r.type.find(l=>l.type===o):r.type===o)),t.value&&t.value.select(n.findIndex(r=>r.show))};return s(""),g.$on(D.OPEN_EMPTY,()=>s("")),g.$on(D.OPEN,o=>{o.responseBlobValue=null,i.value=o,a.value=o.item,s(o.type)}),g.$on(D.OPEN_GROUP,o=>{s("group-"+o.type),a.value=o}),g.$on(D.SWITCH_TOOLBAR,o=>{const r=n.findIndex(l=>l.id===o);r>-1&&t.value.select(r)}),(o,r)=>{const l=v("magic-icon"),u=v("magic-resizer"),c=v("magic-navbar-item"),f=v("magic-navbar");return E(),L("div",t_,[p(f,{direction:"horizontal",ref_key:"navbar",ref:t},{default:C(()=>[(E(!0),L(ee,null,ue(P(n),(m,O)=>(E(),U(c,rt({key:O},m),{default:C(()=>[p(u,{direction:"y",max:600,min:250},{default:C(()=>[x("div",n_,[x("label",null,j(m.title),1),x("div",i_,[p(l,{icon:"minimize",size:"14px",title:"\u6700\u5C0F\u5316",onClick:r[0]||(r[0]=b=>t.value.select(-1))})])]),(E(),U(J(m.component)))]),_:2},1024)]),_:2},1040))),128))]),_:1},512)])}}};var s_=V(a_,[["__scopeId","data-v-fc870322"]]),o_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:s_});const r_={class:"magic-panel-function"},l_={props:{info:Object},setup(e){const{info:t}=e,n=k(-1),i=k(Pe(t.parameters));return(a,s)=>{const o=v("magic-panel-common-toolbar"),r=v("magic-input"),l=v("magic-table-column"),u=v("magic-select"),c=v("magic-table");return E(),L("div",r_,[p(o,{index:n.value,"onUpdate:index":s[0]||(s[0]=f=>n.value=f),value:i.value},null,8,["index","value"]),p(c,{data:i.value,border:"",onClickRow:s[1]||(s[1]=f=>n.value=f)},{default:C(()=>[p(l,{title:"\u53C2\u6570\u540D",width:"20%"},{default:C(({row:f})=>[p(r,{value:f.name,"onUpdate:value":m=>f.name=m,border:!1},null,8,["value","onUpdate:value"])]),_:1}),p(l,{title:"\u53C2\u6570\u7C7B\u578B",width:"20%"},{default:C(({row:f})=>[p(u,{options:a.$FUNCTION_RETURN_TYPES,value:f.dataType,"onUpdate:value":m=>f.dataType=m,"default-select":a.$DEFAULT_FUNCTION_RETURN_TYPE,border:!1},null,8,["options","value","onUpdate:value","default-select"])]),_:1}),p(l,{title:"\u63CF\u8FF0",flex:"1"},{default:C(({row:f})=>[p(r,{value:f.description,"onUpdate:value":m=>f.description=m,border:!1},null,8,["value","onUpdate:value"])]),_:1})]),_:1},8,["data"])])}}};var u_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:l_});const c_={setup(e){const t=k(!1),n=k([]);g.$on(D.DO_DOWNLOAD,()=>t.value=!0);const i=()=>{n.value.length?Y.sendJson("/download",n.value,{method:"post",headers:{"Content-Type":"application/json"},transformRequest:[],responseType:"blob"}).success(a=>{_n(a,"magic-api.zip"),g.status("\u6570\u636E\u5DF2\u5BFC\u51FA\u5B8C\u6BD5"),t.value=!1,g.report("resource-export")}):me.alert("\u8BF7\u9009\u62E9\u4E4B\u540E\u5728\u8FDB\u884C\u5BFC\u51FA\uFF01")};return(a,s)=>{const o=v("magic-resource-choose"),r=v("magic-button"),l=v("magic-button-group"),u=v("magic-dialog");return E(),U(u,{title:"\u5BFC\u51FA",value:t.value,"onUpdate:value":s[5]||(s[5]=c=>t.value=c),shade:!1,padding:"0",width:"400px",top:"60px",overflow:"hidden"},{default:C(()=>[p(o,{ref:"resource",value:n.value,"onUpdate:value":s[0]||(s[0]=c=>n.value=c)},null,8,["value"]),p(l,{align:"right",style:{margin:"5px 0","margin-right":"5px"}},{default:C(()=>[p(r,{value:"\u5C55\u5F00",onOnClick:s[1]||(s[1]=c=>a.$refs.resource.expand(!0))}),p(r,{value:"\u6536\u7F29",onOnClick:s[2]||(s[2]=c=>a.$refs.resource.expand(!1))}),p(r,{value:"\u5168\u9009",onOnClick:s[3]||(s[3]=c=>a.$refs.resource.selectAll(!0))}),p(r,{value:"\u53D6\u6D88\u5168\u9009",onOnClick:s[4]||(s[4]=c=>a.$refs.resource.selectAll(!1))}),p(r,{type:"active",value:"\u5BFC\u51FA",onOnClick:i})]),_:1})]),_:1},8,["value"])}}};var __=V(c_,[["__scopeId","data-v-17f31570"]]),p_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:__});const d_={class:"magic-header"},h_={class:"magic-logo"},f_=["title"],m_=["title"],g_={class:"magic-header-title"},v_=["title","onClick"],E_={class:"magic-skin-selector"},T_=["onClick"],b_={props:{title:{type:String,default:"magic-api"},themeStyle:Object},setup(e){const{themeStyle:t}=e,n=w.MAGIC_API_VERSION_TEXT,i=k(!1),a=k({}),s=k("");g.$on(D.OPEN_EMPTY,()=>{s.value="",a.value={}}),g.$on(D.OPEN,u=>{a.value=u,s.value=u.path(),mt(u,()=>{a.value===u&&(s.value=u.path())})});const o=k([{name:"\u8FD0\u884C(Ctrl + Q)",icon:"run",disabled:_e(()=>a.value.runnable!==!0||a.value.running===!0),onClick:()=>g.$emit(D.DO_TEST)},{name:"\u4FDD\u5B58(Ctrl + S)",icon:"save",onClick:()=>g.$emit(D.DO_SAVE,!0)},{name:"\u641C\u7D22(Ctrl + Shift + F)",icon:"search",onClick:()=>g.$emit(D.DO_SEARCH)},{name:"\u4E0A\u4F20",icon:"upload",onClick:()=>g.$emit(D.DO_UPLOAD)},{name:"\u5BFC\u51FA",icon:"download",onClick:()=>g.$emit(D.DO_DOWNLOAD)},{name:"\u63A8\u9001",icon:"push",onClick:()=>g.$emit(D.DO_PUSH)},{name:"\u76AE\u80A4",icon:"skin",onClick:()=>i.value=!i.value},{name:"\u91CD\u65B0\u52A0\u8F7D\u6240\u6709\u6570\u636E",icon:"refresh",onClick:()=>g.$emit(D.RELOAD_RESOURCES)}]),r=u=>{w.THEME=u,g.$emit(D.SWITCH_THEME,u),g.status(`\u5207\u6362\u76AE\u80A4\u81F3\u300C${u}\u300D`),qe.setTheme(u),Object.keys(t).forEach(f=>t[f]=void 0);let c=Ht[u];je.set(w.STORE.theme,u),Object.keys(c).forEach(f=>t[`--${f}`]=c[f]),i.value=!1},l=je.get(w.STORE.theme);return l!==w.THEME&&Ht[l]&&r(l),(u,c)=>{const f=v("magic-icon");return E(),L(ee,null,[x("div",d_,[x("div",h_,[x("label",{title:e.title},j(e.title),9,f_),x("label",{title:P(n)},j(P(n)),9,m_)]),x("div",g_,j(s.value),1),x("ul",null,[(E(!0),L(ee,null,ue(o.value,(m,O)=>(E(),L("li",{key:O,title:m.name,onClick:ge(b=>m.disabled!==!0&&m.onClick(),["stop"]),class:de({disabled:m.disabled===!0})},[p(f,{icon:m.icon},null,8,["icon"])],10,v_))),128))])]),sn(x("div",E_,[x("ul",null,[(E(!0),L(ee,null,ue(Object.keys(P(Ht)),m=>(E(),L("li",{key:"theme_"+m,onClick:O=>r(m)},j(m),9,T_))),128))])],512),[[Kn,i.value]])],64)}}};var S_=V(b_,[["__scopeId","data-v-6bfe1363"]]),y_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:S_});const Ui=e=>(Ke("data-v-32537a17"),e=e(),We(),e),O_={class:"magic-push-form"},A_=Ui(()=>x("label",null,"\u8FDC\u7A0B\u5730\u5740\uFF1A",-1)),R_=Ui(()=>x("label",null,"\u79D8\u94A5\uFF1A",-1)),I_={setup(e){const t=k(!1),n=k([]),i=k("http://host:port/_magic-api-sync"),a=k("123456789");g.$on(D.DO_PUSH,()=>t.value=!0);const s=r=>{Y.sendJson("/push",n.value,{method:"post",headers:{"magic-push-target":i.value,"magic-push-secret-key":a.value,"magic-push-mode":r,"Content-Type":"application/json"},transformRequest:[]}).success(()=>{const l=r==="full"?"\u5168\u91CF\u63A8\u9001":"\u589E\u91CF\u63A8\u9001";g.status(l+"\u6210\u529F"),t.value=!1,g.$emit(D.LOAD_RESOURCES),g.report("resource-push")})},o=r=>{n.value.length?r==="full"?me.confirm("\u8FDC\u7A0B\u63A8\u9001","\u5168\u91CF\u6A21\u5F0F\u63A8\u9001\u65F6\uFF0C\u4EE5\u672C\u5730\u6570\u636E\u4E3A\u51C6\u5168\u91CF\u8986\u76D6\u66F4\u65B0,\u662F\u5426\u7EE7\u7EED\uFF1F",()=>s(r)):s(r):me.alert("\u8BF7\u9009\u62E9\u4E4B\u540E\u5728\u8FDB\u884C\u63A8\u9001\uFF01")};return(r,l)=>{const u=v("magic-resource-choose"),c=v("magic-input"),f=v("magic-button"),m=v("magic-button-group"),O=v("magic-dialog");return E(),U(O,{title:"\u63A8\u9001",value:t.value,"onUpdate:value":l[7]||(l[7]=b=>t.value=b),shade:!1,padding:"0",width:"400px",top:"60px",overflow:"hidden"},{default:C(()=>[p(u,{ref:"resource",value:n.value,"onUpdate:value":l[0]||(l[0]=b=>n.value=b)},null,8,["value"]),x("div",O_,[x("div",null,[A_,p(c,{value:i.value,"onUpdate:value":l[1]||(l[1]=b=>i.value=b)},null,8,["value"])]),x("div",null,[R_,p(c,{value:a.value,"onUpdate:value":l[2]||(l[2]=b=>a.value=b),type:"password"},null,8,["value"])])]),p(m,{align:"right",style:{margin:"5px 0","margin-right":"5px"}},{default:C(()=>[p(f,{value:"\u5168\u9009",onOnClick:l[3]||(l[3]=b=>r.$refs.resource.selectAll(!0))}),p(f,{value:"\u53D6\u6D88\u5168\u9009",onOnClick:l[4]||(l[4]=b=>r.$refs.resource.selectAll(!1))}),p(f,{type:"active",value:"\u589E\u91CF\u63A8\u9001",onOnClick:l[5]||(l[5]=b=>o("increment"))}),p(f,{value:"\u5168\u91CF\u63A8\u9001",onOnClick:l[6]||(l[6]=b=>o("full"))})]),_:1})]),_:1},8,["value"])}}};var x_=V(I_,[["__scopeId","data-v-32537a17"]]),C_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:x_});const L_={class:"magic-search-result"},N_=["onClick"],k_=["innerHTML"],P_={class:"name"},w_=["textContent"],D_={class:"display-text"},$_={setup(e){const t=k(""),n=k(!1),i=ie("findResource"),a=k([]),s=k({}),o=_e(()=>s.value.name+(s.value.path?`(${s.value.path})`:"")),r=A=>{A.script||Y.sendGet(`/resource/file/${A.id}`).success(h=>{A.script=h.script})},l=A=>{s.value=A,r(A),g.$emit(D.OPEN_WITH_ID,A.id),n.value=!1,a.value=[],t.value=""};g.$on(D.DO_SEARCH,()=>{a.value=[],t.value="",n.value=!n.value});let u=null;const c=A=>{const h=[...A.childNodes],d=[];for(;h.length;){const S=h.shift();S.nodeType===S.TEXT_NODE?d.push(S):h.unshift(...S.childNodes)}return d},f=A=>{let h=0;return A.map(d=>{let S=h,I=h+d.wholeText.length;return h=I,{text:d.wholeText,startIdx:S,endIdx:I}})},m=(A,h)=>{const d=[..."[]()?.+*^${}:"].reduce((I,y)=>(I[y]=!0,I),{});h=h.split("").map(I=>d[I]?`\\${I}`:I).join("[\\s\\n]*");const S=new RegExp(h,"gmi");return[...A.matchAll(S)]},O=(A,h,d)=>{for(let S=d.length-1;S>=0;S--){const I=d[S],y=I.index,R=y+I[0].length;for(let $=0;$<h.length;$++){const{text:q,startIdx:K,endIdx:pe}=h[$];if(pe<y)continue;if(K>=R)break;let Ce=A[$];const we=Math.max(0,y-K),ne=Math.min(pe,R)-K-we;we>0&&(Ce=Ce.splitText(we)),ne<Ce.wholeText.length&&Ce.splitText(ne);const ye=document.createElement("span");ye.innerText=q.substr(we,ne),ye.className="keyword",Ce.parentNode.replaceChild(ye,Ce)}}},b=(A,h)=>{if(!h)return A;const d=document.createElement("div");d.innerHTML=A;const S=c(d),I=f(S),y=I.map(({text:$})=>$).join(""),R=m(y,h);return O(S,I,R),d.innerHTML};return mt(t,A=>{const h=A.trim();clearTimeout(u),h&&(u=setTimeout(()=>{Y.send("/search",{keyword:h},{method:"POST"}).success(async d=>{const S=[],I=await ta.getPromise("magicscript");for(let y=0;y<d.length;y++){const R=d[y],$=i(R.id);S.push(Ve(ce({},R),{text:b(await na(R.text,I),h),name:$&&$.name||"unknown",script:""}))}S.length>0&&(s.value=S[0],r(s.value)),a.value=S})},600))}),(A,h)=>{const d=v("magic-input"),S=v("magic-monaco-editor"),I=v("magic-dialog");return E(),U(I,{title:"\u5168\u5C40\u641C\u7D22",value:n.value,"onUpdate:value":h[1]||(h[1]=y=>n.value=y),shade:!1,padding:"0",width:"700px",top:"60px"},{default:C(()=>[p(d,{value:t.value,"onUpdate:value":h[0]||(h[0]=y=>t.value=y),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u5B57\u8FDB\u884C\u641C\u7D22"},null,8,["value"]),a.value.length>0?(E(),L(ee,{key:0},[x("div",L_,[(E(!0),L(ee,null,ue(a.value,(y,R)=>(E(),L("div",{key:R,class:de(["magic-search-result-item",{selected:s.value===y}]),onClick:$=>l(y)},[x("div",{class:"label",innerHTML:y.text},null,8,k_),x("div",P_,j(y.name),1),x("div",{class:"line",textContent:j(y.line)},null,8,w_)],10,N_))),128))]),x("div",D_,j(P(o)),1),p(S,{readonly:"",value:s.value.script,language:"magicscript",style:{width:"100%",height:"300px"},matches:t.value},null,8,["value","matches"])],64)):te("",!0)]),_:1},8,["value"])}}};var M_=V($_,[["__scopeId","data-v-2baa1fdc"]]),U_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:M_});const B_={setup(e){const t=k(!1),n=k(null),i=a=>{if(n.value){const s=new FormData;s.append("file",n.value,n.value.name),s.append("mode",a);const o=()=>{Y.send("/upload",s,{method:"post",headers:{"Content-Type":"multipart/form-data"}}).success(r=>{const l=a==="full"?"\u5168\u91CF\u4E0A\u4F20":"\u589E\u91CF\u4E0A\u4F20";r?(g.status(l+"\u6210\u529F"),t.value=!1,g.$emit(D.LOAD_RESOURCES),g.report(`upload-${a}`)):(g.status(l+"\u5931\u8D25",!1),g.report(`upload-${a}-error`))})};a==="full"?me.confirm("\u4E0A\u4F20","\u5168\u91CF\u6A21\u5F0F\u4E0A\u4F20\u65F6\uFF0C\u4EE5\u4E0A\u4F20\u7684\u6570\u636E\u4E3A\u51C6\u8FDB\u884C\u8986\u76D6\u66F4\u65B0\u64CD\u4F5C\uFF0C\u53EF\u80FD\u4F1A\u5220\u9664\u5176\u4ED6\u63A5\u53E3<br>\u5728\u975E\u5168\u91CF\u5BFC\u51FA\u65F6\uFF0C\u5EFA\u8BAE\u4F7F\u7528\u589E\u91CF\u66F4\u65B0\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F",o):o()}};return g.$on(D.DO_UPLOAD,()=>t.value=!0),(a,s)=>{const o=v("magic-file"),r=v("magic-button"),l=v("magic-button-group"),u=v("magic-dialog");return E(),U(u,{title:"\u4E0A\u4F20",value:t.value,"onUpdate:value":s[3]||(s[3]=c=>t.value=c)},{default:C(()=>[p(o,{value:n.value,"onUpdate:value":s[0]||(s[0]=c=>n.value=c),accept:"application/x-zip-compressed"},null,8,["value"]),p(l,{align:"right",style:{"margin-top":"5px"}},{default:C(()=>[p(r,{value:"\u589E\u91CF\u4E0A\u4F20",type:"active",onClick:s[1]||(s[1]=c=>i("increment"))}),p(r,{value:"\u5168\u91CF\u4E0A\u4F20",onClick:s[2]||(s[2]=c=>i("full"))})]),_:1})]),_:1},8,["value"])}}};var F_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:B_});const j_={class:"magic-data-resource"},G_={class:"magic-data-resource-header"},V_=["title","onClick"],H_={key:1},Y_=["onContextmenu"],K_={props:{type:String,title:String,data:Array},setup(e){const t=e,n=J(`magic-datasource-${t.type}`),i=k(!1),a=k(""),s=k({}),o=k(""),r=k(""),l=k(!0),u=_e(()=>t.data&&t.data.length>0&&t.data[0].children&&t.data[0].children.filter(I=>I.name.indexOf(o.value)>-1||I.key.indexOf(o.value)>-1)||[]),c=ie("service")[t.type],f=[{name:`\u65B0\u5EFA${t.title}`,icon:"plus",onClick:()=>{a.value=`\u521B\u5EFA${t.title}`,r.value="\u521B\u5EFA",s.value={},i.value=!0,l.value=!1}}],m=()=>{c.doTest(s.value)},{proxy:O}=At(),b=(I,y)=>{I.groupId=`${t.type}:0`,Y.sendJson(`/resource/file/${t.type}/save`,I).success(R=>{if(R){I.id===R?g.report("datasource-save"):g.report("datasource-add"),I.id=R,g.status(`${y}\u6210\u529F`),t.data[0].children=t.data[0].children||[];const $=t.data[0].children.find(q=>q.id===I.id);$?Object.keys(I).forEach(q=>$[q]=I[q]):t.data[0].children.push(I),i.value=!1}else g.status(`${y}\u5931\u8D25`,!1),O.$alert(`${y}\u5931\u8D25`)})},A=()=>{const I=ce({},s.value);b(I,`\u4FDD\u5B58${t.title}\u300C${h(I)}\u300D`)},h=I=>`${I.name}(${I.key})`,d=I=>{const y=t.data[0].children.findIndex(R=>R===I);y>-1&&t.data[0].children.splice(y,1)},S=(I,y)=>{const R=[{label:`\u4FEE\u6539${t.title}`,icon:"update",divided:!0,onClick:()=>{l.value=!0,a.value=`\u4FEE\u6539${t.title}`,r.value="\u4FEE\u6539",i.value=!0,g.status(`\u83B7\u53D6${t.title}\u300C${h(I)}\u300D\u8BE6\u60C5`),Y.sendGet(`/resource/file/${I.id}`).success($=>s.value=$).end(()=>{l.value=!1})}},{label:`\u5220\u9664${t.title}`,icon:"delete",onClick:()=>{O.$confirm(`\u5220\u9664${t.title}`,`\u662F\u5426\u8981\u5220\u9664${t.title}\u300C${h(I)}\u300D`,()=>{Y.send("/resource/delete",{id:I.id}).success($=>{g.status(`\u5220\u9664${t.title}\u300C${h(I)}\u300D${$?"\u6210\u529F":"\u5931\u8D25"}`,$),$?(g.report("datasource-delete"),d(I)):O.$alert(`\u5220\u9664${t.title}\u300C${h(I)}\u300D\u5931\u8D25`)})})}},{label:`\u590D\u5236${t.title}`,icon:"copy",divided:!0,onClick:()=>{Y.send(`/resource/file/${I.id}`).success($=>{$.id=void 0,$.name=$.name+"(\u590D\u5236)",$.key=$.key+"_copy",b($,`\u590D\u5236${t.title}\u300C${h($)}\u300D`)})}}];I.lock===w.LOCKED?R.push({label:"\u89E3\u9501",icon:"unlock",onClick:()=>Y.sendPost("/resource/unlock",{id:I.id}).success($=>{g.status(`${t.title}\u300C${h(I)}\u300D\u89E3\u9501${$?"\u6210\u529F":"\u5931\u8D25"}`,$),$&&(I.lock=w.UNLOCK,g.report("resource-unlock"))})}):R.push({label:"\u9501\u5B9A",icon:"lock",onClick:()=>Y.sendPost("/resource/lock",{id:I.id}).success($=>{g.status(`${t.title}\u300C${h(I)}\u300D\u9501\u5B9A${$?"\u6210\u529F":"\u5931\u8D25"}`,$),$&&(I.lock=w.LOCKED,g.report("resource-lock"))})}),O.$contextmenu({menus:R,event:y})};return(I,y)=>{const R=v("magic-icon"),$=v("magic-input"),q=v("magic-empty"),K=v("magic-button"),pe=v("magic-button-group"),Ce=v("magic-loading"),we=v("magic-dialog");return E(),L(ee,null,[x("div",j_,[x("div",G_,[x("ul",null,[(E(),L(ee,null,ue(f,(ne,ye)=>(E(),L(ee,{key:ye},[!ne.show||ne.show()?(E(),L("li",{key:0,title:ne.name||"",onClick:Ze=>ne.onClick&&ne.onClick(),class:de({separator:ne.separator})},[ne.separator?te("",!0):(E(),U(R,{key:0,icon:ne.icon},null,8,["icon"]))],10,V_)):te("",!0)],64))),64))]),p($,{value:o.value,"onUpdate:value":y[0]||(y[0]=ne=>o.value=ne),placeholder:"\u8F93\u5165\u5173\u952E\u5B57\u641C\u7D22",width:"auto"},null,8,["value"]),p(R,{icon:"search",size:"14px"})]),P(u).length===0?(E(),U(q,{key:0,text:`\u6682\u65E0${e.title}\u4FE1\u606F`},null,8,["text"])):(E(),L("ul",H_,[(E(!0),L(ee,null,ue(P(u),(ne,ye)=>(E(),L("li",{key:ye,onContextmenu:ge(Ze=>S(ne,Ze),["prevent"])},[p(R,{icon:"datasource"}),x("label",null,j(ne.name||"\u4E3B\u6570\u636E\u6E90"),1),x("span",null,"("+j(ne.key||"default")+")",1),ne.lock==="1"?(E(),U(R,{key:0,icon:"lock"})):te("",!0)],40,Y_))),128))]))]),p(we,{value:i.value,"onUpdate:value":y[4]||(y[4]=ne=>i.value=ne),title:a.value,width:"450px"},{default:C(()=>[p(Ce,{loading:l.value,style:{"min-height":"200px"}},{default:C(()=>[(E(),U(J(P(n)),{info:s.value},null,8,["info"])),p(pe,{align:"right",style:{padding:"5px 0"}},{default:C(()=>[p(K,{value:r.value,type:"active",onOnClick:y[1]||(y[1]=ne=>A())},null,8,["value"]),p(K,{value:"\u6D4B\u8BD5\u8FDE\u63A5",onOnClick:y[2]||(y[2]=ne=>m())}),p(K,{value:"\u53D6\u6D88",onOnClick:y[3]||(y[3]=ne=>i.value=!1)})]),_:1})]),_:1},8,["loading"])]),_:1},8,["value","title"])],64)}}};var W_=V(K_,[["__scopeId","data-v-79d71f37"]]),q_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:W_});const Zt=e=>(Ke("data-v-39f3ed68"),e=e(),We(),e),X_={class:"magic-login"},z_=Zt(()=>x("label",null,"\u7528\u6237\u540D\uFF1A",-1)),J_=Zt(()=>x("div",{style:{height:"2px"}},null,-1)),Q_=Zt(()=>x("label",null,"\u5BC6\u7801\uFF1A",-1)),Z_=Zt(()=>x("div",{style:{height:"2px"}},null,-1)),ep={props:{value:Boolean},emits:["update:value"],setup(e,{emit:t}){const n=k(""),i=k(""),a=()=>{n.value&&i.value&&Y.sendPost("/login",{username:n.value,password:i.value}).success((s,o)=>{s&&(t("update:value",!1),w.HEADER_MAGIC_TOKEN_VALUE=o.headers[w.HEADER_MAGIC_TOKEN],je.set(w.STORE.token,w.HEADER_MAGIC_TOKEN_VALUE),g.$emit(D.LOGINED))})};return(s,o)=>{const r=v("magic-input"),l=v("magic-button"),u=v("magic-button-group"),c=v("magic-dialog");return E(),U(c,{title:"\u767B\u5F55",showClose:!1,value:e.value,"onUpdate:value":o[2]||(o[2]=f=>on(value)?value.value=f:null)},{default:C(()=>[x("div",X_,[z_,p(r,{onEnter:a,value:n.value,"onUpdate:value":o[0]||(o[0]=f=>n.value=f)},null,8,["value"]),J_,Q_,p(r,{onEnter:a,value:i.value,"onUpdate:value":o[1]||(o[1]=f=>i.value=f),type:"password"},null,8,["value"]),Z_]),p(u,{align:"center"},{default:C(()=>[p(l,{value:"\u767B\u5F55",onOnClick:a})]),_:1})]),_:1},8,["value"])}}};var tp=V(ep,[["__scopeId","data-v-39f3ed68"]]),np=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:tp});function ip(e,t){g.$emit(D.SWITCH_TOOLBAR,"log"),t.headers[w.HEADER_REQUEST_CLIENT_ID]=w.CLIENT_ID,t.headers[w.HEADER_REQUEST_SCRIPT_ID]=e.item.id,t.headers[w.HEADER_MAGIC_TOKEN]=w.HEADER_MAGIC_TOKEN_VALUE,t.headers[w.HEADER_REQUEST_BREAKPOINTS]=(e.decorations||[]).filter(s=>s.options.linesDecorationsClassName==="breakpoints").map(s=>s.range.startLineNumber).join(","),t.responseType="blob",t.validateStatus=()=>!0;let n=0;t.transformResponse=[function(s,o){return n=s.size,o["content-disposition"]?new Promise(r=>r(s)):new Promise(r=>{const l=new FileReader;l.readAsText(s),l.onload=function(){try{r(JSON.parse(this.result))}catch{r(s)}}})}];const i=e.path();g.status(`\u5F00\u59CB\u6D4B\u8BD5\u300C${i}\u300D`);const a=new Date().getTime();Y.execute(t).then(s=>s.data.then(o=>{g.status(`\u300C${i}\u300D\u6D4B\u8BD5\u5B8C\u6BD5\uFF0C\u72B6\u6001\uFF1A<em>${s.status}</em> \u5927\u5C0F\uFF1A<em>${Na(n)}</em> \u8017\u65F6\uFF1A<em>${new Date().getTime()-a} ms</em>`),e.running=!1,(e.responseBlob=o instanceof Blob)?(e.responseBlobValue=o,e.item.responseBody=null,e.item.responseBodyDefinition=null):(e.item.responseBody=JSON.stringify(o),e.item.responseBodyDefinition=Oi(e.item.responseBody,e.item.responseBodyDefinition)),e.responseHeaders=s.headers,Ie(()=>g.$emit(D.SWITCH_TOOLBAR,"response"))})).catch(s=>{g.status(`\u8BF7\u6C42\u51FA\u9519\uFF1A\u300C${i}\u300D`,!1),e.running=!1,Y.processError(s)}),g.report("api-run")}function ap(e){e.running=!0;const t=e.item,n={baseURL:w.SERVER_URL,url:e.requestPath(),method:t.method,headers:{},responseType:"json",withCredentials:!0},i=s=>s.filter(o=>o.value&&o.value.trim()).forEach(o=>n.url=n.url.replace(new RegExp(`{${o.name}}`,"g"),o.value.trim()));if(e.getGroups().filter(s=>s.paths&&s.paths.length>0).map(s=>s.paths).forEach(s=>i(s)),i(t.paths||[]),n.url.indexOf("{")>-1){me.alert("\u8BF7\u586B\u5199\u8DEF\u5F84\u53D8\u91CF\u540E\u5728\u6D4B\u8BD5\uFF01"),e.running=!1;return}w.GLOBAL.headers.filter(s=>s.name).forEach(s=>n.headers[s.name]=s.value),t.headers.filter(s=>s.name).forEach(s=>n.headers[s.name]=s.value);const a={};if(w.GLOBAL.parameters.filter(s=>s.name).forEach(s=>a[s.name]=s.value),t.parameters.filter(s=>s.name).forEach(s=>a[s.name]=s.value),Object.values(a).some(s=>s instanceof FileList||s instanceof File)){n.headers["Content-Type"]="multipart/form-data";const s=new FormData;Object.keys(a).forEach(o=>{let r=a[o];r instanceof FileList?Array.from(r).forEach(l=>s.append(o,l,l.name)):r instanceof File?s.append(o,r,r.name):s.append(o,r)}),n.data=s}else{n.headers["Content-Type"]="application/x-www-form-urlencoded",n.method!=="POST"||t.requestBody?n.params=a:n.data=a;try{if(t.requestBody){const s=JSON.parse(t.requestBody);(Array.isArray(s)&&s.length>0||typeof s=="object"&&Object.keys(s).length>0)&&(n.params=a,n.data=t.requestBody,n.headers["Content-Type"]="application/json",n.transformRequest=[])}}catch{e.running=!1,me.alert("RequestBody \u53C2\u6570\u6709\u8BEF\uFF0C\u8BF7\u68C0\u67E5\uFF01")}}ip(e,n)}var sp={doTest:ap,getIcon:e=>e.method||"GET",runnable:!0,requirePath:!0,name:"\u63A5\u53E3",merge:e=>(e.method=e.method||w.DEFAULT_REQUEST_METHOD,e.parameters=e.parameters||[],e.headers=e.headers||[],e.paths=e.paths||[],e.options=e.options||[],e),processSave:e=>({id:e.id,name:e.name,path:e.path,groupId:e.groupId,lock:e.lock,method:e.method,description:e.description,createBy:e.createBy,createDate:e.createDate,properties:e.properties,script:e.script,responseBody:e.responseBody,responseBodyDefinition:e.responseBodyDefinition,requestBody:e.requestBody,requestBodyDefinition:e.requestBodyDefinition,parameters:e.parameters.filter(t=>t.name),headers:e.headers.filter(t=>t.name),paths:e.paths.filter(t=>t.name),options:e.options.filter(t=>t.name)})},op={getIcon:e=>"function",name:"\u51FD\u6570",runnable:!1,requirePath:!0,merge:e=>(e.parameters=e.parameters||[],e)},rp={getIcon:e=>"websocket",runnable:!1,requirePath:!0,merge:e=>e},lp={getIcon:e=>"task",runnable:!1,requirePath:!1,merge:e=>e},up={getIcon:e=>"task",name:"\u5B9A\u65F6\u4EFB\u52A1",doTest:e=>{e.running=!0;const t=e.item,n={baseURL:w.SERVER_URL,url:"/task/execute",method:"POST",responseType:"json",headers:{},withCredentials:!0};g.$emit(D.SWITCH_TOOLBAR,"log"),n.headers[w.HEADER_REQUEST_CLIENT_ID]=w.CLIENT_ID,n.headers[w.HEADER_REQUEST_SCRIPT_ID]=e.item.id,n.headers[w.HEADER_MAGIC_TOKEN]=w.HEADER_MAGIC_TOKEN_VALUE,n.headers[w.HEADER_REQUEST_BREAKPOINTS]=(e.decorations||[]).filter(a=>a.options.linesDecorationsClassName==="breakpoints").map(a=>a.range.startLineNumber).join(",");const i=e.path();g.status(`\u5F00\u59CB\u6D4B\u8BD5\u5B9A\u65F6\u4EFB\u52A1\u300C${i}\u300D`),Y.sendPost("/task/execute",{id:t.id},n).success(a=>{e.running=!1}).end(()=>{g.status(`\u5B9A\u65F6\u4EFB\u52A1\u300C${i}\u300D\u6D4B\u8BD5\u5B8C\u6BD5`),e.running=!1})},runnable:!0,requirePath:!0,merge:e=>e};let Bn;Q.setExtensionAttribute("org.ssssssss.magicapi.modules.SQLModule",()=>{var e;return Bn&&(((e=Bn("datasource")[0])==null?void 0:e.children)||[]).filter(t=>t.key).map(t=>({name:t.key,type:"org.ssssssss.magicapi.modules.SQLModule",comment:t.name}))||[]});var cp={injectResources:e=>Bn=e,doTest:e=>{Y.sendJson("/datasource/jdbc/test",e).success(t=>{t==="ok"?me.alert("\u8FDE\u63A5\u6210\u529F","\u6D4B\u8BD5\u8FDE\u63A5"):me.alert(`\u8FDE\u63A5\u5931\u8D25\uFF0C\u9519\u8BEF\u539F\u56E0\uFF1A\r
`+t,"\u6D4B\u8BD5\u8FDE\u63A5")})}};const _p={class:"magic-main"},pp={class:"magic-main-body-wrapper"},dp={class:"magic-main-body"},hp={ref:"mrl",class:"magic-navbar magic-navbar__vertical"},fp={ref:"mrr",class:"magic-navbar magic-navbar__vertical reverse"},mp={emits:["onLoad"],setup(e,{expose:t,emit:n}){const i=k(!1),a=k({}),s=k(!0),o=k(null),r=(d,S,I)=>{for(let y=0,R=d.length;y<R;y++){const $=d[y];if($.id===S||$===S)return I.push($),!0;if($.folder&&$.children&&r($.children,S,I))return I.push($),!0}return!1};tt("findResource",d=>{const S=Object.entries(a.value);for(let I=0,y=S.length;I<y;I++){const R=[],$=S[I];if(r($[1],d,R),R.length>0)return{item:R[0],type:$[0],name:ut("/"+R.reverse().map(q=>q.name).join("/")),path:ut("/"+R.reverse().map(q=>q.path||"").join("/"))}}});const l=[{type:"api",title:"\u63A5\u53E3",icon:"api"},{type:"function",title:"\u51FD\u6570",icon:"function"},{type:"task",title:"\u5B9A\u65F6\u4EFB\u52A1",icon:"task"}],u={api:sp,function:op,websocket:rp,task:up,resource:lp,datasource:cp};tt("service",u),l.map(d=>d.type).forEach(d=>a.value[d]=[]);const c=[{type:"datasource",title:"Datasource",icon:"datasource",name:"\u6570\u636E\u6E90"}];c.map(d=>d.type).forEach(d=>a.value[d]=[]),tt("resources",()=>{const d=[...l,...c],S=I=>I.length===1&&I[0].id.endsWith(":0")?I[0].children:I;return d.map(I=>({key:I.type,navbar:I,tree:S(JSON.parse(JSON.stringify(a.value[I.type]||[])))}))}),Object.values(u).forEach(d=>d.injectResources&&d.injectResources(S=>a.value[S])),Ie(()=>i.value=!0);const f=d=>Ve(ce({},d.node),{folder:d.node.parentId!==void 0,opened:d.node.parentId!==void 0,children:d.children&&d.children.length?d.children.map(S=>f(S)):void 0}),m=(d,S)=>{var y;s.value=!0,a.value={};const I=d?((y=l.find(R=>R.type===d)||c.find(R=>R.type===d))==null?void 0:y.title)||"":"\u5168\u90E8";g.status(`\u83B7\u53D6${I}\u8D44\u6E90`),Y.send("/resource").success(R=>{[...l,...c].filter($=>!d||$.type===d).forEach($=>{var q,K;a.value[$.type]=((K=(q=R[$.type])==null?void 0:q.children)==null?void 0:K.map(pe=>f(pe)))||[]}),s.value=!1,g.status(`\u83B7\u53D6${I}\u8D44\u6E90\u5B8C\u6BD5`),Ie(()=>S())})};g.$on(D.RELOAD_RESOURCES,()=>{s.value=!0,Y.sendGet("/reload").success(()=>{g.status("\u91CD\u65B0\u52A0\u8F7D\u8D44\u6E90\u6210\u529F"),m(null,()=>g.$emit(D.RELOAD_RESOURCES_FINISH))}).end(()=>s.value=!1)});const O=d=>m(d,()=>g.$emit(D.LOAD_RESOURCES_FINISH,d));g.$on(D.LOAD_RESOURCES,O),g.$on(D.RELOAD_RESOURCES_FINISH,O);const b=d=>{let S;return Object.values(a.value).some(I=>{const y=[];if(r(I,d,y)){S=y[0];const R=l.findIndex($=>$.type===y[y.length-1].type);return o.value&&o.value.select(R),!0}return!1}),S};g.$on(D.SELECT_NAVBAR_BY_ITEM,b),g.$on(D.OPEN_WITH_ID,d=>{const S=b(d);S&&g.$emit(D.OPEN_ITEM,S)}),g.$on(D.LOGOUT,()=>a.value={}),t({loadResources:O}),ht(()=>n("onLoad"));let A=0;const h=()=>{if(++A%l.length==0)try{JSON.parse(je.get(w.RECENT_OPENED_TAB)||"[]").forEach(d=>{g.$emit(D.OPEN_WITH_ID,d)})}catch(d){console.error(d)}};return(d,S)=>{const I=v("magic-resource"),y=v("magic-loading"),R=v("magic-resizer"),$=v("magic-navbar-item"),q=v("magic-navbar"),K=v("magic-script-editor"),pe=v("magic-toolbar"),Ce=v("magic-data-resource"),we=v("magic-search"),ne=v("magic-export"),ye=v("magic-upload"),Ze=v("magic-push"),Re=v("magic-recent-opened");return E(),L("div",_p,[i.value?(E(),U(q,{key:0,direction:"vertical",to:d.$refs.mrl,ref_key:"mnl",ref:o,spliter:!0},{default:C(()=>[(E(),L(ee,null,ue(l,(Le,Ot)=>p($,rt({key:Ot},Le),{default:C(()=>[p(R,{max:600,min:350,direction:"x"},{default:C(()=>[p(y,{loading:s.value},{default:C(()=>[p(I,rt(Le,{data:a.value[Le.type],onClose:S[0]||(S[0]=Fn=>d.$refs.mnl.select(-1)),onOnLoad:h}),null,16,["data"])]),_:2},1032,["loading"])]),_:2},1024)]),_:2},1040)),64))]),_:1},8,["to"])):te("",!0),x("div",pp,[x("div",dp,[x("div",hp,null,512),p(K),x("div",fp,null,512)]),p(pe)]),p(q,{reverse:!0,"default-select":-1,direction:"vertical",to:d.$refs.mrr,spliter:!0},{default:C(()=>[(E(),L(ee,null,ue(c,(Le,Ot)=>p($,{key:Ot,title:Le.title,icon:Le.icon},{default:C(()=>[i.value?(E(),U(R,{key:0,max:320,min:220,direction:"x",reverse:!0},{default:C(()=>[p(y,{loading:s.value},{default:C(()=>[p(Ce,{type:Le.type,title:Le.name,data:a.value[Le.type],component:Le.component},null,8,["type","title","data","component"])]),_:2},1032,["loading"])]),_:2},1024)):te("",!0)]),_:2},1032,["title","icon"])),64))]),_:1},8,["to"]),p(we),p(ne),p(ye),p(Ze),p(Re)])}}};var gp=V(mp,[["__scopeId","data-v-28b4ae90"]]),vp=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:gp});const Ep={class:"magic-recent-opened"},Tp=["onClick"],bp={key:1},Sp={key:0,style:{width:"100%",height:"100px"}},yp={setup(e){const t=nt([]),n=k(!1),i=ie("findResource"),a=ie("service");try{JSON.parse(je.get(w.RECENT_OPENED)||"[]").forEach(r=>t.push(r))}catch{}const s=_e(()=>t.map(r=>i(r)).filter(r=>r&&a[r.type])),o=r=>{g.$emit(D.OPEN_WITH_ID,r),n.value=!1};return g.$on(D.DO_RECENT,()=>n.value=!n.value),g.$on(D.CLOSE,r=>{if(r.id){const l=t.findIndex(u=>u===r.id);l>-1&&t.splice(l,1),t.unshift(r.id),t.length>20&&t.splice(t.length-1,1),je.set(w.RECENT_OPENED,Pe(t))}}),(r,l)=>{const u=v("magic-text-icon"),c=v("magic-empty"),f=v("magic-dialog");return E(),U(f,{value:n.value,"onUpdate:value":l[0]||(l[0]=m=>n.value=m),title:"\u6700\u8FD1\u6253\u5F00",padding:"0",shade:!1},{default:C(()=>[x("ul",Ep,[(E(!0),L(ee,null,ue(P(s),(m,O)=>(E(),L("li",{key:O,onClick:ge(b=>o(m.item.id),["stop"])},[P(a)[m.type]&&P(a)[m.type].getIcon?(E(),U(u,{key:0,icon:P(a)[m.type].getIcon(m.item)},null,8,["icon"])):te("",!0),x("label",null,j(m.name),1),P(a)[m.type].requirePath&&m.path?(E(),L("span",bp,"("+j(m.path)+")",1)):te("",!0)],8,Tp))),128))]),P(s).length===0?(E(),L("div",Sp,[p(c,{text:"empty."})])):te("",!0)]),_:1},8,["value"])}}};var Op=V(yp,[["__scopeId","data-v-5cd0c142"]]),Ap=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Op});const Bi=e=>(Ke("data-v-01d328f8"),e=e(),We(),e),Rp={class:"magic-resource-header"},Ip=["title","onClick"],xp={key:0},Cp={key:0},Lp={class:"magic-create-group"},Np=Bi(()=>x("label",null,"\u5206\u7EC4\u540D\u79F0\uFF1A",-1)),kp={key:0},Pp=Bi(()=>x("label",null,"\u5206\u7EC4\u8DEF\u5F84\uFF1A",-1)),wp={props:{type:String,title:String,data:Array},emits:["close","onLoad"],setup(e,{emit:t}){const n=e,i=ie("service")[n.type],a=i.requirePath,s=i.getIcon,o=k(""),r=k(!0),l=k(!1),u=k(""),c=k(null),f=ie("activateUserFiles"),m=_e(()=>r.value?"\u521B\u5EFA":"\u4FEE\u6539"),O=k(!0),b=k({}),A=k({}),h=k(!1),d=k({type:n.type}),S=_e(()=>n.data),I=k([{name:"\u65B0\u5EFA\u5206\u7EC4",icon:"group-add",onClick:()=>{d.value={type:n.type,parentId:"0"},r.value=!0,h.value=!0}},{name:"\u5168\u90E8\u5C55\u5F00",icon:"expand-all",onClick:()=>Xe(S.value,N=>N.opened=!0)},{name:"\u5168\u90E8\u6298\u53E0",icon:"collapse-all",onClick:()=>Xe(S.value,N=>N.opened=!1)},{name:"\u6309\u5B57\u6BCD\u964D\u5E8F",icon:"descending",show:()=>O.value,onClick:()=>O.value=!1},{name:"\u6309\u5B57\u6BCD\u5347\u5E8F",icon:"ascending",show:()=>!O.value,onClick:()=>O.value=!0},{separator:!0},{name:"\u5B9A\u4F4D\u5F53\u524D\u6587\u4EF6",icon:"position",onClick:()=>{A.value&&b.value&&(g.$emit(D.SELECT_NAVBAR_BY_ITEM,b.value),A.value.scrollIntoView(b.value))}},{name:"\u9690\u85CF",icon:"minimize",onClick:()=>t("close")}]),y=(N,B,G,F,fe)=>{fe=fe||[],B=B||[];let Ge=B.find(et=>et===N||et.id===N);if(Ge)return G.push(Ge.name),fe.push(Ge),i.requirePath&&Ge.path&&F.push(Ge.path),Ge;for(let et=0,tn=B.length;et<tn;et++){const ke=B[et];if(ke.folder&&ke.children&&(Ge=y(N,ke.children,G,F)))return G.unshift(ke.name),fe.unshift(ke),i.requirePath&&ke.path&&F.unshift(ke.path),Ge}},R=(N,B)=>{const G=[],F=[];y(Pe(N),Pe(S.value),G,F);const fe=F.length>0?ut(`/${F.join("/")}`):"";return B?fe:`/${G.join("/")}${i.requirePath?`(${fe})`:""}`},$=N=>R(N),q=[],K=N=>{if(N)if(N.folder)g.$emit(D.OPEN_GROUP,N);else{let B=q.find(G=>G.item==N);B||(B=nt({type:n.type,title:n.title,item:i.merge(N),path:()=>R(N),requestPath:()=>{const G=[];return y(Pe(N),Pe(S.value),[],G),ut(`/${G.join("/")}`)},getGroups:()=>{const G=[];return y(Pe(N),Pe(S.value),[],[],G),G},getIcon:i.getIcon,runnable:i.runnable,doTest:i.doTest,processSave:i.processSave||(G=>G)}),q.push(B)),g.$emit(D.OPEN,B)}};g.$on(D.OPEN,N=>b.value=N.item),g.$on(D.OPEN_EMPTY,()=>b.value=null);const{proxy:pe}=At(),Ce=()=>{r.value;const N=ce({},d.value);delete N.children,delete N.opened,delete N.folder,Y.sendJson("/resource/folder/save",N).success(B=>{const G=`\u4FDD\u5B58${n.title}\u5206\u7EC4`;B?(console.log(S.value),ye(Ve(ce({},Pe(d.value)),{folder:!0,id:B})),g.status(`${G}\u300C${R(N)}\u300D\u6210\u529F`),h.value=!1,g.report("group-save")):(g.status("${msg}\u5931\u8D25",!1),pe.$alert("${msg}\u5931\u8D25",`\u4FDD\u5B58${n.title}\u5206\u7EC4`))})},we=(N,B)=>new Promise(G=>Y.send("/resource/move",{src:N.id,groupId:B.groupId||B.id}).success(F=>{const fe=`\u79FB\u52A8${N.folder?`${n.title}\u5206\u7EC4`:""}\u300C${R(N)}\u300D`;F?(N[N.folder?"parentId":"groupId"]=B.groupId||B.id,g.status(`${fe}\u6210\u529F`)):(pe.$alert(`${fe}\u5931\u8D25`),g.status(`${fe}\u5931\u8D25`,!1)),G(F)})),ne=(N,B)=>{B=B||S.value;const G=B.findIndex(F=>F===N||F.id===N.id);G>-1?B.splice(G,1):B.forEach(F=>ne(N,F.children||[]))},ye=(N,B)=>{B=B||S.value||[];const G=B.find(F=>F.id===N.id||N.groupId===F.id);if(G)return G.children=G.children||[],G.opened=!0,G.id===N.id?(G.name=N.name,G.path=N.path,G.parentId=N.parentId):G.children.push(N),!0;if(N.parentId==="0")return B.push(N),!0;{if(B.some(fe=>ye(N,fe.children||[])))return!0;const F=N.parentId!==void 0&&B.find(fe=>fe.id===N.parentId);if(F)return F.children.push(N),!0}return!1};g.$on(D.OPEN_ITEM,N=>{const B=Pe(S.value);B&&K(y(Pe(N),B,[],[]))});const Ze=(N,B)=>{if(N&&B){const G=[];N.folder?(G.push.apply(G,[{label:`\u65B0\u5EFA${n.title}`,icon:"plus",onClick(){const F={groupId:N.id,name:"\u672A\u5B9A\u4E49\u540D\u79F0",script:"hello",path:i.requirePath?"":void 0};ye(F),K(F)}},{label:"\u65B0\u5EFA\u5206\u7EC4",icon:"group-add",onClick(){r.value=!0,d.value={parentId:N.id,type:n.type},h.value=!0}},{label:"\u4FEE\u6539\u5206\u7EC4",icon:"update",onClick(){r.value=!1,d.value=ce({},N),h.value=!0}},{label:"\u590D\u5236\u5206\u7EC4",icon:"copy",onClick(){u.value=N.id,l.value=!0}},{label:"\u5220\u9664\u5206\u7EC4",icon:"delete",onClick(){pe.$confirm("\u5220\u9664\u5206\u7EC4",`\u662F\u5426\u8981\u5220\u9664\u5206\u7EC4\u300C${R(N)}\u300D`,()=>{N.id?Y.send("/resource/delete",{id:N.id}).success(F=>{F?(g.status(`\u5220\u9664${n.title}\u5206\u7EC4\u300C${R(N)}\u300D\u6210\u529F`),ne(N)):(pe.$alert(`\u5220\u9664${n.title}\u5206\u7EC4\u300C${R(N)}\u300D\u5931\u8D25`),g.status(`\u5220\u9664${n.title}\u5206\u7EC4\u300C${R(N)}\u300D\u5931\u8D25`,!1),g.report("group-delete"))}):ne(N)})}},{label:"\u5BFC\u51FA",icon:"download",onClick(){Y.send(`/download?groupId=${N.id}`,null,{headers:{"Content-Type":"application/json"},responseType:"blob"}).success(F=>{_n(F,`${N.name}.zip`),g.$emit("status",`\u5206\u7EC4\u300C${N.name}\u300D\u76F8\u5173${n.title}\u5DF2\u5BFC\u51FA`),g.report("group-export")})}}]),N.parentId!=="0"&&G.push({label:"\u79FB\u52A8\u5230\u6839\u8282\u70B9",icon:"move",onClick(){pe.$confirm("\u79FB\u52A8\u5206\u7EC4",`\u662F\u5426\u8981\u5C06\u5206\u7EC4\u300C${R(N)}\u300D\u79FB\u52A8\u81F3\u6839\u8282\u70B9`,()=>{Y.send("/resource/move",{src:N.id,groupId:"0"}).success(F=>{F?(g.status(`\u79FB\u52A8${n.title}\u5206\u7EC4\u300C${R(N)}\u300D\u81F3\u6839\u8282\u70B9\u6210\u529F`),N.parentId="0",ne(N),ye(N),g.report("group-move")):(pe.$alert(`\u79FB\u52A8${n.title}\u5206\u7EC4\u300C${R(N)}\u300D\u81F3\u6839\u8282\u70B9\u5931\u8D25`),g.status(`\u79FB\u52A8${n.title}\u5206\u7EC4\u300C${R(N)}\u300D\u81F3\u6839\u8282\u70B9\u5931\u8D25`,!1))})})}})):(G.push.apply(G,[{label:`\u590D\u5236${n.title}`,icon:"copy",divided:!0,onClick:()=>{Y.send(`/resource/file/${N.id}`).success(F=>{F.id=`copy${parseInt(Math.random()*1e10)}`,F.name=F.name+"(\u590D\u5236)",i.requirePath&&(F.path=F.path+"_copy"),ye(F),K(F)})}}]),i.requirePath&&(n.type==="api"&&G.push({label:"\u590D\u5236\u8DEF\u5F84",icon:"copy",onClick:()=>{let F=R(N,!0);F&&(F=ut(w.SERVER_URL+"/"+F),oi(F)?g.status(`${n.title}\u8DEF\u5F84\u300C${F}\u300D\u590D\u5236\u6210\u529F`):g.status(`${n.title}\u8DEF\u5F84\u300C${F}\u300D\u590D\u5236\u5931\u8D25\uFF0C\u8BF7\u624B\u52A8\u590D\u5236`))}}),G.push.apply(G,[{label:"\u590D\u5236\u76F8\u5BF9\u8DEF\u5F84",icon:"copy",divided:!0,onClick:()=>{const F=R(N,!0);F&&(oi(F)?g.status(`${n.title}\u76F8\u5BF9\u8DEF\u5F84\u300C${F}\u300D\u590D\u5236\u6210\u529F`):g.status(`${n.title}\u76F8\u5BF9\u8DEF\u5F84\u300C${F}\u300D\u590D\u5236\u5931\u8D25\uFF0C\u8BF7\u624B\u52A8\u590D\u5236`))}}]),N.lock===w.LOCKED?G.push({label:"\u89E3\u9501",icon:"unlock",onClick:()=>Y.sendPost("/resource/unlock",{id:N.id}).success(F=>{g.status(`${n.title}\u300C${R(N)}\u300D\u89E3\u9501${F?"\u6210\u529F":"\u5931\u8D25"}`,F),F&&(N.lock=w.UNLOCK,g.report("resource-unlock"))})}):G.push({label:"\u9501\u5B9A",icon:"lock",onClick:()=>Y.sendPost("/resource/lock",{id:N.id}).success(F=>{g.status(`${n.title}\u300C${R(N)}\u300D\u9501\u5B9A${F?"\u6210\u529F":"\u5931\u8D25"}`,F),F&&(N.lock=w.LOCKED,g.report("resource-lock"))})})),G.push.apply(G,[{label:"\u5237\u65B0",icon:"refresh"},{label:"\u5220\u9664",icon:"delete",onClick:()=>{const F=`\u5220\u9664${n.title}\u300C${R(N)}\u300D`;pe.$confirm(`\u5220\u9664${n.title}`,`\u662F\u5426\u8981\u5220\u9664${n.title}\u300C${R(N)}\u300D`,()=>{N.id&&!N.id.startsWith("copy")?Y.send("/resource/delete",{id:N.id}).success(fe=>{fe?(g.status(`${F}\u6210\u529F`),ne(N),g.$emit(D.DELETE_FILE,N),g.report("resource-delete")):(g.status(`${F}\u5931\u8D25`,!1),pe.$alert(`${F}\u5931\u8D25`))}):(g.status(`${F}\u6210\u529F`),ne(N),g.$emit(D.DELETE_FILE,N))})}}])),pe.$contextmenu({menus:G,event:B})}},Re=N=>{pe.$contextmenu({event:N,menus:I.value.slice(0,5).filter(B=>!B.show||B.show()).map(B=>({icon:B.icon,label:B.name,onClick:B.onClick}))})};let Le=null;const Ot=()=>{c.value&&Y.sendPost("/resource/folder/copy",{src:u.value,target:c.value.id.endsWith("-root")?"0":c.value.id}).success(N=>{Le=N,l.value=!1,g.$emit(D.LOAD_RESOURCES)})},Fn=ie("findResource");return g.$on(D.LOAD_RESOURCES_FINISH,()=>{Le&&Ie(()=>{const N=Fn(Le);g.$emit(D.SELECT_NAVBAR_BY_ITEM,N.item),g.$emit(D.OPEN_GROUP,N.item)})}),ht(()=>t("onLoad")),(N,B)=>{const G=v("magic-icon"),F=v("magic-input"),fe=v("magic-empty"),Ge=v("magic-text-icon"),et=v("magic-avatar-group"),tn=v("magic-tree"),ke=v("magic-button"),jn=v("magic-button-group"),Gn=v("magic-dialog"),Fi=v("magic-resource-choose");return E(),L("div",{class:"magic-resource",onContextmenu:B[10]||(B[10]=ge(z=>Re(z),["prevent"]))},[x("div",Rp,[p(G,{icon:"search",size:"14px"}),p(F,{value:o.value,"onUpdate:value":B[0]||(B[0]=z=>o.value=z),placeholder:"\u8F93\u5165\u5173\u952E\u5B57\u641C\u7D22",width:"auto"},null,8,["value"]),x("ul",null,[(E(!0),L(ee,null,ue(I.value,(z,Vn)=>(E(),L(ee,{key:Vn},[!z.show||z.show()?(E(),L("li",{key:0,title:z.name||"",onClick:ed=>z.onClick&&z.onClick(),class:de({separator:z.separator})},[z.separator?te("",!0):(E(),U(G,{key:0,icon:z.icon},null,8,["icon"]))],10,Ip)):te("",!0)],64))),128))])]),!e.data||e.data.length===0?(E(),U(fe,{key:0,text:`\u6682\u65E0${e.title}\u4FE1\u606F`},null,8,["text"])):(E(),U(tn,{key:1,ref_key:"treeObj",ref:A,data:P(S),onItemClick:K,onContextmenu:Ze,draggable:!0,sort:!0,descending:O.value,onMove:we,filter:o.value,"filter-text":$,selected:b.value},{folder:C(({item:z})=>[p(G,{icon:z.opened?"arrow-bottom":"arrow-right",onClick:ge(Vn=>z.opened=!z.opened,["stop"])},null,8,["icon","onClick"]),p(G,{icon:"list"}),x("label",null,j(z.name),1),P(a)&&z.path?(E(),L("span",xp,"("+j(z.path)+")",1)):te("",!0)]),file:C(({item:z})=>[p(Ge,{icon:P(s)(z)},null,8,["icon"]),x("label",null,j(z.name),1),P(a)&&z.path?(E(),L("span",Cp,"("+j(z.path)+")",1)):te("",!0),z.lock==="1"?(E(),U(G,{key:1,icon:"lock"})):te("",!0),p(et,{users:P(f)[z.id]||[],max:3,size:20},null,8,["users"])]),_:1},8,["data","descending","filter","selected"])),p(Gn,{title:`${P(m)}${e.title}\u5206\u7EC4`,value:h.value,"onUpdate:value":B[5]||(B[5]=z=>h.value=z)},{default:C(()=>[x("ul",Lp,[x("li",null,[Np,p(F,{value:d.value.name,"onUpdate:value":B[1]||(B[1]=z=>d.value.name=z),placeholder:`\u8BF7\u8F93\u5165${e.title}\u5206\u7EC4\u540D\u79F0`},null,8,["value","placeholder"])]),P(a)?(E(),L("li",kp,[Pp,p(F,{value:d.value.path,"onUpdate:value":B[2]||(B[2]=z=>d.value.path=z),placeholder:`\u8BF7\u8F93\u5165${e.title}\u5206\u7EC4\u8DEF\u5F84`},null,8,["value","placeholder"])])):te("",!0)]),p(jn,{align:"right",style:{padding:"5px 0"}},{default:C(()=>[p(ke,{value:P(m),type:"active",onOnClick:B[3]||(B[3]=z=>Ce())},null,8,["value"]),p(ke,{value:"\u53D6\u6D88",onOnClick:B[4]||(B[4]=z=>h.value=!1)})]),_:1})]),_:1},8,["title","value"]),p(Gn,{value:l.value,"onUpdate:value":B[9]||(B[9]=z=>l.value=z),title:"\u590D\u5236\u5206\u7EC4",shade:!1,padding:"0",width:"400px",overflow:"hidden"},{default:C(()=>[p(Fi,{ref:"chooseGroup",value:c.value,"onUpdate:value":B[6]||(B[6]=z=>c.value=z),file:!1,type:e.type,single:!0},null,8,["value","type"]),p(jn,{align:"right",style:{"margin-right":"5px","margin-bottom":"5px"}},{default:C(()=>[p(ke,{value:"\u5C55\u5F00",onOnClick:B[7]||(B[7]=z=>N.$refs.chooseGroup.expand(!0))}),p(ke,{value:"\u6536\u7F29",onOnClick:B[8]||(B[8]=z=>N.$refs.chooseGroup.expand(!1))}),p(ke,{type:"active",value:"\u590D\u5236",onOnClick:Ot})]),_:1})]),_:1},8,["value"])],32)}}};var Dp=V(wp,[["__scopeId","data-v-01d328f8"]]),$p=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Dp});const Mp={class:"magic-script-editor"},Up={key:0,class:"magic-empty-container"},Bp=Ji('<div class="magic-hot-key" data-v-c02d1e5c><p data-v-c02d1e5c> \u4FDD\u5B58<em data-v-c02d1e5c>Ctrl + S</em><br data-v-c02d1e5c> \u6D4B\u8BD5<em data-v-c02d1e5c>Ctrl + Q</em><br data-v-c02d1e5c> \u4EE3\u7801\u63D0\u793A<em data-v-c02d1e5c>Alt + /</em><br data-v-c02d1e5c> \u6062\u590D\u65AD\u70B9<em data-v-c02d1e5c>F8</em><br data-v-c02d1e5c> \u6B65\u8FDB<em data-v-c02d1e5c>F6</em><br data-v-c02d1e5c> \u4EE3\u7801\u683C\u5F0F\u5316<em data-v-c02d1e5c>Ctrl + Alt + L</em><br data-v-c02d1e5c> \u6700\u8FD1\u6253\u5F00<em data-v-c02d1e5c>Ctrl + E</em></p></div>',1),Fp=[Bp],jp={key:0},Gp={emits:["onLoad"],setup(e,{emit:t}){const{proxy:n}=At(),i=nt([]),a=k({}),s=k(!0),o=k(null),r=k(null),l=ie("activateUserFiles"),u={String:"java.lang.String",Integer:"java.lang.Integer",Double:"java.lang.Double",Long:"java.lang.Long",Byte:"java.lang.Byte",Short:"java.lang.Short",Float:"java.lang.Float",MultipartFile:"org.springframework.web.multipart.MultipartFile",MultipartFiles:"java.util.List"};Xt.setEnvironment(()=>{var I;const h={},d=(I=a.value)==null?void 0:I.item,S=y=>y&&Array.isArray(y)&&y.forEach(R=>{R&&typeof R.name=="string"&&R.dataType&&(h[R.name]=u[R.dataType]||"java.lang.Object")});return d&&(S(d==null?void 0:d.parameters),S(d==null?void 0:d.paths)),h});const c=h=>{let d=i.findIndex(S=>S===h);if(i.splice(d,1),h===a.value){let S=i.length;d<S?g.$emit(D.OPEN,i[d]):S>0&&g.$emit(D.OPEN,i[d-1])}g.$emit(D.CLOSE,h.item),i.length===0&&(g.$emit(D.OPEN_EMPTY),a.value={})};mt(i,h=>{je.set(w.RECENT_OPENED_TAB,h.filter(d=>{var S;return(S=d.item)==null?void 0:S.id}).map(d=>d.item.id))});const f=h=>{const d=a.value;if(d&&d.item){const S=a.value.processSave(d.item);return Object.keys(S).forEach(I=>d.item[I]=S[I]),Y.sendJson(`/resource/file/${a.value.type}/save?auto=${h?0:1}`,S).success(I=>{I?(g.status(`\u4FDD\u5B58${d.title}\u300C${d.path()}\u300D\u6210\u529F`),d.tmpObject=JSON.parse(JSON.stringify(S)),d.item.id!==I?g.report("script-add"):g.report("script-save"),d.item.id=I):(g.status(`\u4FDD\u5B58${d.title}\u300C${d.path()}\u300D\u5931\u8D25`,!1),n.$alert(`\u4FDD\u5B58${d.title}\u300C${d.path()}\u300D\u5931\u8D25`))})}},m=()=>a.value.doTest(a.value),O=h=>{if(a.value.debuging){o.value.removedDecorations(a.value.debugDecorations),a.value.debuging=!1,a.value.variables=null;const d=(a.value.decorations||[]).filter(S=>S.options.linesDecorationsClassName==="breakpoints").map(S=>S.range.startLineNumber).join("|");g.send(Ae.RESUME_BREAKPOINT,[a.value.item.id,h===!0?"1":"0",d].join(","))}},b=(h,d,S)=>{const I=[{label:"\u5173\u95ED",divided:!0,onClick(){c(d)}},{label:"\u5173\u95ED\u5176\u4ED6",divided:!0,onClick(){[...i].forEach((y,R)=>R!=S&&c(y))}},{label:"\u5173\u95ED\u5DE6\u4FA7",onClick(){[...i].forEach((y,R)=>R<S&&c(y))}},{label:"\u5173\u95ED\u53F3\u4FA7",divided:!0,onClick(){[...i].forEach((y,R)=>R>S&&c(y))}},{label:"\u5168\u90E8\u5173\u95ED",onClick(){[...i].forEach(y=>c(y))}}];n.$contextmenu({menus:I,event:h})},A=h=>Object.keys(h.tmpObject||{}).some(d=>{const S=h.tmpObject[d],I=h.item[d];return S===I||d==="properties"?!1:typeof S=="object"||typeof I=="object"?JSON.stringify(S)!==JSON.stringify(I):S!==I});return g.$on(D.LOGOUT,()=>[...i].forEach(h=>c(h))),g.$on(D.DELETE_FILE,h=>{const d=i.findIndex(S=>S.item===h);d>-1&&c(i[d])}),g.$on(D.RELOAD_RESOURCES_FINISH,()=>{i.filter(h=>h.item&&h.item.id).forEach(h=>Y.sendGet(`/resource/file/${h.item.id}`).success(d=>{g.status(`\u83B7\u53D6${h.title}\u300C${h.path()}\u300D\u8BE6\u60C5\u6210\u529F`),Object.keys(d).forEach(S=>h.item[S]=d[S])}))}),g.$event(Ae.LOGIN_RESPONSE,()=>{var h;a.value&&g.send(Ae.SET_FILE_ID,((h=a.value.item)==null?void 0:h.id)||"0")}),g.$on(D.OPEN,h=>{let d=i.find(S=>S.item===h.item||S.item.id&&S.item.id===h.item.id);g.send(Ae.SET_FILE_ID,h.item.id||"0"),d?(a.value=d,s.value=!1):(i.push(h),a.value=h,h.item.id&&!h.item.script?(s.value=!0,Y.sendGet(`/resource/file/${h.item.id}`).success(S=>{g.status(`\u83B7\u53D6${h.title}\u300C${h.path()}\u300D\u8BE6\u60C5\u6210\u529F`),Object.keys(S).forEach(I=>h.item[I]=S[I]),h.tmpObject=JSON.parse(JSON.stringify(h.processSave(S))),s.value=!1})):(h.tmpObject=JSON.parse(JSON.stringify(h.processSave(h.item))),s.value=!1)),a.value.decorations&&a.value.decorations.length>0&&Ie(()=>{const S=Pe(a.value.decorations);a.value.debugDecorations=o.value.appendDecoration(S).map((I,y)=>{var R;return((R=S[y].options)==null?void 0:R.className)==="debug-line"?I:null}).filter(I=>I!==null)||[]}),Ie(()=>r.value&&r.value.scrollIntoView(h))}),g.$on(D.DO_SAVE,f),g.$on(D.DO_TEST,()=>{const h=a.value;h&&h.item&&h.runnable&&h.doTest&&h.running!==!0&&(w.AUTO_SAVE&&h.item.lock!=="1"?f().end(d=>d&&m()):m())}),g.$event(Ae.BREAKPOINT,([h,{range:d,variables:S}])=>{var I,y;if(g.status("\u8FDB\u5165\u65AD\u70B9.."),((y=(I=a.value)==null?void 0:I.item)==null?void 0:y.id)!==h){const R=i.find($=>$.item.id===h);R&&g.$emit(D.OPEN,R)}Ie(()=>{a.value.variables=La(S),a.value.debuging=!0,a.value.debugDecorations=[o.value.appendDecoration([{range:new it(d[0],1,d[0],1),options:{isWholeLine:!0,inlineClassName:"debug-line",className:"debug-line"}}])],g.$emit(D.SWITCH_TOOLBAR,"debug")}),g.report("debug-in")}),g.$on(D.DEBUG_CONTINUE,O),g.$on(D.DEBUG_SETPINTO,()=>O(!0)),g.$event(Ae.EXCEPTION,([[h,d,S]])=>{var I,y;if(((y=(I=a.value)==null?void 0:I.item)==null?void 0:y.id)===h){const R=new it(S[0],S[2],S[1],S[3]+1),$=o.value.getInstance(),q=$.deltaDecorations([],[{range:R,options:{hoverMessage:{value:d},inlineClassName:"squiggly-error"}}]);$.revealRangeInCenter(R),$.focus(),w.DECORATION_TIMEOUT>=0&&setTimeout(()=>$.deltaDecorations(q,[]),w.DECORATION_TIMEOUT)}}),ht(()=>t("onLoad")),(h,d)=>{const S=v("magic-text-icon"),I=v("magic-icon"),y=v("magic-avatar-group"),R=v("magic-tab"),$=v("magic-monaco-editor"),q=v("magic-loading");return E(),L("div",Mp,[P(i).length===0?(E(),L("div",Up,Fp)):(E(),L(ee,{key:1},[p(R,{value:a.value,"onUpdate:value":d[0]||(d[0]=K=>a.value=K),tabs:P(i),className:"magic-script-tab",ref_key:"tab",ref:r,"allow-close":!0,onClose:c,onChange:d[1]||(d[1]=K=>P(g).$emit("open",K)),onItemContextmenu:b},{default:C(({tab:K})=>[p(S,{icon:K.getIcon(K.item)},null,8,["icon"]),Ye(j(K.item.name),1),A(K)?(E(),L("span",jp,"*")):te("",!0),K.item.lock===h.$LOCKED?(E(),U(I,{key:1,icon:"lock"})):te("",!0),p(y,{users:P(l)[K.item.id]||[],max:3,size:20},null,8,["users"])]),_:1},8,["value","tabs"]),p(q,{loading:s.value},{default:C(()=>[p($,{ref_key:"editor",ref:o,value:a.value.item.script,"onUpdate:value":d[2]||(d[2]=K=>a.value.item.script=K),decorations:a.value.decorations,"onUpdate:decorations":d[3]||(d[3]=K=>a.value.decorations=K),language:"magicscript","support-breakpoint":!0},null,8,["value","decorations"])]),_:1},8,["loading"])],64))])}}};var Vp=V(Gp,[["__scopeId","data-v-c02d1e5c"]]),Hp=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Vp});const en=e=>(Ke("data-v-3f0c21d7"),e=e(),We(),e),Yp={class:"magic-task-info"},Kp=en(()=>x("label",null,"\u662F\u5426\u542F\u7528",-1)),Wp=en(()=>x("label",null,"cron",-1)),qp=en(()=>x("label",null,"\u4EFB\u52A1\u540D\u79F0",-1)),Xp=en(()=>x("label",null,"\u4EFB\u52A1\u8DEF\u5F84",-1)),zp={style:{flex:"1","padding-top":"5px"}},Jp={setup(e){const t=ie("info");return(n,i)=>{const a=v("magic-checkbox"),s=v("magic-input"),o=v("magic-textarea");return E(),L("div",Yp,[x("form",null,[Kp,p(a,{value:P(t).enabled,"onUpdate:value":i[0]||(i[0]=r=>P(t).enabled=r)},null,8,["value"]),Wp,p(s,{value:P(t).cron,"onUpdate:value":i[1]||(i[1]=r=>P(t).cron=r),placeholder:"\u8BF7\u8F93\u5165cron\u8868\u8FBE\u5F0F",width:"150px"},null,8,["value"]),qp,p(s,{value:P(t).name,"onUpdate:value":i[2]||(i[2]=r=>P(t).name=r),placeholder:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u540D\u79F0",width:"200px"},null,8,["value"]),Xp,p(s,{value:P(t).path,"onUpdate:value":i[3]||(i[3]=r=>P(t).path=r),placeholder:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u8DEF\u5F84",width:"auto",style:{flex:"1"}},null,8,["value"])]),x("div",zp,[p(o,{value:P(t).description,"onUpdate:value":i[4]||(i[4]=r=>P(t).description=r),placeholder:"\u4EFB\u52A1\u63CF\u8FF0"},null,8,["value"])])])}}};var Qp=V(Jp,[["__scopeId","data-v-3f0c21d7"]]),Zp=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Qp});
